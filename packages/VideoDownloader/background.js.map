{"version":3,"file":"background.js","mappings":"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K,CAAC,GAAG,IAAI;EAChC,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEi3B,mBAAmB,CAACj3B,KAAK,EAAE;IACzB,OAAOshC,aAAa,CAACthC,KAAK,CAAC;EAC7B,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE+9B,0BAA0B,CAAC/9B,KAAK,EAAE;IAChC,OAAOshC,aAAa,CAACthC,KAAK,CAAC;EAC7B,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACExC,IAAI,CAACwC,KAAK,EAAE;IACV,OAAOA,KAAK;EACd,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEk3B,oBAAoB,CAACl3B,KAAK,EAAE;IAC1B,OAAOshC,aAAa,CAACthC,KAAK,CAAC;EAC7B,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEwF,KAAK,CAACxF,KAAK,EAAE;IACX,OAAOshC,aAAa,CAACthC,KAAK,CAAC;EAC7B,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;EACEysB,KAAK,CAACzsB,KAAK,EAAE;IACX,OAAO8mB,QAAQ,CAAC9mB,KAAK,EAAE,EAAE,CAAC;EAC5B,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;EACE0sB,MAAM,CAAC1sB,KAAK,EAAE;IACZ,OAAO8mB,QAAQ,CAAC9mB,KAAK,EAAE,EAAE,CAAC;EAC5B,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;EACE07B,SAAS,CAAC17B,KAAK,EAAE;IACf,OAAO8mB,QAAQ,CAAC9mB,KAAK,EAAE,EAAE,CAAC;EAC5B,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;EACEk9B,SAAS,CAACl9B,KAAK,EAAE;IACf,OAAOohC,kBAAkB,CAACphC,KAAK,CAAC;EAClC,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;EACE83B,WAAW,CAAC93B,KAAK,EAA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","sources":["webpack://video/./node_modules/@videojs/vhs-utils/es/decode-b64-to-uint8-array.js","webpack://video/./node_modules/@videojs/vhs-utils/es/media-groups.js","webpack://video/./node_modules/@videojs/vhs-utils/es/resolve-url.js","webpack://video/./node_modules/@videojs/vhs-utils/es/stream.js","webpack://video/./node_modules/@xmldom/xmldom/lib/conventions.js","webpack://video/./node_modules/@xmldom/xmldom/lib/dom-parser.js","webpack://video/./node_modules/@xmldom/xmldom/lib/dom.js","webpack://video/./node_modules/@xmldom/xmldom/lib/entities.js","webpack://video/./node_modules/@xmldom/xmldom/lib/index.js","webpack://video/./node_modules/@xmldom/xmldom/lib/sax.js","webpack://video/./node_modules/global/window.js","webpack://video/./node_modules/m3u8-parser/dist/m3u8-parser.es.js","webpack://video/./node_modules/mpd-parser/dist/mpd-parser.es.js","webpack://video/./node_modules/url-toolkit/src/url-toolkit.js","webpack://video/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://video/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://video/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://video/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://video/webpack/bootstrap","webpack://video/webpack/runtime/compat get default export","webpack://video/webpack/runtime/define property getters","webpack://video/webpack/runtime/global","webpack://video/webpack/runtime/hasOwnProperty shorthand","webpack://video/webpack/runtime/make namespace object","webpack://video/./background.js"],"sourcesContent":["import window from 'global/window';\n\nvar atob = function atob(s) {\n  return window.atob ? window.atob(s) : Buffer.from(s, 'base64').toString('binary');\n};\n\nexport default function decodeB64ToUint8Array(b64Text) {\n  var decodedString = atob(b64Text);\n  var array = new Uint8Array(decodedString.length);\n\n  for (var i = 0; i < decodedString.length; i++) {\n    array[i] = decodedString.charCodeAt(i);\n  }\n\n  return array;\n}","/**\n * Loops through all supported media groups in master and calls the provided\n * callback for each group\n *\n * @param {Object} master\n *        The parsed master manifest object\n * @param {string[]} groups\n *        The media groups to call the callback for\n * @param {Function} callback\n *        Callback to call for each media group\n */\nexport var forEachMediaGroup = function forEachMediaGroup(master, groups, callback) {\n  groups.forEach(function (mediaType) {\n    for (var groupKey in master.mediaGroups[mediaType]) {\n      for (var labelKey in master.mediaGroups[mediaType][groupKey]) {\n        var mediaProperties = master.mediaGroups[mediaType][groupKey][labelKey];\n        callback(mediaProperties, mediaType, groupKey, labelKey);\n      }\n    }\n  });\n};","import URLToolkit from 'url-toolkit';\nimport window from 'global/window';\nvar DEFAULT_LOCATION = 'http://example.com';\n\nvar resolveUrl = function resolveUrl(baseUrl, relativeUrl) {\n  // return early if we don't need to resolve\n  if (/^[a-z]+:/i.test(relativeUrl)) {\n    return relativeUrl;\n  } // if baseUrl is a data URI, ignore it and resolve everything relative to window.location\n\n\n  if (/^data:/.test(baseUrl)) {\n    baseUrl = window.location && window.location.href || '';\n  } // IE11 supports URL but not the URL constructor\n  // feature detect the behavior we want\n\n\n  var nativeURL = typeof window.URL === 'function';\n  var protocolLess = /^\\/\\//.test(baseUrl); // remove location if window.location isn't available (i.e. we're in node)\n  // and if baseUrl isn't an absolute url\n\n  var removeLocation = !window.location && !/\\/\\//i.test(baseUrl); // if the base URL is relative then combine with the current location\n\n  if (nativeURL) {\n    baseUrl = new window.URL(baseUrl, window.location || DEFAULT_LOCATION);\n  } else if (!/\\/\\//i.test(baseUrl)) {\n    baseUrl = URLToolkit.buildAbsoluteURL(window.location && window.location.href || '', baseUrl);\n  }\n\n  if (nativeURL) {\n    var newUrl = new URL(relativeUrl, baseUrl); // if we're a protocol-less url, remove the protocol\n    // and if we're location-less, remove the location\n    // otherwise, return the url unmodified\n\n    if (removeLocation) {\n      return newUrl.href.slice(DEFAULT_LOCATION.length);\n    } else if (protocolLess) {\n      return newUrl.href.slice(newUrl.protocol.length);\n    }\n\n    return newUrl.href;\n  }\n\n  return URLToolkit.buildAbsoluteURL(baseUrl, relativeUrl);\n};\n\nexport default resolveUrl;","/**\n * @file stream.js\n */\n\n/**\n * A lightweight readable stream implemention that handles event dispatching.\n *\n * @class Stream\n */\nvar Stream = /*#__PURE__*/function () {\n  function Stream() {\n    this.listeners = {};\n  }\n  /**\n   * Add a listener for a specified event type.\n   *\n   * @param {string} type the event name\n   * @param {Function} listener the callback to be invoked when an event of\n   * the specified type occurs\n   */\n\n\n  var _proto = Stream.prototype;\n\n  _proto.on = function on(type, listener) {\n    if (!this.listeners[type]) {\n      this.listeners[type] = [];\n    }\n\n    this.listeners[type].push(listener);\n  }\n  /**\n   * Remove a listener for a specified event type.\n   *\n   * @param {string} type the event name\n   * @param {Function} listener  a function previously registered for this\n   * type of event through `on`\n   * @return {boolean} if we could turn it off or not\n   */\n  ;\n\n  _proto.off = function off(type, listener) {\n    if (!this.listeners[type]) {\n      return false;\n    }\n\n    var index = this.listeners[type].indexOf(listener); // TODO: which is better?\n    // In Video.js we slice listener functions\n    // on trigger so that it does not mess up the order\n    // while we loop through.\n    //\n    // Here we slice on off so that the loop in trigger\n    // can continue using it's old reference to loop without\n    // messing up the order.\n\n    this.listeners[type] = this.listeners[type].slice(0);\n    this.listeners[type].splice(index, 1);\n    return index > -1;\n  }\n  /**\n   * Trigger an event of the specified type on this stream. Any additional\n   * arguments to this function are passed as parameters to event listeners.\n   *\n   * @param {string} type the event name\n   */\n  ;\n\n  _proto.trigger = function trigger(type) {\n    var callbacks = this.listeners[type];\n\n    if (!callbacks) {\n      return;\n    } // Slicing the arguments on every invocation of this method\n    // can add a significant amount of overhead. Avoid the\n    // intermediate object creation for the common case of a\n    // single callback argument\n\n\n    if (arguments.length === 2) {\n      var length = callbacks.length;\n\n      for (var i = 0; i < length; ++i) {\n        callbacks[i].call(this, arguments[1]);\n      }\n    } else {\n      var args = Array.prototype.slice.call(arguments, 1);\n      var _length = callbacks.length;\n\n      for (var _i = 0; _i < _length; ++_i) {\n        callbacks[_i].apply(this, args);\n      }\n    }\n  }\n  /**\n   * Destroys the stream and cleans up.\n   */\n  ;\n\n  _proto.dispose = function dispose() {\n    this.listeners = {};\n  }\n  /**\n   * Forwards all `data` events on this stream to the destination stream. The\n   * destination stream should provide a method `push` to receive the data\n   * events as they arrive.\n   *\n   * @param {Stream} destination the stream that will receive all `data` events\n   * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\n   */\n  ;\n\n  _proto.pipe = function pipe(destination) {\n    this.on('data', function (data) {\n      destination.push(data);\n    });\n  };\n\n  return Stream;\n}();\n\nexport { Stream as default };","'use strict'\n\n/**\n * Ponyfill for `Array.prototype.find` which is only available in ES6 runtimes.\n *\n * Works with anything that has a `length` property and index access properties, including NodeList.\n *\n * @template {unknown} T\n * @param {Array<T> | ({length:number, [number]: T})} list\n * @param {function (item: T, index: number, list:Array<T> | ({length:number, [number]: T})):boolean} predicate\n * @param {Partial<Pick<ArrayConstructor['prototype'], 'find'>>?} ac `Array.prototype` by default,\n * \t\t\t\tallows injecting a custom implementation in tests\n * @returns {T | undefined}\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n * @see https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array.prototype.find\n */\nfunction find(list, predicate, ac) {\n\tif (ac === undefined) {\n\t\tac = Array.prototype;\n\t}\n\tif (list && typeof ac.find === 'function') {\n\t\treturn ac.find.call(list, predicate);\n\t}\n\tfor (var i = 0; i < list.length; i++) {\n\t\tif (Object.prototype.hasOwnProperty.call(list, i)) {\n\t\t\tvar item = list[i];\n\t\t\tif (predicate.call(undefined, item, i, list)) {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * \"Shallow freezes\" an object to render it immutable.\n * Uses `Object.freeze` if available,\n * otherwise the immutability is only in the type.\n *\n * Is used to create \"enum like\" objects.\n *\n * @template T\n * @param {T} object the object to freeze\n * @param {Pick<ObjectConstructor, 'freeze'> = Object} oc `Object` by default,\n * \t\t\t\tallows to inject custom object constructor for tests\n * @returns {Readonly<T>}\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n */\nfunction freeze(object, oc) {\n\tif (oc === undefined) {\n\t\toc = Object\n\t}\n\treturn oc && typeof oc.freeze === 'function' ? oc.freeze(object) : object\n}\n\n/**\n * Since we can not rely on `Object.assign` we provide a simplified version\n * that is sufficient for our needs.\n *\n * @param {Object} target\n * @param {Object | null | undefined} source\n *\n * @returns {Object} target\n * @throws TypeError if target is not an object\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n * @see https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object.assign\n */\nfunction assign(target, source) {\n\tif (target === null || typeof target !== 'object') {\n\t\tthrow new TypeError('target is not an object')\n\t}\n\tfor (var key in source) {\n\t\tif (Object.prototype.hasOwnProperty.call(source, key)) {\n\t\t\ttarget[key] = source[key]\n\t\t}\n\t}\n\treturn target\n}\n\n/**\n * All mime types that are allowed as input to `DOMParser.parseFromString`\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString#Argument02 MDN\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#domparsersupportedtype WHATWG HTML Spec\n * @see DOMParser.prototype.parseFromString\n */\nvar MIME_TYPE = freeze({\n\t/**\n\t * `text/html`, the only mime type that triggers treating an XML document as HTML.\n\t *\n\t * @see DOMParser.SupportedType.isHTML\n\t * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n\t * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring WHATWG HTML Spec\n\t */\n\tHTML: 'text/html',\n\n\t/**\n\t * Helper method to check a mime type if it indicates an HTML document\n\t *\n\t * @param {string} [value]\n\t * @returns {boolean}\n\t *\n\t * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n\t * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring \t */\n\tisHTML: function (value) {\n\t\treturn value === MIME_TYPE.HTML\n\t},\n\n\t/**\n\t * `application/xml`, the standard mime type for XML documents.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xml IANA MimeType registration\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.1 RFC 7303\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_APPLICATION: 'application/xml',\n\n\t/**\n\t * `text/html`, an alias for `application/xml`.\n\t *\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.2 RFC 7303\n\t * @see https://www.iana.org/assignments/media-types/text/xml IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_TEXT: 'text/xml',\n\n\t/**\n\t * `application/xhtml+xml`, indicates an XML document that has the default HTML namespace,\n\t * but is parsed as an XML document.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xhtml+xml IANA MimeType registration\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument WHATWG DOM Spec\n\t * @see https://en.wikipedia.org/wiki/XHTML Wikipedia\n\t */\n\tXML_XHTML_APPLICATION: 'application/xhtml+xml',\n\n\t/**\n\t * `image/svg+xml`,\n\t *\n\t * @see https://www.iana.org/assignments/media-types/image/svg+xml IANA MimeType registration\n\t * @see https://www.w3.org/TR/SVG11/ W3C SVG 1.1\n\t * @see https://en.wikipedia.org/wiki/Scalable_Vector_Graphics Wikipedia\n\t */\n\tXML_SVG_IMAGE: 'image/svg+xml',\n})\n\n/**\n * Namespaces that are used in this code base.\n *\n * @see http://www.w3.org/TR/REC-xml-names\n */\nvar NAMESPACE = freeze({\n\t/**\n\t * The XHTML namespace.\n\t *\n\t * @see http://www.w3.org/1999/xhtml\n\t */\n\tHTML: 'http://www.w3.org/1999/xhtml',\n\n\t/**\n\t * Checks if `uri` equals `NAMESPACE.HTML`.\n\t *\n\t * @param {string} [uri]\n\t *\n\t * @see NAMESPACE.HTML\n\t */\n\tisHTML: function (uri) {\n\t\treturn uri === NAMESPACE.HTML\n\t},\n\n\t/**\n\t * The SVG namespace.\n\t *\n\t * @see http://www.w3.org/2000/svg\n\t */\n\tSVG: 'http://www.w3.org/2000/svg',\n\n\t/**\n\t * The `xml:` namespace.\n\t *\n\t * @see http://www.w3.org/XML/1998/namespace\n\t */\n\tXML: 'http://www.w3.org/XML/1998/namespace',\n\n\t/**\n\t * The `xmlns:` namespace\n\t *\n\t * @see https://www.w3.org/2000/xmlns/\n\t */\n\tXMLNS: 'http://www.w3.org/2000/xmlns/',\n})\n\nexports.assign = assign;\nexports.find = find;\nexports.freeze = freeze;\nexports.MIME_TYPE = MIME_TYPE;\nexports.NAMESPACE = NAMESPACE;\n","var conventions = require(\"./conventions\");\nvar dom = require('./dom')\nvar entities = require('./entities');\nvar sax = require('./sax');\n\nvar DOMImplementation = dom.DOMImplementation;\n\nvar NAMESPACE = conventions.NAMESPACE;\n\nvar ParseError = sax.ParseError;\nvar XMLReader = sax.XMLReader;\n\n/**\n * Normalizes line ending according to https://www.w3.org/TR/xml11/#sec-line-ends:\n *\n * > XML parsed entities are often stored in computer files which,\n * > for editing convenience, are organized into lines.\n * > These lines are typically separated by some combination\n * > of the characters CARRIAGE RETURN (#xD) and LINE FEED (#xA).\n * >\n * > To simplify the tasks of applications, the XML processor must behave\n * > as if it normalized all line breaks in external parsed entities (including the document entity)\n * > on input, before parsing, by translating all of the following to a single #xA character:\n * >\n * > 1. the two-character sequence #xD #xA\n * > 2. the two-character sequence #xD #x85\n * > 3. the single character #x85\n * > 4. the single character #x2028\n * > 5. any #xD character that is not immediately followed by #xA or #x85.\n *\n * @param {string} input\n * @returns {string}\n */\nfunction normalizeLineEndings(input) {\n\treturn input\n\t\t.replace(/\\r[\\n\\u0085]/g, '\\n')\n\t\t.replace(/[\\r\\u0085\\u2028]/g, '\\n')\n}\n\n/**\n * @typedef Locator\n * @property {number} [columnNumber]\n * @property {number} [lineNumber]\n */\n\n/**\n * @typedef DOMParserOptions\n * @property {DOMHandler} [domBuilder]\n * @property {Function} [errorHandler]\n * @property {(string) => string} [normalizeLineEndings] used to replace line endings before parsing\n * \t\t\t\t\t\tdefaults to `normalizeLineEndings`\n * @property {Locator} [locator]\n * @property {Record<string, string>} [xmlns]\n *\n * @see normalizeLineEndings\n */\n\n/**\n * The DOMParser interface provides the ability to parse XML or HTML source code\n * from a string into a DOM `Document`.\n *\n * _xmldom is different from the spec in that it allows an `options` parameter,\n * to override the default behavior._\n *\n * @param {DOMParserOptions} [options]\n * @constructor\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-parsing-and-serialization\n */\nfunction DOMParser(options){\n\tthis.options = options ||{locator:{}};\n}\n\nDOMParser.prototype.parseFromString = function(source,mimeType){\n\tvar options = this.options;\n\tvar sax =  new XMLReader();\n\tvar domBuilder = options.domBuilder || new DOMHandler();//contentHandler and LexicalHandler\n\tvar errorHandler = options.errorHandler;\n\tvar locator = options.locator;\n\tvar defaultNSMap = options.xmlns||{};\n\tvar isHTML = /\\/x?html?$/.test(mimeType);//mimeType.toLowerCase().indexOf('html') > -1;\n  \tvar entityMap = isHTML ? entities.HTML_ENTITIES : entities.XML_ENTITIES;\n\tif(locator){\n\t\tdomBuilder.setDocumentLocator(locator)\n\t}\n\n\tsax.errorHandler = buildErrorHandler(errorHandler,domBuilder,locator);\n\tsax.domBuilder = options.domBuilder || domBuilder;\n\tif(isHTML){\n\t\tdefaultNSMap[''] = NAMESPACE.HTML;\n\t}\n\tdefaultNSMap.xml = defaultNSMap.xml || NAMESPACE.XML;\n\tvar normalize = options.normalizeLineEndings || normalizeLineEndings;\n\tif (source && typeof source === 'string') {\n\t\tsax.parse(\n\t\t\tnormalize(source),\n\t\t\tdefaultNSMap,\n\t\t\tentityMap\n\t\t)\n\t} else {\n\t\tsax.errorHandler.error('invalid doc source')\n\t}\n\treturn domBuilder.doc;\n}\nfunction buildErrorHandler(errorImpl,domBuilder,locator){\n\tif(!errorImpl){\n\t\tif(domBuilder instanceof DOMHandler){\n\t\t\treturn domBuilder;\n\t\t}\n\t\terrorImpl = domBuilder ;\n\t}\n\tvar errorHandler = {}\n\tvar isCallback = errorImpl instanceof Function;\n\tlocator = locator||{}\n\tfunction build(key){\n\t\tvar fn = errorImpl[key];\n\t\tif(!fn && isCallback){\n\t\t\tfn = errorImpl.length == 2?function(msg){errorImpl(key,msg)}:errorImpl;\n\t\t}\n\t\terrorHandler[key] = fn && function(msg){\n\t\t\tfn('[xmldom '+key+']\\t'+msg+_locator(locator));\n\t\t}||function(){};\n\t}\n\tbuild('warning');\n\tbuild('error');\n\tbuild('fatalError');\n\treturn errorHandler;\n}\n\n//console.log('#\\n\\n\\n\\n\\n\\n\\n####')\n/**\n * +ContentHandler+ErrorHandler\n * +LexicalHandler+EntityResolver2\n * -DeclHandler-DTDHandler\n *\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\n */\nfunction DOMHandler() {\n    this.cdata = false;\n}\nfunction position(locator,node){\n\tnode.lineNumber = locator.lineNumber;\n\tnode.columnNumber = locator.columnNumber;\n}\n/**\n * @see org.xml.sax.ContentHandler#startDocument\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\n */\nDOMHandler.prototype = {\n\tstartDocument : function() {\n    \tthis.doc = new DOMImplementation().createDocument(null, null, null);\n    \tif (this.locator) {\n        \tthis.doc.documentURI = this.locator.systemId;\n    \t}\n\t},\n\tstartElement:function(namespaceURI, localName, qName, attrs) {\n\t\tvar doc = this.doc;\n\t    var el = doc.createElementNS(namespaceURI, qName||localName);\n\t    var len = attrs.length;\n\t    appendElement(this, el);\n\t    this.currentElement = el;\n\n\t\tthis.locator && position(this.locator,el)\n\t    for (var i = 0 ; i < len; i++) {\n\t        var namespaceURI = attrs.getURI(i);\n\t        var value = attrs.getValue(i);\n\t        var qName = attrs.getQName(i);\n\t\t\tvar attr = doc.createAttributeNS(namespaceURI, qName);\n\t\t\tthis.locator &&position(attrs.getLocator(i),attr);\n\t\t\tattr.value = attr.nodeValue = value;\n\t\t\tel.setAttributeNode(attr)\n\t    }\n\t},\n\tendElement:function(namespaceURI, localName, qName) {\n\t\tvar current = this.currentElement\n\t\tvar tagName = current.tagName;\n\t\tthis.currentElement = current.parentNode;\n\t},\n\tstartPrefixMapping:function(prefix, uri) {\n\t},\n\tendPrefixMapping:function(prefix) {\n\t},\n\tprocessingInstruction:function(target, data) {\n\t    var ins = this.doc.createProcessingInstruction(target, data);\n\t    this.locator && position(this.locator,ins)\n\t    appendElement(this, ins);\n\t},\n\tignorableWhitespace:function(ch, start, length) {\n\t},\n\tcharacters:function(chars, start, length) {\n\t\tchars = _toString.apply(this,arguments)\n\t\t//console.log(chars)\n\t\tif(chars){\n\t\t\tif (this.cdata) {\n\t\t\t\tvar charNode = this.doc.createCDATASection(chars);\n\t\t\t} else {\n\t\t\t\tvar charNode = this.doc.createTextNode(chars);\n\t\t\t}\n\t\t\tif(this.currentElement){\n\t\t\t\tthis.currentElement.appendChild(charNode);\n\t\t\t}else if(/^\\s*$/.test(chars)){\n\t\t\t\tthis.doc.appendChild(charNode);\n\t\t\t\t//process xml\n\t\t\t}\n\t\t\tthis.locator && position(this.locator,charNode)\n\t\t}\n\t},\n\tskippedEntity:function(name) {\n\t},\n\tendDocument:function() {\n\t\tthis.doc.normalize();\n\t},\n\tsetDocumentLocator:function (locator) {\n\t    if(this.locator = locator){// && !('lineNumber' in locator)){\n\t    \tlocator.lineNumber = 0;\n\t    }\n\t},\n\t//LexicalHandler\n\tcomment:function(chars, start, length) {\n\t\tchars = _toString.apply(this,arguments)\n\t    var comm = this.doc.createComment(chars);\n\t    this.locator && position(this.locator,comm)\n\t    appendElement(this, comm);\n\t},\n\n\tstartCDATA:function() {\n\t    //used in characters() methods\n\t    this.cdata = true;\n\t},\n\tendCDATA:function() {\n\t    this.cdata = false;\n\t},\n\n\tstartDTD:function(name, publicId, systemId) {\n\t\tvar impl = this.doc.implementation;\n\t    if (impl && impl.createDocumentType) {\n\t        var dt = impl.createDocumentType(name, publicId, systemId);\n\t        this.locator && position(this.locator,dt)\n\t        appendElement(this, dt);\n\t\t\t\t\tthis.doc.doctype = dt;\n\t    }\n\t},\n\t/**\n\t * @see org.xml.sax.ErrorHandler\n\t * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\n\t */\n\twarning:function(error) {\n\t\tconsole.warn('[xmldom warning]\\t'+error,_locator(this.locator));\n\t},\n\terror:function(error) {\n\t\tconsole.error('[xmldom error]\\t'+error,_locator(this.locator));\n\t},\n\tfatalError:function(error) {\n\t\tthrow new ParseError(error, this.locator);\n\t}\n}\nfunction _locator(l){\n\tif(l){\n\t\treturn '\\n@'+(l.systemId ||'')+'#[line:'+l.lineNumber+',col:'+l.columnNumber+']'\n\t}\n}\nfunction _toString(chars,start,length){\n\tif(typeof chars == 'string'){\n\t\treturn chars.substr(start,length)\n\t}else{//java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\n\t\tif(chars.length >= start+length || start){\n\t\t\treturn new java.lang.String(chars,start,length)+'';\n\t\t}\n\t\treturn chars;\n\t}\n}\n\n/*\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\n * used method of org.xml.sax.ext.LexicalHandler:\n *  #comment(chars, start, length)\n *  #startCDATA()\n *  #endCDATA()\n *  #startDTD(name, publicId, systemId)\n *\n *\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\n *  #endDTD()\n *  #startEntity(name)\n *  #endEntity(name)\n *\n *\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\n * IGNORED method of org.xml.sax.ext.DeclHandler\n * \t#attributeDecl(eName, aName, type, mode, value)\n *  #elementDecl(name, model)\n *  #externalEntityDecl(name, publicId, systemId)\n *  #internalEntityDecl(name, value)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\n * IGNORED method of org.xml.sax.EntityResolver2\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\n *  #resolveEntity(publicId, systemId)\n *  #getExternalSubset(name, baseURI)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\n * IGNORED method of org.xml.sax.DTDHandler\n *  #notationDecl(name, publicId, systemId) {};\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\n */\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g,function(key){\n\tDOMHandler.prototype[key] = function(){return null}\n})\n\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\nfunction appendElement (hander,node) {\n    if (!hander.currentElement) {\n        hander.doc.appendChild(node);\n    } else {\n        hander.currentElement.appendChild(node);\n    }\n}//appendChild and setAttributeNS are preformance key\n\nexports.__DOMHandler = DOMHandler;\nexports.normalizeLineEndings = normalizeLineEndings;\nexports.DOMParser = DOMParser;\n","var conventions = require(\"./conventions\");\n\nvar find = conventions.find;\nvar NAMESPACE = conventions.NAMESPACE;\n\n/**\n * A prerequisite for `[].filter`, to drop elements that are empty\n * @param {string} input\n * @returns {boolean}\n */\nfunction notEmptyString (input) {\n\treturn input !== ''\n}\n/**\n * @see https://infra.spec.whatwg.org/#split-on-ascii-whitespace\n * @see https://infra.spec.whatwg.org/#ascii-whitespace\n *\n * @param {string} input\n * @returns {string[]} (can be empty)\n */\nfunction splitOnASCIIWhitespace(input) {\n\t// U+0009 TAB, U+000A LF, U+000C FF, U+000D CR, U+0020 SPACE\n\treturn input ? input.split(/[\\t\\n\\f\\r ]+/).filter(notEmptyString) : []\n}\n\n/**\n * Adds element as a key to current if it is not already present.\n *\n * @param {Record<string, boolean | undefined>} current\n * @param {string} element\n * @returns {Record<string, boolean | undefined>}\n */\nfunction orderedSetReducer (current, element) {\n\tif (!current.hasOwnProperty(element)) {\n\t\tcurrent[element] = true;\n\t}\n\treturn current;\n}\n\n/**\n * @see https://infra.spec.whatwg.org/#ordered-set\n * @param {string} input\n * @returns {string[]}\n */\nfunction toOrderedSet(input) {\n\tif (!input) return [];\n\tvar list = splitOnASCIIWhitespace(input);\n\treturn Object.keys(list.reduce(orderedSetReducer, {}))\n}\n\n/**\n * Uses `list.indexOf` to implement something like `Array.prototype.includes`,\n * which we can not rely on being available.\n *\n * @param {any[]} list\n * @returns {function(any): boolean}\n */\nfunction arrayIncludes (list) {\n\treturn function(element) {\n\t\treturn list && list.indexOf(element) !== -1;\n\t}\n}\n\nfunction copy(src,dest){\n\tfor(var p in src){\n\t\tif (Object.prototype.hasOwnProperty.call(src, p)) {\n\t\t\tdest[p] = src[p];\n\t\t}\n\t}\n}\n\n/**\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*((?:.*\\{\\s*?[\\r\\n][\\s\\S]*?^})|\\S.*?(?=[;\\r\\n]));?\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*(\\S.*?(?=[;\\r\\n]));?\n */\nfunction _extends(Class,Super){\n\tvar pt = Class.prototype;\n\tif(!(pt instanceof Super)){\n\t\tfunction t(){};\n\t\tt.prototype = Super.prototype;\n\t\tt = new t();\n\t\tcopy(pt,t);\n\t\tClass.prototype = pt = t;\n\t}\n\tif(pt.constructor != Class){\n\t\tif(typeof Class != 'function'){\n\t\t\tconsole.error(\"unknown Class:\"+Class)\n\t\t}\n\t\tpt.constructor = Class\n\t}\n}\n\n// Node Types\nvar NodeType = {}\nvar ELEMENT_NODE                = NodeType.ELEMENT_NODE                = 1;\nvar ATTRIBUTE_NODE              = NodeType.ATTRIBUTE_NODE              = 2;\nvar TEXT_NODE                   = NodeType.TEXT_NODE                   = 3;\nvar CDATA_SECTION_NODE          = NodeType.CDATA_SECTION_NODE          = 4;\nvar ENTITY_REFERENCE_NODE       = NodeType.ENTITY_REFERENCE_NODE       = 5;\nvar ENTITY_NODE                 = NodeType.ENTITY_NODE                 = 6;\nvar PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;\nvar COMMENT_NODE                = NodeType.COMMENT_NODE                = 8;\nvar DOCUMENT_NODE               = NodeType.DOCUMENT_NODE               = 9;\nvar DOCUMENT_TYPE_NODE          = NodeType.DOCUMENT_TYPE_NODE          = 10;\nvar DOCUMENT_FRAGMENT_NODE      = NodeType.DOCUMENT_FRAGMENT_NODE      = 11;\nvar NOTATION_NODE               = NodeType.NOTATION_NODE               = 12;\n\n// ExceptionCode\nvar ExceptionCode = {}\nvar ExceptionMessage = {};\nvar INDEX_SIZE_ERR              = ExceptionCode.INDEX_SIZE_ERR              = ((ExceptionMessage[1]=\"Index size error\"),1);\nvar DOMSTRING_SIZE_ERR          = ExceptionCode.DOMSTRING_SIZE_ERR          = ((ExceptionMessage[2]=\"DOMString size error\"),2);\nvar HIERARCHY_REQUEST_ERR       = ExceptionCode.HIERARCHY_REQUEST_ERR       = ((ExceptionMessage[3]=\"Hierarchy request error\"),3);\nvar WRONG_DOCUMENT_ERR          = ExceptionCode.WRONG_DOCUMENT_ERR          = ((ExceptionMessage[4]=\"Wrong document\"),4);\nvar INVALID_CHARACTER_ERR       = ExceptionCode.INVALID_CHARACTER_ERR       = ((ExceptionMessage[5]=\"Invalid character\"),5);\nvar NO_DATA_ALLOWED_ERR         = ExceptionCode.NO_DATA_ALLOWED_ERR         = ((ExceptionMessage[6]=\"No data allowed\"),6);\nvar NO_MODIFICATION_ALLOWED_ERR = ExceptionCode.NO_MODIFICATION_ALLOWED_ERR = ((ExceptionMessage[7]=\"No modification allowed\"),7);\nvar NOT_FOUND_ERR               = ExceptionCode.NOT_FOUND_ERR               = ((ExceptionMessage[8]=\"Not found\"),8);\nvar NOT_SUPPORTED_ERR           = ExceptionCode.NOT_SUPPORTED_ERR           = ((ExceptionMessage[9]=\"Not supported\"),9);\nvar INUSE_ATTRIBUTE_ERR         = ExceptionCode.INUSE_ATTRIBUTE_ERR         = ((ExceptionMessage[10]=\"Attribute in use\"),10);\n//level2\nvar INVALID_STATE_ERR        \t= ExceptionCode.INVALID_STATE_ERR        \t= ((ExceptionMessage[11]=\"Invalid state\"),11);\nvar SYNTAX_ERR               \t= ExceptionCode.SYNTAX_ERR               \t= ((ExceptionMessage[12]=\"Syntax error\"),12);\nvar INVALID_MODIFICATION_ERR \t= ExceptionCode.INVALID_MODIFICATION_ERR \t= ((ExceptionMessage[13]=\"Invalid modification\"),13);\nvar NAMESPACE_ERR            \t= ExceptionCode.NAMESPACE_ERR           \t= ((ExceptionMessage[14]=\"Invalid namespace\"),14);\nvar INVALID_ACCESS_ERR       \t= ExceptionCode.INVALID_ACCESS_ERR      \t= ((ExceptionMessage[15]=\"Invalid access\"),15);\n\n/**\n * DOM Level 2\n * Object DOMException\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n */\nfunction DOMException(code, message) {\n\tif(message instanceof Error){\n\t\tvar error = message;\n\t}else{\n\t\terror = this;\n\t\tError.call(this, ExceptionMessage[code]);\n\t\tthis.message = ExceptionMessage[code];\n\t\tif(Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n\t}\n\terror.code = code;\n\tif(message) this.message = this.message + \": \" + message;\n\treturn error;\n};\nDOMException.prototype = Error.prototype;\ncopy(ExceptionCode,DOMException)\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n */\nfunction NodeList() {\n};\nNodeList.prototype = {\n\t/**\n\t * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.\n\t * @standard level1\n\t */\n\tlength:0,\n\t/**\n\t * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.\n\t * @standard level1\n\t * @param index  unsigned long\n\t *   Index into the collection.\n\t * @return Node\n\t * \tThe node at the indexth position in the NodeList, or null if that is not a valid index.\n\t */\n\titem: function(index) {\n\t\treturn this[index] || null;\n\t},\n\ttoString:function(isHTML,nodeFilter){\n\t\tfor(var buf = [], i = 0;i<this.length;i++){\n\t\t\tserializeToString(this[i],buf,isHTML,nodeFilter);\n\t\t}\n\t\treturn buf.join('');\n\t},\n\t/**\n\t * @private\n\t * @param {function (Node):boolean} predicate\n\t * @returns {Node[]}\n\t */\n\tfilter: function (predicate) {\n\t\treturn Array.prototype.filter.call(this, predicate);\n\t},\n\t/**\n\t * @private\n\t * @param {Node} item\n\t * @returns {number}\n\t */\n\tindexOf: function (item) {\n\t\treturn Array.prototype.indexOf.call(this, item);\n\t},\n};\n\nfunction LiveNodeList(node,refresh){\n\tthis._node = node;\n\tthis._refresh = refresh\n\t_updateLiveList(this);\n}\nfunction _updateLiveList(list){\n\tvar inc = list._node._inc || list._node.ownerDocument._inc;\n\tif(list._inc != inc){\n\t\tvar ls = list._refresh(list._node);\n\t\t//console.log(ls.length)\n\t\t__set__(list,'length',ls.length);\n\t\tcopy(ls,list);\n\t\tlist._inc = inc;\n\t}\n}\nLiveNodeList.prototype.item = function(i){\n\t_updateLiveList(this);\n\treturn this[i];\n}\n\n_extends(LiveNodeList,NodeList);\n\n/**\n * Objects implementing the NamedNodeMap interface are used\n * to represent collections of nodes that can be accessed by name.\n * Note that NamedNodeMap does not inherit from NodeList;\n * NamedNodeMaps are not maintained in any particular order.\n * Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal index,\n * but this is simply to allow convenient enumeration of the contents of a NamedNodeMap,\n * and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities\n */\nfunction NamedNodeMap() {\n};\n\nfunction _findNodeIndex(list,node){\n\tvar i = list.length;\n\twhile(i--){\n\t\tif(list[i] === node){return i}\n\t}\n}\n\nfunction _addNamedNode(el,list,newAttr,oldAttr){\n\tif(oldAttr){\n\t\tlist[_findNodeIndex(list,oldAttr)] = newAttr;\n\t}else{\n\t\tlist[list.length++] = newAttr;\n\t}\n\tif(el){\n\t\tnewAttr.ownerElement = el;\n\t\tvar doc = el.ownerDocument;\n\t\tif(doc){\n\t\t\toldAttr && _onRemoveAttribute(doc,el,oldAttr);\n\t\t\t_onAddAttribute(doc,el,newAttr);\n\t\t}\n\t}\n}\nfunction _removeNamedNode(el,list,attr){\n\t//console.log('remove attr:'+attr)\n\tvar i = _findNodeIndex(list,attr);\n\tif(i>=0){\n\t\tvar lastIndex = list.length-1\n\t\twhile(i<lastIndex){\n\t\t\tlist[i] = list[++i]\n\t\t}\n\t\tlist.length = lastIndex;\n\t\tif(el){\n\t\t\tvar doc = el.ownerDocument;\n\t\t\tif(doc){\n\t\t\t\t_onRemoveAttribute(doc,el,attr);\n\t\t\t\tattr.ownerElement = null;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tthrow new DOMException(NOT_FOUND_ERR,new Error(el.tagName+'@'+attr))\n\t}\n}\nNamedNodeMap.prototype = {\n\tlength:0,\n\titem:NodeList.prototype.item,\n\tgetNamedItem: function(key) {\n//\t\tif(key.indexOf(':')>0 || key == 'xmlns'){\n//\t\t\treturn null;\n//\t\t}\n\t\t//console.log()\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar attr = this[i];\n\t\t\t//console.log(attr.nodeName,key)\n\t\t\tif(attr.nodeName == key){\n\t\t\t\treturn attr;\n\t\t\t}\n\t\t}\n\t},\n\tsetNamedItem: function(attr) {\n\t\tvar el = attr.ownerElement;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\tvar oldAttr = this.getNamedItem(attr.nodeName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\t/* returns Node */\n\tsetNamedItemNS: function(attr) {// raises: WRONG_DOCUMENT_ERR,NO_MODIFICATION_ALLOWED_ERR,INUSE_ATTRIBUTE_ERR\n\t\tvar el = attr.ownerElement, oldAttr;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\toldAttr = this.getNamedItemNS(attr.namespaceURI,attr.localName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\n\t/* returns Node */\n\tremoveNamedItem: function(key) {\n\t\tvar attr = this.getNamedItem(key);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\n\n\t},// raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR\n\n\t//for level2\n\tremoveNamedItemNS:function(namespaceURI,localName){\n\t\tvar attr = this.getNamedItemNS(namespaceURI,localName);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t},\n\tgetNamedItemNS: function(namespaceURI, localName) {\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar node = this[i];\n\t\t\tif(node.localName == localName && node.namespaceURI == namespaceURI){\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n};\n\n/**\n * The DOMImplementation interface represents an object providing methods\n * which are not dependent on any particular document.\n * Such an object is returned by the `Document.implementation` property.\n *\n * __The individual methods describe the differences compared to the specs.__\n *\n * @constructor\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation MDN\n * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490 DOM Level 1 Core (Initial)\n * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-102161490 DOM Level 2 Core\n * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-102161490 DOM Level 3 Core\n * @see https://dom.spec.whatwg.org/#domimplementation DOM Living Standard\n */\nfunction DOMImplementation() {\n}\n\nDOMImplementation.prototype = {\n\t/**\n\t * The DOMImplementation.hasFeature() method returns a Boolean flag indicating if a given feature is supported.\n\t * The different implementations fairly diverged in what kind of features were reported.\n\t * The latest version of the spec settled to force this method to always return true, where the functionality was accurate and in use.\n\t *\n\t * @deprecated It is deprecated and modern browsers return true in all cases.\n\t *\n\t * @param {string} feature\n\t * @param {string} [version]\n\t * @returns {boolean} always true\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/hasFeature MDN\n\t * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-5CED94D7 DOM Level 1 Core\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-hasfeature DOM Living Standard\n\t */\n\thasFeature: function(feature, version) {\n\t\t\treturn true;\n\t},\n\t/**\n\t * Creates an XML Document object of the specified type with its document element.\n\t *\n\t * __It behaves slightly different from the description in the living standard__:\n\t * - There is no interface/class `XMLDocument`, it returns a `Document` instance.\n\t * - `contentType`, `encoding`, `mode`, `origin`, `url` fields are currently not declared.\n\t * - this implementation is not validating names or qualified names\n\t *   (when parsing XML strings, the SAX parser takes care of that)\n\t *\n\t * @param {string|null} namespaceURI\n\t * @param {string} qualifiedName\n\t * @param {DocumentType=null} doctype\n\t * @returns {Document}\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocument MDN\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocument DOM Level 2 Core (initial)\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument  DOM Level 2 Core\n\t *\n\t * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n\t * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n\t * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n\t */\n\tcreateDocument: function(namespaceURI,  qualifiedName, doctype){\n\t\tvar doc = new Document();\n\t\tdoc.implementation = this;\n\t\tdoc.childNodes = new NodeList();\n\t\tdoc.doctype = doctype || null;\n\t\tif (doctype){\n\t\t\tdoc.appendChild(doctype);\n\t\t}\n\t\tif (qualifiedName){\n\t\t\tvar root = doc.createElementNS(namespaceURI, qualifiedName);\n\t\t\tdoc.appendChild(root);\n\t\t}\n\t\treturn doc;\n\t},\n\t/**\n\t * Returns a doctype, with the given `qualifiedName`, `publicId`, and `systemId`.\n\t *\n\t * __This behavior is slightly different from the in the specs__:\n\t * - this implementation is not validating names or qualified names\n\t *   (when parsing XML strings, the SAX parser takes care of that)\n\t *\n\t * @param {string} qualifiedName\n\t * @param {string} [publicId]\n\t * @param {string} [systemId]\n\t * @returns {DocumentType} which can either be used with `DOMImplementation.createDocument` upon document creation\n\t * \t\t\t\t  or can be put into the document via methods like `Node.insertBefore()` or `Node.replaceChild()`\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocumentType MDN\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocType DOM Level 2 Core\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocumenttype DOM Living Standard\n\t *\n\t * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n\t * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n\t * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n\t */\n\tcreateDocumentType: function(qualifiedName, publicId, systemId){\n\t\tvar node = new DocumentType();\n\t\tnode.name = qualifiedName;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.publicId = publicId || '';\n\t\tnode.systemId = systemId || '';\n\n\t\treturn node;\n\t}\n};\n\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n */\n\nfunction Node() {\n};\n\nNode.prototype = {\n\tfirstChild : null,\n\tlastChild : null,\n\tpreviousSibling : null,\n\tnextSibling : null,\n\tattributes : null,\n\tparentNode : null,\n\tchildNodes : null,\n\townerDocument : null,\n\tnodeValue : null,\n\tnamespaceURI : null,\n\tprefix : null,\n\tlocalName : null,\n\t// Modified in DOM Level 2:\n\tinsertBefore:function(newChild, refChild){//raises\n\t\treturn _insertBefore(this,newChild,refChild);\n\t},\n\treplaceChild:function(newChild, oldChild){//raises\n\t\t_insertBefore(this, newChild,oldChild, assertPreReplacementValidityInDocument);\n\t\tif(oldChild){\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t},\n\tremoveChild:function(oldChild){\n\t\treturn _removeChild(this,oldChild);\n\t},\n\tappendChild:function(newChild){\n\t\treturn this.insertBefore(newChild,null);\n\t},\n\thasChildNodes:function(){\n\t\treturn this.firstChild != null;\n\t},\n\tcloneNode:function(deep){\n\t\treturn cloneNode(this.ownerDocument||this,this,deep);\n\t},\n\t// Modified in DOM Level 2:\n\tnormalize:function(){\n\t\tvar child = this.firstChild;\n\t\twhile(child){\n\t\t\tvar next = child.nextSibling;\n\t\t\tif(next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE){\n\t\t\t\tthis.removeChild(next);\n\t\t\t\tchild.appendData(next.data);\n\t\t\t}else{\n\t\t\t\tchild.normalize();\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t}\n\t},\n  \t// Introduced in DOM Level 2:\n\tisSupported:function(feature, version){\n\t\treturn this.ownerDocument.implementation.hasFeature(feature,version);\n\t},\n    // Introduced in DOM Level 2:\n    hasAttributes:function(){\n    \treturn this.attributes.length>0;\n    },\n\t/**\n\t * Look up the prefix associated to the given namespace URI, starting from this node.\n\t * **The default namespace declarations are ignored by this method.**\n\t * See Namespace Prefix Lookup for details on the algorithm used by this method.\n\t *\n\t * _Note: The implementation seems to be incomplete when compared to the algorithm described in the specs._\n\t *\n\t * @param {string | null} namespaceURI\n\t * @returns {string | null}\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-lookupNamespacePrefix\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/namespaces-algorithms.html#lookupNamespacePrefixAlgo\n\t * @see https://dom.spec.whatwg.org/#dom-node-lookupprefix\n\t * @see https://github.com/xmldom/xmldom/issues/322\n\t */\n    lookupPrefix:function(namespaceURI){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tfor(var n in map){\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(map, n) && map[n] === namespaceURI) {\n\t\t\t\t\t\t\treturn n;\n\t\t\t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    lookupNamespaceURI:function(prefix){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tif(Object.prototype.hasOwnProperty.call(map, prefix)){\n    \t\t\t\treturn map[prefix] ;\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    isDefaultNamespace:function(namespaceURI){\n    \tvar prefix = this.lookupPrefix(namespaceURI);\n    \treturn prefix == null;\n    }\n};\n\n\nfunction _xmlEncoder(c){\n\treturn c == '<' && '&lt;' ||\n         c == '>' && '&gt;' ||\n         c == '&' && '&amp;' ||\n         c == '\"' && '&quot;' ||\n         '&#'+c.charCodeAt()+';'\n}\n\n\ncopy(NodeType,Node);\ncopy(NodeType,Node.prototype);\n\n/**\n * @param callback return true for continue,false for break\n * @return boolean true: break visit;\n */\nfunction _visitNode(node,callback){\n\tif(callback(node)){\n\t\treturn true;\n\t}\n\tif(node = node.firstChild){\n\t\tdo{\n\t\t\tif(_visitNode(node,callback)){return true}\n        }while(node=node.nextSibling)\n    }\n}\n\n\n\nfunction Document(){\n\tthis.ownerDocument = this;\n}\n\nfunction _onAddAttribute(doc,el,newAttr){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns === NAMESPACE.XMLNS){\n\t\t//update namespace\n\t\tel._nsMap[newAttr.prefix?newAttr.localName:''] = newAttr.value\n\t}\n}\n\nfunction _onRemoveAttribute(doc,el,newAttr,remove){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns === NAMESPACE.XMLNS){\n\t\t//update namespace\n\t\tdelete el._nsMap[newAttr.prefix?newAttr.localName:'']\n\t}\n}\n\n/**\n * Updates `el.childNodes`, updating the indexed items and it's `length`.\n * Passing `newChild` means it will be appended.\n * Otherwise it's assumed that an item has been removed,\n * and `el.firstNode` and it's `.nextSibling` are used\n * to walk the current list of child nodes.\n *\n * @param {Document} doc\n * @param {Node} el\n * @param {Node} [newChild]\n * @private\n */\nfunction _onUpdateChild (doc, el, newChild) {\n\tif(doc && doc._inc){\n\t\tdoc._inc++;\n\t\t//update childNodes\n\t\tvar cs = el.childNodes;\n\t\tif (newChild) {\n\t\t\tcs[cs.length++] = newChild;\n\t\t} else {\n\t\t\tvar child = el.firstChild;\n\t\t\tvar i = 0;\n\t\t\twhile (child) {\n\t\t\t\tcs[i++] = child;\n\t\t\t\tchild = child.nextSibling;\n\t\t\t}\n\t\t\tcs.length = i;\n\t\t\tdelete cs[cs.length];\n\t\t}\n\t}\n}\n\n/**\n * Removes the connections between `parentNode` and `child`\n * and any existing `child.previousSibling` or `child.nextSibling`.\n *\n * @see https://github.com/xmldom/xmldom/issues/135\n * @see https://github.com/xmldom/xmldom/issues/145\n *\n * @param {Node} parentNode\n * @param {Node} child\n * @returns {Node} the child that was removed.\n * @private\n */\nfunction _removeChild (parentNode, child) {\n\tvar previous = child.previousSibling;\n\tvar next = child.nextSibling;\n\tif (previous) {\n\t\tprevious.nextSibling = next;\n\t} else {\n\t\tparentNode.firstChild = next;\n\t}\n\tif (next) {\n\t\tnext.previousSibling = previous;\n\t} else {\n\t\tparentNode.lastChild = previous;\n\t}\n\tchild.parentNode = null;\n\tchild.previousSibling = null;\n\tchild.nextSibling = null;\n\t_onUpdateChild(parentNode.ownerDocument, parentNode);\n\treturn child;\n}\n\n/**\n * Returns `true` if `node` can be a parent for insertion.\n * @param {Node} node\n * @returns {boolean}\n */\nfunction hasValidParentNodeType(node) {\n\treturn (\n\t\tnode &&\n\t\t(node.nodeType === Node.DOCUMENT_NODE || node.nodeType === Node.DOCUMENT_FRAGMENT_NODE || node.nodeType === Node.ELEMENT_NODE)\n\t);\n}\n\n/**\n * Returns `true` if `node` can be inserted according to it's `nodeType`.\n * @param {Node} node\n * @returns {boolean}\n */\nfunction hasInsertableNodeType(node) {\n\treturn (\n\t\tnode &&\n\t\t(isElementNode(node) ||\n\t\t\tisTextNode(node) ||\n\t\t\tisDocTypeNode(node) ||\n\t\t\tnode.nodeType === Node.DOCUMENT_FRAGMENT_NODE ||\n\t\t\tnode.nodeType === Node.COMMENT_NODE ||\n\t\t\tnode.nodeType === Node.PROCESSING_INSTRUCTION_NODE)\n\t);\n}\n\n/**\n * Returns true if `node` is a DOCTYPE node\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isDocTypeNode(node) {\n\treturn node && node.nodeType === Node.DOCUMENT_TYPE_NODE;\n}\n\n/**\n * Returns true if the node is an element\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isElementNode(node) {\n\treturn node && node.nodeType === Node.ELEMENT_NODE;\n}\n/**\n * Returns true if `node` is a text node\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isTextNode(node) {\n\treturn node && node.nodeType === Node.TEXT_NODE;\n}\n\n/**\n * Check if en element node can be inserted before `child`, or at the end if child is falsy,\n * according to the presence and position of a doctype node on the same level.\n *\n * @param {Document} doc The document node\n * @param {Node} child the node that would become the nextSibling if the element would be inserted\n * @returns {boolean} `true` if an element can be inserted before child\n * @private\n * https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction isElementInsertionPossible(doc, child) {\n\tvar parentChildNodes = doc.childNodes || [];\n\tif (find(parentChildNodes, isElementNode) || isDocTypeNode(child)) {\n\t\treturn false;\n\t}\n\tvar docTypeNode = find(parentChildNodes, isDocTypeNode);\n\treturn !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));\n}\n\n/**\n * Check if en element node can be inserted before `child`, or at the end if child is falsy,\n * according to the presence and position of a doctype node on the same level.\n *\n * @param {Node} doc The document node\n * @param {Node} child the node that would become the nextSibling if the element would be inserted\n * @returns {boolean} `true` if an element can be inserted before child\n * @private\n * https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction isElementReplacementPossible(doc, child) {\n\tvar parentChildNodes = doc.childNodes || [];\n\n\tfunction hasElementChildThatIsNotChild(node) {\n\t\treturn isElementNode(node) && node !== child;\n\t}\n\n\tif (find(parentChildNodes, hasElementChildThatIsNotChild)) {\n\t\treturn false;\n\t}\n\tvar docTypeNode = find(parentChildNodes, isDocTypeNode);\n\treturn !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));\n}\n\n/**\n * @private\n * Steps 1-5 of the checks before inserting and before replacing a child are the same.\n *\n * @param {Node} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node=} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreInsertionValidity1to5(parent, node, child) {\n\t// 1. If `parent` is not a Document, DocumentFragment, or Element node, then throw a \"HierarchyRequestError\" DOMException.\n\tif (!hasValidParentNodeType(parent)) {\n\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Unexpected parent node type ' + parent.nodeType);\n\t}\n\t// 2. If `node` is a host-including inclusive ancestor of `parent`, then throw a \"HierarchyRequestError\" DOMException.\n\t// not implemented!\n\t// 3. If `child` is non-null and its parent is not `parent`, then throw a \"NotFoundError\" DOMException.\n\tif (child && child.parentNode !== parent) {\n\t\tthrow new DOMException(NOT_FOUND_ERR, 'child not in parent');\n\t}\n\tif (\n\t\t// 4. If `node` is not a DocumentFragment, DocumentType, Element, or CharacterData node, then throw a \"HierarchyRequestError\" DOMException.\n\t\t!hasInsertableNodeType(node) ||\n\t\t// 5. If either `node` is a Text node and `parent` is a document,\n\t\t// the sax parser currently adds top level text nodes, this will be fixed in 0.9.0\n\t\t// || (node.nodeType === Node.TEXT_NODE && parent.nodeType === Node.DOCUMENT_NODE)\n\t\t// or `node` is a doctype and `parent` is not a document, then throw a \"HierarchyRequestError\" DOMException.\n\t\t(isDocTypeNode(node) && parent.nodeType !== Node.DOCUMENT_NODE)\n\t) {\n\t\tthrow new DOMException(\n\t\t\tHIERARCHY_REQUEST_ERR,\n\t\t\t'Unexpected node type ' + node.nodeType + ' for parent node type ' + parent.nodeType\n\t\t);\n\t}\n}\n\n/**\n * @private\n * Step 6 of the checks before inserting and before replacing a child are different.\n *\n * @param {Document} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node | undefined} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreInsertionValidityInDocument(parent, node, child) {\n\tvar parentChildNodes = parent.childNodes || [];\n\tvar nodeChildNodes = node.childNodes || [];\n\n\t// DocumentFragment\n\tif (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n\t\tvar nodeChildElements = nodeChildNodes.filter(isElementNode);\n\t\t// If node has more than one element child or has a Text node child.\n\t\tif (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'More than one element or text in fragment');\n\t\t}\n\t\t// Otherwise, if `node` has one element child and either `parent` has an element child,\n\t\t// `child` is a doctype, or `child` is non-null and a doctype is following `child`.\n\t\tif (nodeChildElements.length === 1 && !isElementInsertionPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Element in fragment can not be inserted before doctype');\n\t\t}\n\t}\n\t// Element\n\tif (isElementNode(node)) {\n\t\t// `parent` has an element child, `child` is a doctype,\n\t\t// or `child` is non-null and a doctype is following `child`.\n\t\tif (!isElementInsertionPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one element can be added and only after doctype');\n\t\t}\n\t}\n\t// DocumentType\n\tif (isDocTypeNode(node)) {\n\t\t// `parent` has a doctype child,\n\t\tif (find(parentChildNodes, isDocTypeNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one doctype is allowed');\n\t\t}\n\t\tvar parentElementChild = find(parentChildNodes, isElementNode);\n\t\t// `child` is non-null and an element is preceding `child`,\n\t\tif (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can only be inserted before an element');\n\t\t}\n\t\t// or `child` is null and `parent` has an element child.\n\t\tif (!child && parentElementChild) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can not be appended since element is present');\n\t\t}\n\t}\n}\n\n/**\n * @private\n * Step 6 of the checks before inserting and before replacing a child are different.\n *\n * @param {Document} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node | undefined} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreReplacementValidityInDocument(parent, node, child) {\n\tvar parentChildNodes = parent.childNodes || [];\n\tvar nodeChildNodes = node.childNodes || [];\n\n\t// DocumentFragment\n\tif (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n\t\tvar nodeChildElements = nodeChildNodes.filter(isElementNode);\n\t\t// If `node` has more than one element child or has a Text node child.\n\t\tif (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'More than one element or text in fragment');\n\t\t}\n\t\t// Otherwise, if `node` has one element child and either `parent` has an element child that is not `child` or a doctype is following `child`.\n\t\tif (nodeChildElements.length === 1 && !isElementReplacementPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Element in fragment can not be inserted before doctype');\n\t\t}\n\t}\n\t// Element\n\tif (isElementNode(node)) {\n\t\t// `parent` has an element child that is not `child` or a doctype is following `child`.\n\t\tif (!isElementReplacementPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one element can be added and only after doctype');\n\t\t}\n\t}\n\t// DocumentType\n\tif (isDocTypeNode(node)) {\n\t\tfunction hasDoctypeChildThatIsNotChild(node) {\n\t\t\treturn isDocTypeNode(node) && node !== child;\n\t\t}\n\n\t\t// `parent` has a doctype child that is not `child`,\n\t\tif (find(parentChildNodes, hasDoctypeChildThatIsNotChild)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one doctype is allowed');\n\t\t}\n\t\tvar parentElementChild = find(parentChildNodes, isElementNode);\n\t\t// or an element is preceding `child`.\n\t\tif (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can only be inserted before an element');\n\t\t}\n\t}\n}\n\n/**\n * @private\n * @param {Node} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node=} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction _insertBefore(parent, node, child, _inDocumentAssertion) {\n\t// To ensure pre-insertion validity of a node into a parent before a child, run these steps:\n\tassertPreInsertionValidity1to5(parent, node, child);\n\n\t// If parent is a document, and any of the statements below, switched on the interface node implements,\n\t// are true, then throw a \"HierarchyRequestError\" DOMException.\n\tif (parent.nodeType === Node.DOCUMENT_NODE) {\n\t\t(_inDocumentAssertion || assertPreInsertionValidityInDocument)(parent, node, child);\n\t}\n\n\tvar cp = node.parentNode;\n\tif(cp){\n\t\tcp.removeChild(node);//remove and update\n\t}\n\tif(node.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\tvar newFirst = node.firstChild;\n\t\tif (newFirst == null) {\n\t\t\treturn node;\n\t\t}\n\t\tvar newLast = node.lastChild;\n\t}else{\n\t\tnewFirst = newLast = node;\n\t}\n\tvar pre = child ? child.previousSibling : parent.lastChild;\n\n\tnewFirst.previousSibling = pre;\n\tnewLast.nextSibling = child;\n\n\n\tif(pre){\n\t\tpre.nextSibling = newFirst;\n\t}else{\n\t\tparent.firstChild = newFirst;\n\t}\n\tif(child == null){\n\t\tparent.lastChild = newLast;\n\t}else{\n\t\tchild.previousSibling = newLast;\n\t}\n\tdo{\n\t\tnewFirst.parentNode = parent;\n\t}while(newFirst !== newLast && (newFirst= newFirst.nextSibling))\n\t_onUpdateChild(parent.ownerDocument||parent, parent);\n\t//console.log(parent.lastChild.nextSibling == null)\n\tif (node.nodeType == DOCUMENT_FRAGMENT_NODE) {\n\t\tnode.firstChild = node.lastChild = null;\n\t}\n\treturn node;\n}\n\n/**\n * Appends `newChild` to `parentNode`.\n * If `newChild` is already connected to a `parentNode` it is first removed from it.\n *\n * @see https://github.com/xmldom/xmldom/issues/135\n * @see https://github.com/xmldom/xmldom/issues/145\n * @param {Node} parentNode\n * @param {Node} newChild\n * @returns {Node}\n * @private\n */\nfunction _appendSingleChild (parentNode, newChild) {\n\tif (newChild.parentNode) {\n\t\tnewChild.parentNode.removeChild(newChild);\n\t}\n\tnewChild.parentNode = parentNode;\n\tnewChild.previousSibling = parentNode.lastChild;\n\tnewChild.nextSibling = null;\n\tif (newChild.previousSibling) {\n\t\tnewChild.previousSibling.nextSibling = newChild;\n\t} else {\n\t\tparentNode.firstChild = newChild;\n\t}\n\tparentNode.lastChild = newChild;\n\t_onUpdateChild(parentNode.ownerDocument, parentNode, newChild);\n\treturn newChild;\n}\n\nDocument.prototype = {\n\t//implementation : null,\n\tnodeName :  '#document',\n\tnodeType :  DOCUMENT_NODE,\n\t/**\n\t * The DocumentType node of the document.\n\t *\n\t * @readonly\n\t * @type DocumentType\n\t */\n\tdoctype :  null,\n\tdocumentElement :  null,\n\t_inc : 1,\n\n\tinsertBefore :  function(newChild, refChild){//raises\n\t\tif(newChild.nodeType == DOCUMENT_FRAGMENT_NODE){\n\t\t\tvar child = newChild.firstChild;\n\t\t\twhile(child){\n\t\t\t\tvar next = child.nextSibling;\n\t\t\t\tthis.insertBefore(child,refChild);\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t\treturn newChild;\n\t\t}\n\t\t_insertBefore(this, newChild, refChild);\n\t\tnewChild.ownerDocument = this;\n\t\tif (this.documentElement === null && newChild.nodeType === ELEMENT_NODE) {\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\n\t\treturn newChild;\n\t},\n\tremoveChild :  function(oldChild){\n\t\tif(this.documentElement == oldChild){\n\t\t\tthis.documentElement = null;\n\t\t}\n\t\treturn _removeChild(this,oldChild);\n\t},\n\treplaceChild: function (newChild, oldChild) {\n\t\t//raises\n\t\t_insertBefore(this, newChild, oldChild, assertPreReplacementValidityInDocument);\n\t\tnewChild.ownerDocument = this;\n\t\tif (oldChild) {\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t\tif (isElementNode(newChild)) {\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\t},\n\t// Introduced in DOM Level 2:\n\timportNode : function(importedNode,deep){\n\t\treturn importNode(this,importedNode,deep);\n\t},\n\t// Introduced in DOM Level 2:\n\tgetElementById :\tfunction(id){\n\t\tvar rtv = null;\n\t\t_visitNode(this.documentElement,function(node){\n\t\t\tif(node.nodeType == ELEMENT_NODE){\n\t\t\t\tif(node.getAttribute('id') == id){\n\t\t\t\t\trtv = node;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn rtv;\n\t},\n\n\t/**\n\t * The `getElementsByClassName` method of `Document` interface returns an array-like object\n\t * of all child elements which have **all** of the given class name(s).\n\t *\n\t * Returns an empty list if `classeNames` is an empty string or only contains HTML white space characters.\n\t *\n\t *\n\t * Warning: This is a live LiveNodeList.\n\t * Changes in the DOM will reflect in the array as the changes occur.\n\t * If an element selected by this array no longer qualifies for the selector,\n\t * it will automatically be removed. Be aware of this for iteration purposes.\n\t *\n\t * @param {string} classNames is a string representing the class name(s) to match; multiple class names are separated by (ASCII-)whitespace\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName\n\t * @see https://dom.spec.whatwg.org/#concept-getelementsbyclassname\n\t */\n\tgetElementsByClassName: function(classNames) {\n\t\tvar classNamesSet = toOrderedSet(classNames)\n\t\treturn new LiveNodeList(this, function(base) {\n\t\t\tvar ls = [];\n\t\t\tif (classNamesSet.length > 0) {\n\t\t\t\t_visitNode(base.documentElement, function(node) {\n\t\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE) {\n\t\t\t\t\t\tvar nodeClassNames = node.getAttribute('class')\n\t\t\t\t\t\t// can be null if the attribute does not exist\n\t\t\t\t\t\tif (nodeClassNames) {\n\t\t\t\t\t\t\t// before splitting and iterating just compare them for the most common case\n\t\t\t\t\t\t\tvar matches = classNames === nodeClassNames;\n\t\t\t\t\t\t\tif (!matches) {\n\t\t\t\t\t\t\t\tvar nodeClassNamesSet = toOrderedSet(nodeClassNames)\n\t\t\t\t\t\t\t\tmatches = classNamesSet.every(arrayIncludes(nodeClassNamesSet))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(matches) {\n\t\t\t\t\t\t\t\tls.push(node);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn ls;\n\t\t});\n\t},\n\n\t//document factory method:\n\tcreateElement :\tfunction(tagName){\n\t\tvar node = new Element();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = tagName;\n\t\tnode.tagName = tagName;\n\t\tnode.localName = tagName;\n\t\tnode.childNodes = new NodeList();\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\tcreateDocumentFragment :\tfunction(){\n\t\tvar node = new DocumentFragment();\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\treturn node;\n\t},\n\tcreateTextNode :\tfunction(data){\n\t\tvar node = new Text();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateComment :\tfunction(data){\n\t\tvar node = new Comment();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateCDATASection :\tfunction(data){\n\t\tvar node = new CDATASection();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateProcessingInstruction :\tfunction(target,data){\n\t\tvar node = new ProcessingInstruction();\n\t\tnode.ownerDocument = this;\n\t\tnode.tagName = node.target = target;\n\t\tnode.nodeValue= node.data = data;\n\t\treturn node;\n\t},\n\tcreateAttribute :\tfunction(name){\n\t\tvar node = new Attr();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.name = name;\n\t\tnode.nodeName\t= name;\n\t\tnode.localName = name;\n\t\tnode.specified = true;\n\t\treturn node;\n\t},\n\tcreateEntityReference :\tfunction(name){\n\t\tvar node = new EntityReference();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.nodeName\t= name;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateElementNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Element();\n\t\tvar pl = qualifiedName.split(':');\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tnode.childNodes = new NodeList();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.tagName = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateAttributeNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Attr();\n\t\tvar pl = qualifiedName.split(':');\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.name = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tnode.specified = true;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\treturn node;\n\t}\n};\n_extends(Document,Node);\n\n\nfunction Element() {\n\tthis._nsMap = {};\n};\nElement.prototype = {\n\tnodeType : ELEMENT_NODE,\n\thasAttribute : function(name){\n\t\treturn this.getAttributeNode(name)!=null;\n\t},\n\tgetAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name);\n\t\treturn attr && attr.value || '';\n\t},\n\tgetAttributeNode : function(name){\n\t\treturn this.attributes.getNamedItem(name);\n\t},\n\tsetAttribute : function(name, value){\n\t\tvar attr = this.ownerDocument.createAttribute(name);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tremoveAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name)\n\t\tattr && this.removeAttributeNode(attr);\n\t},\n\n\t//four real opeartion method\n\tappendChild:function(newChild){\n\t\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\t\treturn this.insertBefore(newChild,null);\n\t\t}else{\n\t\t\treturn _appendSingleChild(this,newChild);\n\t\t}\n\t},\n\tsetAttributeNode : function(newAttr){\n\t\treturn this.attributes.setNamedItem(newAttr);\n\t},\n\tsetAttributeNodeNS : function(newAttr){\n\t\treturn this.attributes.setNamedItemNS(newAttr);\n\t},\n\tremoveAttributeNode : function(oldAttr){\n\t\t//console.log(this == oldAttr.ownerElement)\n\t\treturn this.attributes.removeNamedItem(oldAttr.nodeName);\n\t},\n\t//get real attribute name,and remove it by removeAttributeNode\n\tremoveAttributeNS : function(namespaceURI, localName){\n\t\tvar old = this.getAttributeNodeNS(namespaceURI, localName);\n\t\told && this.removeAttributeNode(old);\n\t},\n\n\thasAttributeNS : function(namespaceURI, localName){\n\t\treturn this.getAttributeNodeNS(namespaceURI, localName)!=null;\n\t},\n\tgetAttributeNS : function(namespaceURI, localName){\n\t\tvar attr = this.getAttributeNodeNS(namespaceURI, localName);\n\t\treturn attr && attr.value || '';\n\t},\n\tsetAttributeNS : function(namespaceURI, qualifiedName, value){\n\t\tvar attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tgetAttributeNodeNS : function(namespaceURI, localName){\n\t\treturn this.attributes.getNamedItemNS(namespaceURI, localName);\n\t},\n\n\tgetElementsByTagName : function(tagName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType == ELEMENT_NODE && (tagName === '*' || node.tagName == tagName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t},\n\tgetElementsByTagNameNS : function(namespaceURI, localName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE && (namespaceURI === '*' || node.namespaceURI === namespaceURI) && (localName === '*' || node.localName == localName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\n\t\t});\n\t}\n};\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n\n_extends(Element,Node);\nfunction Attr() {\n};\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n_extends(Attr,Node);\n\n\nfunction CharacterData() {\n};\nCharacterData.prototype = {\n\tdata : '',\n\tsubstringData : function(offset, count) {\n\t\treturn this.data.substring(offset, offset+count);\n\t},\n\tappendData: function(text) {\n\t\ttext = this.data+text;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t},\n\tinsertData: function(offset,text) {\n\t\tthis.replaceData(offset,0,text);\n\n\t},\n\tappendChild:function(newChild){\n\t\tthrow new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])\n\t},\n\tdeleteData: function(offset, count) {\n\t\tthis.replaceData(offset,count,\"\");\n\t},\n\treplaceData: function(offset, count, text) {\n\t\tvar start = this.data.substring(0,offset);\n\t\tvar end = this.data.substring(offset+count);\n\t\ttext = start + text + end;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t}\n}\n_extends(CharacterData,Node);\nfunction Text() {\n};\nText.prototype = {\n\tnodeName : \"#text\",\n\tnodeType : TEXT_NODE,\n\tsplitText : function(offset) {\n\t\tvar text = this.data;\n\t\tvar newText = text.substring(offset);\n\t\ttext = text.substring(0, offset);\n\t\tthis.data = this.nodeValue = text;\n\t\tthis.length = text.length;\n\t\tvar newNode = this.ownerDocument.createTextNode(newText);\n\t\tif(this.parentNode){\n\t\t\tthis.parentNode.insertBefore(newNode, this.nextSibling);\n\t\t}\n\t\treturn newNode;\n\t}\n}\n_extends(Text,CharacterData);\nfunction Comment() {\n};\nComment.prototype = {\n\tnodeName : \"#comment\",\n\tnodeType : COMMENT_NODE\n}\n_extends(Comment,CharacterData);\n\nfunction CDATASection() {\n};\nCDATASection.prototype = {\n\tnodeName : \"#cdata-section\",\n\tnodeType : CDATA_SECTION_NODE\n}\n_extends(CDATASection,CharacterData);\n\n\nfunction DocumentType() {\n};\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n_extends(DocumentType,Node);\n\nfunction Notation() {\n};\nNotation.prototype.nodeType = NOTATION_NODE;\n_extends(Notation,Node);\n\nfunction Entity() {\n};\nEntity.prototype.nodeType = ENTITY_NODE;\n_extends(Entity,Node);\n\nfunction EntityReference() {\n};\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n_extends(EntityReference,Node);\n\nfunction DocumentFragment() {\n};\nDocumentFragment.prototype.nodeName =\t\"#document-fragment\";\nDocumentFragment.prototype.nodeType =\tDOCUMENT_FRAGMENT_NODE;\n_extends(DocumentFragment,Node);\n\n\nfunction ProcessingInstruction() {\n}\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n_extends(ProcessingInstruction,Node);\nfunction XMLSerializer(){}\nXMLSerializer.prototype.serializeToString = function(node,isHtml,nodeFilter){\n\treturn nodeSerializeToString.call(node,isHtml,nodeFilter);\n}\nNode.prototype.toString = nodeSerializeToString;\nfunction nodeSerializeToString(isHtml,nodeFilter){\n\tvar buf = [];\n\tvar refNode = this.nodeType == 9 && this.documentElement || this;\n\tvar prefix = refNode.prefix;\n\tvar uri = refNode.namespaceURI;\n\n\tif(uri && prefix == null){\n\t\t//console.log(prefix)\n\t\tvar prefix = refNode.lookupPrefix(uri);\n\t\tif(prefix == null){\n\t\t\t//isHTML = true;\n\t\t\tvar visibleNamespaces=[\n\t\t\t{namespace:uri,prefix:null}\n\t\t\t//{namespace:uri,prefix:''}\n\t\t\t]\n\t\t}\n\t}\n\tserializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces);\n\t//console.log('###',this.nodeType,uri,prefix,buf.join(''))\n\treturn buf.join('');\n}\n\nfunction needNamespaceDefine(node, isHTML, visibleNamespaces) {\n\tvar prefix = node.prefix || '';\n\tvar uri = node.namespaceURI;\n\t// According to [Namespaces in XML 1.0](https://www.w3.org/TR/REC-xml-names/#ns-using) ,\n\t// and more specifically https://www.w3.org/TR/REC-xml-names/#nsc-NoPrefixUndecl :\n\t// > In a namespace declaration for a prefix [...], the attribute value MUST NOT be empty.\n\t// in a similar manner [Namespaces in XML 1.1](https://www.w3.org/TR/xml-names11/#ns-using)\n\t// and more specifically https://www.w3.org/TR/xml-names11/#nsc-NSDeclared :\n\t// > [...] Furthermore, the attribute value [...] must not be an empty string.\n\t// so serializing empty namespace value like xmlns:ds=\"\" would produce an invalid XML document.\n\tif (!uri) {\n\t\treturn false;\n\t}\n\tif (prefix === \"xml\" && uri === NAMESPACE.XML || uri === NAMESPACE.XMLNS) {\n\t\treturn false;\n\t}\n\n\tvar i = visibleNamespaces.length\n\twhile (i--) {\n\t\tvar ns = visibleNamespaces[i];\n\t\t// get namespace prefix\n\t\tif (ns.prefix === prefix) {\n\t\t\treturn ns.namespace !== uri;\n\t\t}\n\t}\n\treturn true;\n}\n/**\n * Well-formed constraint: No < in Attribute Values\n * > The replacement text of any entity referred to directly or indirectly\n * > in an attribute value must not contain a <.\n * @see https://www.w3.org/TR/xml11/#CleanAttrVals\n * @see https://www.w3.org/TR/xml11/#NT-AttValue\n *\n * Literal whitespace other than space that appear in attribute values\n * are serialized as their entity references, so they will be preserved.\n * (In contrast to whitespace literals in the input which are normalized to spaces)\n * @see https://www.w3.org/TR/xml11/#AVNormalize\n * @see https://w3c.github.io/DOM-Parsing/#serializing-an-element-s-attributes\n */\nfunction addSerializedAttribute(buf, qualifiedName, value) {\n\tbuf.push(' ', qualifiedName, '=\"', value.replace(/[<>&\"\\t\\n\\r]/g, _xmlEncoder), '\"')\n}\n\nfunction serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){\n\tif (!visibleNamespaces) {\n\t\tvisibleNamespaces = [];\n\t}\n\n\tif(nodeFilter){\n\t\tnode = nodeFilter(node);\n\t\tif(node){\n\t\t\tif(typeof node == 'string'){\n\t\t\t\tbuf.push(node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}else{\n\t\t\treturn;\n\t\t}\n\t\t//buf.sort.apply(attrs, attributeSorter);\n\t}\n\n\tswitch(node.nodeType){\n\tcase ELEMENT_NODE:\n\t\tvar attrs = node.attributes;\n\t\tvar len = attrs.length;\n\t\tvar child = node.firstChild;\n\t\tvar nodeName = node.tagName;\n\n\t\tisHTML = NAMESPACE.isHTML(node.namespaceURI) || isHTML\n\n\t\tvar prefixedNodeName = nodeName\n\t\tif (!isHTML && !node.prefix && node.namespaceURI) {\n\t\t\tvar defaultNS\n\t\t\t// lookup current default ns from `xmlns` attribute\n\t\t\tfor (var ai = 0; ai < attrs.length; ai++) {\n\t\t\t\tif (attrs.item(ai).name === 'xmlns') {\n\t\t\t\t\tdefaultNS = attrs.item(ai).value\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!defaultNS) {\n\t\t\t\t// lookup current default ns in visibleNamespaces\n\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\tvar namespace = visibleNamespaces[nsi]\n\t\t\t\t\tif (namespace.prefix === '' && namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\tdefaultNS = namespace.namespace\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (defaultNS !== node.namespaceURI) {\n\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\tvar namespace = visibleNamespaces[nsi]\n\t\t\t\t\tif (namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\tif (namespace.prefix) {\n\t\t\t\t\t\t\tprefixedNodeName = namespace.prefix + ':' + nodeName\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tbuf.push('<', prefixedNodeName);\n\n\t\tfor(var i=0;i<len;i++){\n\t\t\t// add namespaces for attributes\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (attr.prefix == 'xmlns') {\n\t\t\t\tvisibleNamespaces.push({ prefix: attr.localName, namespace: attr.value });\n\t\t\t}else if(attr.nodeName == 'xmlns'){\n\t\t\t\tvisibleNamespaces.push({ prefix: '', namespace: attr.value });\n\t\t\t}\n\t\t}\n\n\t\tfor(var i=0;i<len;i++){\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (needNamespaceDefine(attr,isHTML, visibleNamespaces)) {\n\t\t\t\tvar prefix = attr.prefix||'';\n\t\t\t\tvar uri = attr.namespaceURI;\n\t\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n\t\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t\t}\n\t\t\tserializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t}\n\n\t\t// add namespace for current node\n\t\tif (nodeName === prefixedNodeName && needNamespaceDefine(node, isHTML, visibleNamespaces)) {\n\t\t\tvar prefix = node.prefix||'';\n\t\t\tvar uri = node.namespaceURI;\n\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t}\n\n\t\tif(child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){\n\t\t\tbuf.push('>');\n\t\t\t//if is cdata child node\n\t\t\tif(isHTML && /^script$/i.test(nodeName)){\n\t\t\t\twhile(child){\n\t\t\t\t\tif(child.data){\n\t\t\t\t\t\tbuf.push(child.data);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\t}\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}else\n\t\t\t{\n\t\t\t\twhile(child){\n\t\t\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbuf.push('</',prefixedNodeName,'>');\n\t\t}else{\n\t\t\tbuf.push('/>');\n\t\t}\n\t\t// remove added visible namespaces\n\t\t//visibleNamespaces.length = startVisibleNamespaces;\n\t\treturn;\n\tcase DOCUMENT_NODE:\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t\treturn;\n\tcase ATTRIBUTE_NODE:\n\t\treturn addSerializedAttribute(buf, node.name, node.value);\n\tcase TEXT_NODE:\n\t\t/**\n\t\t * The ampersand character (&) and the left angle bracket (<) must not appear in their literal form,\n\t\t * except when used as markup delimiters, or within a comment, a processing instruction, or a CDATA section.\n\t\t * If they are needed elsewhere, they must be escaped using either numeric character references or the strings\n\t\t * `&amp;` and `&lt;` respectively.\n\t\t * The right angle bracket (>) may be represented using the string \" &gt; \", and must, for compatibility,\n\t\t * be escaped using either `&gt;` or a character reference when it appears in the string `]]>` in content,\n\t\t * when that string is not marking the end of a CDATA section.\n\t\t *\n\t\t * In the content of elements, character data is any string of characters\n\t\t * which does not contain the start-delimiter of any markup\n\t\t * and does not include the CDATA-section-close delimiter, `]]>`.\n\t\t *\n\t\t * @see https://www.w3.org/TR/xml/#NT-CharData\n\t\t * @see https://w3c.github.io/DOM-Parsing/#xml-serializing-a-text-node\n\t\t */\n\t\treturn buf.push(node.data\n\t\t\t.replace(/[<&>]/g,_xmlEncoder)\n\t\t);\n\tcase CDATA_SECTION_NODE:\n\t\treturn buf.push( '<![CDATA[',node.data,']]>');\n\tcase COMMENT_NODE:\n\t\treturn buf.push( \"<!--\",node.data,\"-->\");\n\tcase DOCUMENT_TYPE_NODE:\n\t\tvar pubid = node.publicId;\n\t\tvar sysid = node.systemId;\n\t\tbuf.push('<!DOCTYPE ',node.name);\n\t\tif(pubid){\n\t\t\tbuf.push(' PUBLIC ', pubid);\n\t\t\tif (sysid && sysid!='.') {\n\t\t\t\tbuf.push(' ', sysid);\n\t\t\t}\n\t\t\tbuf.push('>');\n\t\t}else if(sysid && sysid!='.'){\n\t\t\tbuf.push(' SYSTEM ', sysid, '>');\n\t\t}else{\n\t\t\tvar sub = node.internalSubset;\n\t\t\tif(sub){\n\t\t\t\tbuf.push(\" [\",sub,\"]\");\n\t\t\t}\n\t\t\tbuf.push(\">\");\n\t\t}\n\t\treturn;\n\tcase PROCESSING_INSTRUCTION_NODE:\n\t\treturn buf.push( \"<?\",node.target,\" \",node.data,\"?>\");\n\tcase ENTITY_REFERENCE_NODE:\n\t\treturn buf.push( '&',node.nodeName,';');\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE:\n\tdefault:\n\t\tbuf.push('??',node.nodeName);\n\t}\n}\nfunction importNode(doc,node,deep){\n\tvar node2;\n\tswitch (node.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tnode2 = node.cloneNode(false);\n\t\tnode2.ownerDocument = doc;\n\t\t//var attrs = node2.attributes;\n\t\t//var len = attrs.length;\n\t\t//for(var i=0;i<len;i++){\n\t\t\t//node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n\t\t//}\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tbreak;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t\tbreak;\n\t//case ENTITY_REFERENCE_NODE:\n\t//case PROCESSING_INSTRUCTION_NODE:\n\t////case TEXT_NODE:\n\t//case CDATA_SECTION_NODE:\n\t//case COMMENT_NODE:\n\t//\tdeep = false;\n\t//\tbreak;\n\t//case DOCUMENT_NODE:\n\t//case DOCUMENT_TYPE_NODE:\n\t//cannot be imported.\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE\n\t//can not hit in level3\n\t//default:throw e;\n\t}\n\tif(!node2){\n\t\tnode2 = node.cloneNode(false);//false\n\t}\n\tnode2.ownerDocument = doc;\n\tnode2.parentNode = null;\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(importNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n//\n//var _relationMap = {firstChild:1,lastChild:1,previousSibling:1,nextSibling:1,\n//\t\t\t\t\tattributes:1,childNodes:1,parentNode:1,documentElement:1,doctype,};\nfunction cloneNode(doc,node,deep){\n\tvar node2 = new node.constructor();\n\tfor (var n in node) {\n\t\tif (Object.prototype.hasOwnProperty.call(node, n)) {\n\t\t\tvar v = node[n];\n\t\t\tif (typeof v != \"object\") {\n\t\t\t\tif (v != node2[n]) {\n\t\t\t\t\tnode2[n] = v;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif(node.childNodes){\n\t\tnode2.childNodes = new NodeList();\n\t}\n\tnode2.ownerDocument = doc;\n\tswitch (node2.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tvar attrs\t= node.attributes;\n\t\tvar attrs2\t= node2.attributes = new NamedNodeMap();\n\t\tvar len = attrs.length\n\t\tattrs2._ownerElement = node2;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tnode2.setAttributeNode(cloneNode(doc,attrs.item(i),true));\n\t\t}\n\t\tbreak;;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t}\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(cloneNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n\nfunction __set__(object,key,value){\n\tobject[key] = value\n}\n//do dynamic\ntry{\n\tif(Object.defineProperty){\n\t\tObject.defineProperty(LiveNodeList.prototype,'length',{\n\t\t\tget:function(){\n\t\t\t\t_updateLiveList(this);\n\t\t\t\treturn this.$$length;\n\t\t\t}\n\t\t});\n\n\t\tObject.defineProperty(Node.prototype,'textContent',{\n\t\t\tget:function(){\n\t\t\t\treturn getTextContent(this);\n\t\t\t},\n\n\t\t\tset:function(data){\n\t\t\t\tswitch(this.nodeType){\n\t\t\t\tcase ELEMENT_NODE:\n\t\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\t\twhile(this.firstChild){\n\t\t\t\t\t\tthis.removeChild(this.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tif(data || String(data)){\n\t\t\t\t\t\tthis.appendChild(this.ownerDocument.createTextNode(data));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.data = data;\n\t\t\t\t\tthis.value = data;\n\t\t\t\t\tthis.nodeValue = data;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tfunction getTextContent(node){\n\t\t\tswitch(node.nodeType){\n\t\t\tcase ELEMENT_NODE:\n\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\tvar buf = [];\n\t\t\t\tnode = node.firstChild;\n\t\t\t\twhile(node){\n\t\t\t\t\tif(node.nodeType!==7 && node.nodeType !==8){\n\t\t\t\t\t\tbuf.push(getTextContent(node));\n\t\t\t\t\t}\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t}\n\t\t\t\treturn buf.join('');\n\t\t\tdefault:\n\t\t\t\treturn node.nodeValue;\n\t\t\t}\n\t\t}\n\n\t\t__set__ = function(object,key,value){\n\t\t\t//console.log(value)\n\t\t\tobject['$$'+key] = value\n\t\t}\n\t}\n}catch(e){//ie8\n}\n\n//if(typeof require == 'function'){\n\texports.DocumentType = DocumentType;\n\texports.DOMException = DOMException;\n\texports.DOMImplementation = DOMImplementation;\n\texports.Element = Element;\n\texports.Node = Node;\n\texports.NodeList = NodeList;\n\texports.XMLSerializer = XMLSerializer;\n//}\n","var freeze = require('./conventions').freeze;\n\n/**\n * The entities that are predefined in every XML document.\n *\n * @see https://www.w3.org/TR/2006/REC-xml11-20060816/#sec-predefined-ent W3C XML 1.1\n * @see https://www.w3.org/TR/2008/REC-xml-20081126/#sec-predefined-ent W3C XML 1.0\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML Wikipedia\n */\nexports.XML_ENTITIES = freeze({amp:'&', apos:\"'\", gt:'>', lt:'<', quot:'\"'})\n\n/**\n * A map of currently 241 entities that are detected in an HTML document.\n * They contain all entries from `XML_ENTITIES`.\n *\n * @see XML_ENTITIES\n * @see DOMParser.parseFromString\n * @see DOMImplementation.prototype.createHTMLDocument\n * @see https://html.spec.whatwg.org/#named-character-references WHATWG HTML(5) Spec\n * @see https://www.w3.org/TR/xml-entity-names/ W3C XML Entity Names\n * @see https://www.w3.org/TR/html4/sgml/entities.html W3C HTML4/SGML\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Character_entity_references_in_HTML Wikipedia (HTML)\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Entities_representing_special_characters_in_XHTML Wikpedia (XHTML)\n */\nexports.HTML_ENTITIES = freeze({\n       lt: '<',\n       gt: '>',\n       amp: '&',\n       quot: '\"',\n       apos: \"'\",\n       Agrave: \"\",\n       Aacute: \"\",\n       Acirc: \"\",\n       Atilde: \"\",\n       Auml: \"\",\n       Aring: \"\",\n       AElig: \"\",\n       Ccedil: \"\",\n       Egrave: \"\",\n       Eacute: \"\",\n       Ecirc: \"\",\n       Euml: \"\",\n       Igrave: \"\",\n       Iacute: \"\",\n       Icirc: \"\",\n       Iuml: \"\",\n       ETH: \"\",\n       Ntilde: \"\",\n       Ograve: \"\",\n       Oacute: \"\",\n       Ocirc: \"\",\n       Otilde: \"\",\n       Ouml: \"\",\n       Oslash: \"\",\n       Ugrave: \"\",\n       Uacute: \"\",\n       Ucirc: \"\",\n       Uuml: \"\",\n       Yacute: \"\",\n       THORN: \"\",\n       szlig: \"\",\n       agrave: \"\",\n       aacute: \"\",\n       acirc: \"\",\n       atilde: \"\",\n       auml: \"\",\n       aring: \"\",\n       aelig: \"\",\n       ccedil: \"\",\n       egrave: \"\",\n       eacute: \"\",\n       ecirc: \"\",\n       euml: \"\",\n       igrave: \"\",\n       iacute: \"\",\n       icirc: \"\",\n       iuml: \"\",\n       eth: \"\",\n       ntilde: \"\",\n       ograve: \"\",\n       oacute: \"\",\n       ocirc: \"\",\n       otilde: \"\",\n       ouml: \"\",\n       oslash: \"\",\n       ugrave: \"\",\n       uacute: \"\",\n       ucirc: \"\",\n       uuml: \"\",\n       yacute: \"\",\n       thorn: \"\",\n       yuml: \"\",\n       nbsp: \"\\u00a0\",\n       iexcl: \"\",\n       cent: \"\",\n       pound: \"\",\n       curren: \"\",\n       yen: \"\",\n       brvbar: \"\",\n       sect: \"\",\n       uml: \"\",\n       copy: \"\",\n       ordf: \"\",\n       laquo: \"\",\n       not: \"\",\n       shy: \"\",\n       reg: \"\",\n       macr: \"\",\n       deg: \"\",\n       plusmn: \"\",\n       sup2: \"\",\n       sup3: \"\",\n       acute: \"\",\n       micro: \"\",\n       para: \"\",\n       middot: \"\",\n       cedil: \"\",\n       sup1: \"\",\n       ordm: \"\",\n       raquo: \"\",\n       frac14: \"\",\n       frac12: \"\",\n       frac34: \"\",\n       iquest: \"\",\n       times: \"\",\n       divide: \"\",\n       forall: \"\",\n       part: \"\",\n       exist: \"\",\n       empty: \"\",\n       nabla: \"\",\n       isin: \"\",\n       notin: \"\",\n       ni: \"\",\n       prod: \"\",\n       sum: \"\",\n       minus: \"\",\n       lowast: \"\",\n       radic: \"\",\n       prop: \"\",\n       infin: \"\",\n       ang: \"\",\n       and: \"\",\n       or: \"\",\n       cap: \"\",\n       cup: \"\",\n       'int': \"\",\n       there4: \"\",\n       sim: \"\",\n       cong: \"\",\n       asymp: \"\",\n       ne: \"\",\n       equiv: \"\",\n       le: \"\",\n       ge: \"\",\n       sub: \"\",\n       sup: \"\",\n       nsub: \"\",\n       sube: \"\",\n       supe: \"\",\n       oplus: \"\",\n       otimes: \"\",\n       perp: \"\",\n       sdot: \"\",\n       Alpha: \"\",\n       Beta: \"\",\n       Gamma: \"\",\n       Delta: \"\",\n       Epsilon: \"\",\n       Zeta: \"\",\n       Eta: \"\",\n       Theta: \"\",\n       Iota: \"\",\n       Kappa: \"\",\n       Lambda: \"\",\n       Mu: \"\",\n       Nu: \"\",\n       Xi: \"\",\n       Omicron: \"\",\n       Pi: \"\",\n       Rho: \"\",\n       Sigma: \"\",\n       Tau: \"\",\n       Upsilon: \"\",\n       Phi: \"\",\n       Chi: \"\",\n       Psi: \"\",\n       Omega: \"\",\n       alpha: \"\",\n       beta: \"\",\n       gamma: \"\",\n       delta: \"\",\n       epsilon: \"\",\n       zeta: \"\",\n       eta: \"\",\n       theta: \"\",\n       iota: \"\",\n       kappa: \"\",\n       lambda: \"\",\n       mu: \"\",\n       nu: \"\",\n       xi: \"\",\n       omicron: \"\",\n       pi: \"\",\n       rho: \"\",\n       sigmaf: \"\",\n       sigma: \"\",\n       tau: \"\",\n       upsilon: \"\",\n       phi: \"\",\n       chi: \"\",\n       psi: \"\",\n       omega: \"\",\n       thetasym: \"\",\n       upsih: \"\",\n       piv: \"\",\n       OElig: \"\",\n       oelig: \"\",\n       Scaron: \"\",\n       scaron: \"\",\n       Yuml: \"\",\n       fnof: \"\",\n       circ: \"\",\n       tilde: \"\",\n       ensp: \"\",\n       emsp: \"\",\n       thinsp: \"\",\n       zwnj: \"\",\n       zwj: \"\",\n       lrm: \"\",\n       rlm: \"\",\n       ndash: \"\",\n       mdash: \"\",\n       lsquo: \"\",\n       rsquo: \"\",\n       sbquo: \"\",\n       ldquo: \"\",\n       rdquo: \"\",\n       bdquo: \"\",\n       dagger: \"\",\n       Dagger: \"\",\n       bull: \"\",\n       hellip: \"\",\n       permil: \"\",\n       prime: \"\",\n       Prime: \"\",\n       lsaquo: \"\",\n       rsaquo: \"\",\n       oline: \"\",\n       euro: \"\",\n       trade: \"\",\n       larr: \"\",\n       uarr: \"\",\n       rarr: \"\",\n       darr: \"\",\n       harr: \"\",\n       crarr: \"\",\n       lceil: \"\",\n       rceil: \"\",\n       lfloor: \"\",\n       rfloor: \"\",\n       loz: \"\",\n       spades: \"\",\n       clubs: \"\",\n       hearts: \"\",\n       diams: \"\"\n});\n\n/**\n * @deprecated use `HTML_ENTITIES` instead\n * @see HTML_ENTITIES\n */\nexports.entityMap = exports.HTML_ENTITIES\n","var dom = require('./dom')\nexports.DOMImplementation = dom.DOMImplementation\nexports.XMLSerializer = dom.XMLSerializer\nexports.DOMParser = require('./dom-parser').DOMParser\n","var NAMESPACE = require(\"./conventions\").NAMESPACE;\n\n//[4]   \tNameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\n//[4a]   \tNameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\n//[5]   \tName\t   ::=   \tNameStartChar (NameChar)*\nvar nameStartChar = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]///\\u10000-\\uEFFFF\nvar nameChar = new RegExp(\"[\\\\-\\\\.0-9\"+nameStartChar.source.slice(1,-1)+\"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]\");\nvar tagNamePattern = new RegExp('^'+nameStartChar.source+nameChar.source+'*(?:\\:'+nameStartChar.source+nameChar.source+'*)?$');\n//var tagNamePattern = /^[a-zA-Z_][\\w\\-\\.]*(?:\\:[a-zA-Z_][\\w\\-\\.]*)?$/\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\n\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\nvar S_TAG = 0;//tag name offerring\nvar S_ATTR = 1;//attr name offerring\nvar S_ATTR_SPACE=2;//attr name end and space offer\nvar S_EQ = 3;//=space?\nvar S_ATTR_NOQUOT_VALUE = 4;//attr value(no quot value only)\nvar S_ATTR_END = 5;//attr value end and no space(quot end)\nvar S_TAG_SPACE = 6;//(attr value end || tag end ) && (space offer)\nvar S_TAG_CLOSE = 7;//closed el<el />\n\n/**\n * Creates an error that will not be caught by XMLReader aka the SAX parser.\n *\n * @param {string} message\n * @param {any?} locator Optional, can provide details about the location in the source\n * @constructor\n */\nfunction ParseError(message, locator) {\n\tthis.message = message\n\tthis.locator = locator\n\tif(Error.captureStackTrace) Error.captureStackTrace(this, ParseError);\n}\nParseError.prototype = new Error();\nParseError.prototype.name = ParseError.name\n\nfunction XMLReader(){\n\n}\n\nXMLReader.prototype = {\n\tparse:function(source,defaultNSMap,entityMap){\n\t\tvar domBuilder = this.domBuilder;\n\t\tdomBuilder.startDocument();\n\t\t_copy(defaultNSMap ,defaultNSMap = {})\n\t\tparse(source,defaultNSMap,entityMap,\n\t\t\t\tdomBuilder,this.errorHandler);\n\t\tdomBuilder.endDocument();\n\t}\n}\nfunction parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){\n\tfunction fixedFromCharCode(code) {\n\t\t// String.prototype.fromCharCode does not supports\n\t\t// > 2 bytes unicode chars directly\n\t\tif (code > 0xffff) {\n\t\t\tcode -= 0x10000;\n\t\t\tvar surrogate1 = 0xd800 + (code >> 10)\n\t\t\t\t, surrogate2 = 0xdc00 + (code & 0x3ff);\n\n\t\t\treturn String.fromCharCode(surrogate1, surrogate2);\n\t\t} else {\n\t\t\treturn String.fromCharCode(code);\n\t\t}\n\t}\n\tfunction entityReplacer(a){\n\t\tvar k = a.slice(1,-1);\n\t\tif (Object.hasOwnProperty.call(entityMap, k)) {\n\t\t\treturn entityMap[k];\n\t\t}else if(k.charAt(0) === '#'){\n\t\t\treturn fixedFromCharCode(parseInt(k.substr(1).replace('x','0x')))\n\t\t}else{\n\t\t\terrorHandler.error('entity not found:'+a);\n\t\t\treturn a;\n\t\t}\n\t}\n\tfunction appendText(end){//has some bugs\n\t\tif(end>start){\n\t\t\tvar xt = source.substring(start,end).replace(/&#?\\w+;/g,entityReplacer);\n\t\t\tlocator&&position(start);\n\t\t\tdomBuilder.characters(xt,0,end-start);\n\t\t\tstart = end\n\t\t}\n\t}\n\tfunction position(p,m){\n\t\twhile(p>=lineEnd && (m = linePattern.exec(source))){\n\t\t\tlineStart = m.index;\n\t\t\tlineEnd = lineStart + m[0].length;\n\t\t\tlocator.lineNumber++;\n\t\t\t//console.log('line++:',locator,startPos,endPos)\n\t\t}\n\t\tlocator.columnNumber = p-lineStart+1;\n\t}\n\tvar lineStart = 0;\n\tvar lineEnd = 0;\n\tvar linePattern = /.*(?:\\r\\n?|\\n)|.*$/g\n\tvar locator = domBuilder.locator;\n\n\tvar parseStack = [{currentNSMap:defaultNSMapCopy}]\n\tvar closeMap = {};\n\tvar start = 0;\n\twhile(true){\n\t\ttry{\n\t\t\tvar tagStart = source.indexOf('<',start);\n\t\t\tif(tagStart<0){\n\t\t\t\tif(!source.substr(start).match(/^\\s*$/)){\n\t\t\t\t\tvar doc = domBuilder.doc;\n\t    \t\t\tvar text = doc.createTextNode(source.substr(start));\n\t    \t\t\tdoc.appendChild(text);\n\t    \t\t\tdomBuilder.currentElement = text;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(tagStart>start){\n\t\t\t\tappendText(tagStart);\n\t\t\t}\n\t\t\tswitch(source.charAt(tagStart+1)){\n\t\t\tcase '/':\n\t\t\t\tvar end = source.indexOf('>',tagStart+3);\n\t\t\t\tvar tagName = source.substring(tagStart + 2, end).replace(/[ \\t\\n\\r]+$/g, '');\n\t\t\t\tvar config = parseStack.pop();\n\t\t\t\tif(end<0){\n\n\t        \t\ttagName = source.substring(tagStart+2).replace(/[\\s<].*/,'');\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' is not complete:'+config.tagName);\n\t        \t\tend = tagStart+1+tagName.length;\n\t        \t}else if(tagName.match(/\\s</)){\n\t        \t\ttagName = tagName.replace(/[\\s<].*/,'');\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' maybe not complete');\n\t        \t\tend = tagStart+1+tagName.length;\n\t\t\t\t}\n\t\t\t\tvar localNSMap = config.localNSMap;\n\t\t\t\tvar endMatch = config.tagName == tagName;\n\t\t\t\tvar endIgnoreCaseMach = endMatch || config.tagName&&config.tagName.toLowerCase() == tagName.toLowerCase()\n\t\t        if(endIgnoreCaseMach){\n\t\t        \tdomBuilder.endElement(config.uri,config.localName,tagName);\n\t\t\t\t\tif(localNSMap){\n\t\t\t\t\t\tfor (var prefix in localNSMap) {\n\t\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(localNSMap, prefix)) {\n\t\t\t\t\t\t\t\tdomBuilder.endPrefixMapping(prefix);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!endMatch){\n\t\t            \terrorHandler.fatalError(\"end tag name: \"+tagName+' is not match the current start tagName:'+config.tagName ); // No known test case\n\t\t\t\t\t}\n\t\t        }else{\n\t\t        \tparseStack.push(config)\n\t\t        }\n\n\t\t\t\tend++;\n\t\t\t\tbreak;\n\t\t\t\t// end elment\n\t\t\tcase '?':// <?...?>\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tend = parseInstruction(source,tagStart,domBuilder);\n\t\t\t\tbreak;\n\t\t\tcase '!':// <!doctype,<![CDATA,<!--\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tend = parseDCC(source,tagStart,domBuilder,errorHandler);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tvar el = new ElementAttributes();\n\t\t\t\tvar currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\t\t\t\t//elStartEnd\n\t\t\t\tvar end = parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler);\n\t\t\t\tvar len = el.length;\n\n\n\t\t\t\tif(!el.closed && fixSelfClosed(source,end,el.tagName,closeMap)){\n\t\t\t\t\tel.closed = true;\n\t\t\t\t\tif(!entityMap.nbsp){\n\t\t\t\t\t\terrorHandler.warning('unclosed xml attribute');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(locator && len){\n\t\t\t\t\tvar locator2 = copyLocator(locator,{});\n\t\t\t\t\t//try{//attribute position fixed\n\t\t\t\t\tfor(var i = 0;i<len;i++){\n\t\t\t\t\t\tvar a = el[i];\n\t\t\t\t\t\tposition(a.offset);\n\t\t\t\t\t\ta.locator = copyLocator(locator,{});\n\t\t\t\t\t}\n\t\t\t\t\tdomBuilder.locator = locator2\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\n\t\t\t\t\t\tparseStack.push(el)\n\t\t\t\t\t}\n\t\t\t\t\tdomBuilder.locator = locator;\n\t\t\t\t}else{\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\n\t\t\t\t\t\tparseStack.push(el)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (NAMESPACE.isHTML(el.uri) && !el.closed) {\n\t\t\t\t\tend = parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)\n\t\t\t\t} else {\n\t\t\t\t\tend++;\n\t\t\t\t}\n\t\t\t}\n\t\t}catch(e){\n\t\t\tif (e instanceof ParseError) {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\terrorHandler.error('element parse error: '+e)\n\t\t\tend = -1;\n\t\t}\n\t\tif(end>start){\n\t\t\tstart = end;\n\t\t}else{\n\t\t\t//TODO: sax\n\t\t\tappendText(Math.max(tagStart,start)+1);\n\t\t}\n\t}\n}\nfunction copyLocator(f,t){\n\tt.lineNumber = f.lineNumber;\n\tt.columnNumber = f.columnNumber;\n\treturn t;\n}\n\n/**\n * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\n */\nfunction parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){\n\n\t/**\n\t * @param {string} qname\n\t * @param {string} value\n\t * @param {number} startIndex\n\t */\n\tfunction addAttribute(qname, value, startIndex) {\n\t\tif (el.attributeNames.hasOwnProperty(qname)) {\n\t\t\terrorHandler.fatalError('Attribute ' + qname + ' redefined')\n\t\t}\n\t\tel.addValue(\n\t\t\tqname,\n\t\t\t// @see https://www.w3.org/TR/xml/#AVNormalize\n\t\t\t// since the xmldom sax parser does not \"interpret\" DTD the following is not implemented:\n\t\t\t// - recursive replacement of (DTD) entity references\n\t\t\t// - trimming and collapsing multiple spaces into a single one for attributes that are not of type CDATA\n\t\t\tvalue.replace(/[\\t\\n\\r]/g, ' ').replace(/&#?\\w+;/g, entityReplacer),\n\t\t\tstartIndex\n\t\t)\n\t}\n\tvar attrName;\n\tvar value;\n\tvar p = ++start;\n\tvar s = S_TAG;//status\n\twhile(true){\n\t\tvar c = source.charAt(p);\n\t\tswitch(c){\n\t\tcase '=':\n\t\t\tif(s === S_ATTR){//attrName\n\t\t\t\tattrName = source.slice(start,p);\n\t\t\t\ts = S_EQ;\n\t\t\t}else if(s === S_ATTR_SPACE){\n\t\t\t\ts = S_EQ;\n\t\t\t}else{\n\t\t\t\t//fatalError: equal must after attrName or space after attrName\n\t\t\t\tthrow new Error('attribute equal must after attrName'); // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '\\'':\n\t\tcase '\"':\n\t\t\tif(s === S_EQ || s === S_ATTR //|| s == S_ATTR_SPACE\n\t\t\t\t){//equal\n\t\t\t\tif(s === S_ATTR){\n\t\t\t\t\terrorHandler.warning('attribute value must after \"=\"')\n\t\t\t\t\tattrName = source.slice(start,p)\n\t\t\t\t}\n\t\t\t\tstart = p+1;\n\t\t\t\tp = source.indexOf(c,start)\n\t\t\t\tif(p>0){\n\t\t\t\t\tvalue = source.slice(start, p);\n\t\t\t\t\taddAttribute(attrName, value, start-1);\n\t\t\t\t\ts = S_ATTR_END;\n\t\t\t\t}else{\n\t\t\t\t\t//fatalError: no end quot match\n\t\t\t\t\tthrow new Error('attribute value no end \\''+c+'\\' match');\n\t\t\t\t}\n\t\t\t}else if(s == S_ATTR_NOQUOT_VALUE){\n\t\t\t\tvalue = source.slice(start, p);\n\t\t\t\taddAttribute(attrName, value, start);\n\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed start quot('+c+')!!');\n\t\t\t\tstart = p+1;\n\t\t\t\ts = S_ATTR_END\n\t\t\t}else{\n\t\t\t\t//fatalError: no equal before\n\t\t\t\tthrow new Error('attribute value must after \"=\"'); // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '/':\n\t\t\tswitch(s){\n\t\t\tcase S_TAG:\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\tcase S_ATTR_END:\n\t\t\tcase S_TAG_SPACE:\n\t\t\tcase S_TAG_CLOSE:\n\t\t\t\ts =S_TAG_CLOSE;\n\t\t\t\tel.closed = true;\n\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\tcase S_ATTR:\n\t\t\tcase S_ATTR_SPACE:\n\t\t\t\tbreak;\n\t\t\t//case S_EQ:\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"attribute invalid close char('/')\") // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase ''://end document\n\t\t\terrorHandler.error('unexpected end of input');\n\t\t\tif(s == S_TAG){\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\t}\n\t\t\treturn p;\n\t\tcase '>':\n\t\t\tswitch(s){\n\t\t\tcase S_TAG:\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\tcase S_ATTR_END:\n\t\t\tcase S_TAG_SPACE:\n\t\t\tcase S_TAG_CLOSE:\n\t\t\t\tbreak;//normal\n\t\t\tcase S_ATTR_NOQUOT_VALUE://Compatible state\n\t\t\tcase S_ATTR:\n\t\t\t\tvalue = source.slice(start,p);\n\t\t\t\tif(value.slice(-1) === '/'){\n\t\t\t\t\tel.closed  = true;\n\t\t\t\t\tvalue = value.slice(0,-1)\n\t\t\t\t}\n\t\t\tcase S_ATTR_SPACE:\n\t\t\t\tif(s === S_ATTR_SPACE){\n\t\t\t\t\tvalue = attrName;\n\t\t\t\t}\n\t\t\t\tif(s == S_ATTR_NOQUOT_VALUE){\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!');\n\t\t\t\t\taddAttribute(attrName, value, start)\n\t\t\t\t}else{\n\t\t\t\t\tif(!NAMESPACE.isHTML(currentNSMap['']) || !value.match(/^(?:disabled|checked|selected)$/i)){\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed value!! \"'+value+'\" instead!!')\n\t\t\t\t\t}\n\t\t\t\t\taddAttribute(value, value, start)\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase S_EQ:\n\t\t\t\tthrow new Error('attribute value missed!!');\n\t\t\t}\n//\t\t\tconsole.log(tagName,tagNamePattern,tagNamePattern.test(tagName))\n\t\t\treturn p;\n\t\t/*xml space '\\x20' | #x9 | #xD | #xA; */\n\t\tcase '\\u0080':\n\t\t\tc = ' ';\n\t\tdefault:\n\t\t\tif(c<= ' '){//space\n\t\t\t\tswitch(s){\n\t\t\t\tcase S_TAG:\n\t\t\t\t\tel.setTagName(source.slice(start,p));//tagName\n\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR:\n\t\t\t\t\tattrName = source.slice(start,p)\n\t\t\t\t\ts = S_ATTR_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\t\t\tvar value = source.slice(start, p);\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\n\t\t\t\t\taddAttribute(attrName, value, start)\n\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\t//case S_TAG_SPACE:\n\t\t\t\t//case S_EQ:\n\t\t\t\t//case S_ATTR_SPACE:\n\t\t\t\t//\tvoid();break;\n\t\t\t\t//case S_TAG_CLOSE:\n\t\t\t\t\t//ignore warning\n\t\t\t\t}\n\t\t\t}else{//not space\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\n\t\t\t\tswitch(s){\n\t\t\t\t//case S_TAG:void();break;\n\t\t\t\t//case S_ATTR:void();break;\n\t\t\t\t//case S_ATTR_NOQUOT_VALUE:void();break;\n\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\tvar tagName =  el.tagName;\n\t\t\t\t\tif (!NAMESPACE.isHTML(currentNSMap['']) || !attrName.match(/^(?:disabled|checked|selected)$/i)) {\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed value!! \"'+attrName+'\" instead2!!')\n\t\t\t\t\t}\n\t\t\t\t\taddAttribute(attrName, attrName, start);\n\t\t\t\t\tstart = p;\n\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\terrorHandler.warning('attribute space is required\"'+attrName+'\"!!')\n\t\t\t\tcase S_TAG_SPACE:\n\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\tstart = p;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_EQ:\n\t\t\t\t\ts = S_ATTR_NOQUOT_VALUE;\n\t\t\t\t\tstart = p;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_TAG_CLOSE:\n\t\t\t\t\tthrow new Error(\"elements closed character '/' and '>' must be connected to\");\n\t\t\t\t}\n\t\t\t}\n\t\t}//end outer switch\n\t\t//console.log('p++',p)\n\t\tp++;\n\t}\n}\n/**\n * @return true if has new namespace define\n */\nfunction appendElement(el,domBuilder,currentNSMap){\n\tvar tagName = el.tagName;\n\tvar localNSMap = null;\n\t//var currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\tvar i = el.length;\n\twhile(i--){\n\t\tvar a = el[i];\n\t\tvar qName = a.qName;\n\t\tvar value = a.value;\n\t\tvar nsp = qName.indexOf(':');\n\t\tif(nsp>0){\n\t\t\tvar prefix = a.prefix = qName.slice(0,nsp);\n\t\t\tvar localName = qName.slice(nsp+1);\n\t\t\tvar nsPrefix = prefix === 'xmlns' && localName\n\t\t}else{\n\t\t\tlocalName = qName;\n\t\t\tprefix = null\n\t\t\tnsPrefix = qName === 'xmlns' && ''\n\t\t}\n\t\t//can not set prefix,because prefix !== ''\n\t\ta.localName = localName ;\n\t\t//prefix == null for no ns prefix attribute\n\t\tif(nsPrefix !== false){//hack!!\n\t\t\tif(localNSMap == null){\n\t\t\t\tlocalNSMap = {}\n\t\t\t\t//console.log(currentNSMap,0)\n\t\t\t\t_copy(currentNSMap,currentNSMap={})\n\t\t\t\t//console.log(currentNSMap,1)\n\t\t\t}\n\t\t\tcurrentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\n\t\t\ta.uri = NAMESPACE.XMLNS\n\t\t\tdomBuilder.startPrefixMapping(nsPrefix, value)\n\t\t}\n\t}\n\tvar i = el.length;\n\twhile(i--){\n\t\ta = el[i];\n\t\tvar prefix = a.prefix;\n\t\tif(prefix){//no prefix attribute has no namespace\n\t\t\tif(prefix === 'xml'){\n\t\t\t\ta.uri = NAMESPACE.XML;\n\t\t\t}if(prefix !== 'xmlns'){\n\t\t\t\ta.uri = currentNSMap[prefix || '']\n\n\t\t\t\t//{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}\n\t\t\t}\n\t\t}\n\t}\n\tvar nsp = tagName.indexOf(':');\n\tif(nsp>0){\n\t\tprefix = el.prefix = tagName.slice(0,nsp);\n\t\tlocalName = el.localName = tagName.slice(nsp+1);\n\t}else{\n\t\tprefix = null;//important!!\n\t\tlocalName = el.localName = tagName;\n\t}\n\t//no prefix element has default namespace\n\tvar ns = el.uri = currentNSMap[prefix || ''];\n\tdomBuilder.startElement(ns,localName,tagName,el);\n\t//endPrefixMapping and startPrefixMapping have not any help for dom builder\n\t//localNSMap = null\n\tif(el.closed){\n\t\tdomBuilder.endElement(ns,localName,tagName);\n\t\tif(localNSMap){\n\t\t\tfor (prefix in localNSMap) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(localNSMap, prefix)) {\n\t\t\t\t\tdomBuilder.endPrefixMapping(prefix);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}else{\n\t\tel.currentNSMap = currentNSMap;\n\t\tel.localNSMap = localNSMap;\n\t\t//parseStack.push(el);\n\t\treturn true;\n\t}\n}\nfunction parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){\n\tif(/^(?:script|textarea)$/i.test(tagName)){\n\t\tvar elEndStart =  source.indexOf('</'+tagName+'>',elStartEnd);\n\t\tvar text = source.substring(elStartEnd+1,elEndStart);\n\t\tif(/[&<]/.test(text)){\n\t\t\tif(/^script$/i.test(tagName)){\n\t\t\t\t//if(!/\\]\\]>/.test(text)){\n\t\t\t\t\t//lexHandler.startCDATA();\n\t\t\t\t\tdomBuilder.characters(text,0,text.length);\n\t\t\t\t\t//lexHandler.endCDATA();\n\t\t\t\t\treturn elEndStart;\n\t\t\t\t//}\n\t\t\t}//}else{//text area\n\t\t\t\ttext = text.replace(/&#?\\w+;/g,entityReplacer);\n\t\t\t\tdomBuilder.characters(text,0,text.length);\n\t\t\t\treturn elEndStart;\n\t\t\t//}\n\n\t\t}\n\t}\n\treturn elStartEnd+1;\n}\nfunction fixSelfClosed(source,elStartEnd,tagName,closeMap){\n\t//if(tagName in closeMap){\n\tvar pos = closeMap[tagName];\n\tif(pos == null){\n\t\t//console.log(tagName)\n\t\tpos =  source.lastIndexOf('</'+tagName+'>')\n\t\tif(pos<elStartEnd){//\n\t\t\tpos = source.lastIndexOf('</'+tagName)\n\t\t}\n\t\tcloseMap[tagName] =pos\n\t}\n\treturn pos<elStartEnd;\n\t//}\n}\n\nfunction _copy (source, target) {\n\tfor (var n in source) {\n\t\tif (Object.prototype.hasOwnProperty.call(source, n)) {\n\t\t\ttarget[n] = source[n];\n\t\t}\n\t}\n}\n\nfunction parseDCC(source,start,domBuilder,errorHandler){//sure start with '<!'\n\tvar next= source.charAt(start+2)\n\tswitch(next){\n\tcase '-':\n\t\tif(source.charAt(start + 3) === '-'){\n\t\t\tvar end = source.indexOf('-->',start+4);\n\t\t\t//append comment source.substring(4,end)//<!--\n\t\t\tif(end>start){\n\t\t\t\tdomBuilder.comment(source,start+4,end-start-4);\n\t\t\t\treturn end+3;\n\t\t\t}else{\n\t\t\t\terrorHandler.error(\"Unclosed comment\");\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}else{\n\t\t\t//error\n\t\t\treturn -1;\n\t\t}\n\tdefault:\n\t\tif(source.substr(start+3,6) == 'CDATA['){\n\t\t\tvar end = source.indexOf(']]>',start+9);\n\t\t\tdomBuilder.startCDATA();\n\t\t\tdomBuilder.characters(source,start+9,end-start-9);\n\t\t\tdomBuilder.endCDATA()\n\t\t\treturn end+3;\n\t\t}\n\t\t//<!DOCTYPE\n\t\t//startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId)\n\t\tvar matchs = split(source,start);\n\t\tvar len = matchs.length;\n\t\tif(len>1 && /!doctype/i.test(matchs[0][0])){\n\t\t\tvar name = matchs[1][0];\n\t\t\tvar pubid = false;\n\t\t\tvar sysid = false;\n\t\t\tif(len>3){\n\t\t\t\tif(/^public$/i.test(matchs[2][0])){\n\t\t\t\t\tpubid = matchs[3][0];\n\t\t\t\t\tsysid = len>4 && matchs[4][0];\n\t\t\t\t}else if(/^system$/i.test(matchs[2][0])){\n\t\t\t\t\tsysid = matchs[3][0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar lastMatch = matchs[len-1]\n\t\t\tdomBuilder.startDTD(name, pubid, sysid);\n\t\t\tdomBuilder.endDTD();\n\n\t\t\treturn lastMatch.index+lastMatch[0].length\n\t\t}\n\t}\n\treturn -1;\n}\n\n\n\nfunction parseInstruction(source,start,domBuilder){\n\tvar end = source.indexOf('?>',start);\n\tif(end){\n\t\tvar match = source.substring(start,end).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\n\t\tif(match){\n\t\t\tvar len = match[0].length;\n\t\t\tdomBuilder.processingInstruction(match[1], match[2]) ;\n\t\t\treturn end+2;\n\t\t}else{//error\n\t\t\treturn -1;\n\t\t}\n\t}\n\treturn -1;\n}\n\nfunction ElementAttributes(){\n\tthis.attributeNames = {}\n}\nElementAttributes.prototype = {\n\tsetTagName:function(tagName){\n\t\tif(!tagNamePattern.test(tagName)){\n\t\t\tthrow new Error('invalid tagName:'+tagName)\n\t\t}\n\t\tthis.tagName = tagName\n\t},\n\taddValue:function(qName, value, offset) {\n\t\tif(!tagNamePattern.test(qName)){\n\t\t\tthrow new Error('invalid attribute:'+qName)\n\t\t}\n\t\tthis.attributeNames[qName] = this.length;\n\t\tthis[this.length++] = {qName:qName,value:value,offset:offset}\n\t},\n\tlength:0,\n\tgetLocalName:function(i){return this[i].localName},\n\tgetLocator:function(i){return this[i].locator},\n\tgetQName:function(i){return this[i].qName},\n\tgetURI:function(i){return this[i].uri},\n\tgetValue:function(i){return this[i].value}\n//\t,getIndex:function(uri, localName)){\n//\t\tif(localName){\n//\n//\t\t}else{\n//\t\t\tvar qName = uri\n//\t\t}\n//\t},\n//\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\n//\tgetType:function(uri,localName){}\n//\tgetType:function(i){},\n}\n\n\n\nfunction split(source,start){\n\tvar match;\n\tvar buf = [];\n\tvar reg = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\n\treg.lastIndex = start;\n\treg.exec(source);//skip <\n\twhile(match = reg.exec(source)){\n\t\tbuf.push(match);\n\t\tif(match[1])return buf;\n\t}\n}\n\nexports.XMLReader = XMLReader;\nexports.ParseError = ParseError;\n","var win;\n\nif (typeof window !== \"undefined\") {\n    win = window;\n} else if (typeof global !== \"undefined\") {\n    win = global;\n} else if (typeof self !== \"undefined\"){\n    win = self;\n} else {\n    win = {};\n}\n\nmodule.exports = win;\n","/*! @name m3u8-parser @version 4.8.0 @license Apache-2.0 */\nimport _inheritsLoose from '@babel/runtime/helpers/inheritsLoose';\nimport Stream from '@videojs/vhs-utils/es/stream.js';\nimport _extends from '@babel/runtime/helpers/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/assertThisInitialized';\nimport decodeB64ToUint8Array from '@videojs/vhs-utils/es/decode-b64-to-uint8-array.js';\n\n/**\n * A stream that buffers string input and generates a `data` event for each\n * line.\n *\n * @class LineStream\n * @extends Stream\n */\n\nvar LineStream = /*#__PURE__*/function (_Stream) {\n  _inheritsLoose(LineStream, _Stream);\n\n  function LineStream() {\n    var _this;\n\n    _this = _Stream.call(this) || this;\n    _this.buffer = '';\n    return _this;\n  }\n  /**\n   * Add new data to be parsed.\n   *\n   * @param {string} data the text to process\n   */\n\n\n  var _proto = LineStream.prototype;\n\n  _proto.push = function push(data) {\n    var nextNewline;\n    this.buffer += data;\n    nextNewline = this.buffer.indexOf('\\n');\n\n    for (; nextNewline > -1; nextNewline = this.buffer.indexOf('\\n')) {\n      this.trigger('data', this.buffer.substring(0, nextNewline));\n      this.buffer = this.buffer.substring(nextNewline + 1);\n    }\n  };\n\n  return LineStream;\n}(Stream);\n\nvar TAB = String.fromCharCode(0x09);\n\nvar parseByterange = function parseByterange(byterangeString) {\n  // optionally match and capture 0+ digits before `@`\n  // optionally match and capture 0+ digits after `@`\n  var match = /([0-9.]*)?@?([0-9.]*)?/.exec(byterangeString || '');\n  var result = {};\n\n  if (match[1]) {\n    result.length = parseInt(match[1], 10);\n  }\n\n  if (match[2]) {\n    result.offset = parseInt(match[2], 10);\n  }\n\n  return result;\n};\n/**\n * \"forgiving\" attribute list psuedo-grammar:\n * attributes -> keyvalue (',' keyvalue)*\n * keyvalue   -> key '=' value\n * key        -> [^=]*\n * value      -> '\"' [^\"]* '\"' | [^,]*\n */\n\n\nvar attributeSeparator = function attributeSeparator() {\n  var key = '[^=]*';\n  var value = '\"[^\"]*\"|[^,]*';\n  var keyvalue = '(?:' + key + ')=(?:' + value + ')';\n  return new RegExp('(?:^|,)(' + keyvalue + ')');\n};\n/**\n * Parse attributes from a line given the separator\n *\n * @param {string} attributes the attribute line to parse\n */\n\n\nvar parseAttributes = function parseAttributes(attributes) {\n  // split the string using attributes as the separator\n  var attrs = attributes.split(attributeSeparator());\n  var result = {};\n  var i = attrs.length;\n  var attr;\n\n  while (i--) {\n    // filter out unmatched portions of the string\n    if (attrs[i] === '') {\n      continue;\n    } // split the key and value\n\n\n    attr = /([^=]*)=(.*)/.exec(attrs[i]).slice(1); // trim whitespace and remove optional quotes around the value\n\n    attr[0] = attr[0].replace(/^\\s+|\\s+$/g, '');\n    attr[1] = attr[1].replace(/^\\s+|\\s+$/g, '');\n    attr[1] = attr[1].replace(/^['\"](.*)['\"]$/g, '$1');\n    result[attr[0]] = attr[1];\n  }\n\n  return result;\n};\n/**\n * A line-level M3U8 parser event stream. It expects to receive input one\n * line at a time and performs a context-free parse of its contents. A stream\n * interpretation of a manifest can be useful if the manifest is expected to\n * be too large to fit comfortably into memory or the entirety of the input\n * is not immediately available. Otherwise, it's probably much easier to work\n * with a regular `Parser` object.\n *\n * Produces `data` events with an object that captures the parser's\n * interpretation of the input. That object has a property `tag` that is one\n * of `uri`, `comment`, or `tag`. URIs only have a single additional\n * property, `line`, which captures the entirety of the input without\n * interpretation. Comments similarly have a single additional property\n * `text` which is the input without the leading `#`.\n *\n * Tags always have a property `tagType` which is the lower-cased version of\n * the M3U8 directive without the `#EXT` or `#EXT-X-` prefix. For instance,\n * `#EXT-X-MEDIA-SEQUENCE` becomes `media-sequence` when parsed. Unrecognized\n * tags are given the tag type `unknown` and a single additional property\n * `data` with the remainder of the input.\n *\n * @class ParseStream\n * @extends Stream\n */\n\n\nvar ParseStream = /*#__PURE__*/function (_Stream) {\n  _inheritsLoose(ParseStream, _Stream);\n\n  function ParseStream() {\n    var _this;\n\n    _this = _Stream.call(this) || this;\n    _this.customParsers = [];\n    _this.tagMappers = [];\n    return _this;\n  }\n  /**\n   * Parses an additional line of input.\n   *\n   * @param {string} line a single line of an M3U8 file to parse\n   */\n\n\n  var _proto = ParseStream.prototype;\n\n  _proto.push = function push(line) {\n    var _this2 = this;\n\n    var match;\n    var event; // strip whitespace\n\n    line = line.trim();\n\n    if (line.length === 0) {\n      // ignore empty lines\n      return;\n    } // URIs\n\n\n    if (line[0] !== '#') {\n      this.trigger('data', {\n        type: 'uri',\n        uri: line\n      });\n      return;\n    } // map tags\n\n\n    var newLines = this.tagMappers.reduce(function (acc, mapper) {\n      var mappedLine = mapper(line); // skip if unchanged\n\n      if (mappedLine === line) {\n        return acc;\n      }\n\n      return acc.concat([mappedLine]);\n    }, [line]);\n    newLines.forEach(function (newLine) {\n      for (var i = 0; i < _this2.customParsers.length; i++) {\n        if (_this2.customParsers[i].call(_this2, newLine)) {\n          return;\n        }\n      } // Comments\n\n\n      if (newLine.indexOf('#EXT') !== 0) {\n        _this2.trigger('data', {\n          type: 'comment',\n          text: newLine.slice(1)\n        });\n\n        return;\n      } // strip off any carriage returns here so the regex matching\n      // doesn't have to account for them.\n\n\n      newLine = newLine.replace('\\r', ''); // Tags\n\n      match = /^#EXTM3U/.exec(newLine);\n\n      if (match) {\n        _this2.trigger('data', {\n          type: 'tag',\n          tagType: 'm3u'\n        });\n\n        return;\n      }\n\n      match = /^#EXTINF:?([0-9\\.]*)?,?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'inf'\n        };\n\n        if (match[1]) {\n          event.duration = parseFloat(match[1]);\n        }\n\n        if (match[2]) {\n          event.title = match[2];\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'targetduration'\n        };\n\n        if (match[1]) {\n          event.duration = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-VERSION:?([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'version'\n        };\n\n        if (match[1]) {\n          event.version = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-MEDIA-SEQUENCE:?(\\-?[0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'media-sequence'\n        };\n\n        if (match[1]) {\n          event.number = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-DISCONTINUITY-SEQUENCE:?(\\-?[0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'discontinuity-sequence'\n        };\n\n        if (match[1]) {\n          event.number = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'playlist-type'\n        };\n\n        if (match[1]) {\n          event.playlistType = match[1];\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-BYTERANGE:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = _extends(parseByterange(match[1]), {\n          type: 'tag',\n          tagType: 'byterange'\n        });\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'allow-cache'\n        };\n\n        if (match[1]) {\n          event.allowed = !/NO/.test(match[1]);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-MAP:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'map'\n        };\n\n        if (match[1]) {\n          var attributes = parseAttributes(match[1]);\n\n          if (attributes.URI) {\n            event.uri = attributes.URI;\n          }\n\n          if (attributes.BYTERANGE) {\n            event.byterange = parseByterange(attributes.BYTERANGE);\n          }\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-STREAM-INF:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'stream-inf'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n\n          if (event.attributes.RESOLUTION) {\n            var split = event.attributes.RESOLUTION.split('x');\n            var resolution = {};\n\n            if (split[0]) {\n              resolution.width = parseInt(split[0], 10);\n            }\n\n            if (split[1]) {\n              resolution.height = parseInt(split[1], 10);\n            }\n\n            event.attributes.RESOLUTION = resolution;\n          }\n\n          if (event.attributes.BANDWIDTH) {\n            event.attributes.BANDWIDTH = parseInt(event.attributes.BANDWIDTH, 10);\n          }\n\n          if (event.attributes['FRAME-RATE']) {\n            event.attributes['FRAME-RATE'] = parseFloat(event.attributes['FRAME-RATE']);\n          }\n\n          if (event.attributes['PROGRAM-ID']) {\n            event.attributes['PROGRAM-ID'] = parseInt(event.attributes['PROGRAM-ID'], 10);\n          }\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-MEDIA:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'media'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-ENDLIST/.exec(newLine);\n\n      if (match) {\n        _this2.trigger('data', {\n          type: 'tag',\n          tagType: 'endlist'\n        });\n\n        return;\n      }\n\n      match = /^#EXT-X-DISCONTINUITY/.exec(newLine);\n\n      if (match) {\n        _this2.trigger('data', {\n          type: 'tag',\n          tagType: 'discontinuity'\n        });\n\n        return;\n      }\n\n      match = /^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'program-date-time'\n        };\n\n        if (match[1]) {\n          event.dateTimeString = match[1];\n          event.dateTimeObject = new Date(match[1]);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-KEY:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'key'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]); // parse the IV string into a Uint32Array\n\n          if (event.attributes.IV) {\n            if (event.attributes.IV.substring(0, 2).toLowerCase() === '0x') {\n              event.attributes.IV = event.attributes.IV.substring(2);\n            }\n\n            event.attributes.IV = event.attributes.IV.match(/.{8}/g);\n            event.attributes.IV[0] = parseInt(event.attributes.IV[0], 16);\n            event.attributes.IV[1] = parseInt(event.attributes.IV[1], 16);\n            event.attributes.IV[2] = parseInt(event.attributes.IV[2], 16);\n            event.attributes.IV[3] = parseInt(event.attributes.IV[3], 16);\n            event.attributes.IV = new Uint32Array(event.attributes.IV);\n          }\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-START:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'start'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n          event.attributes['TIME-OFFSET'] = parseFloat(event.attributes['TIME-OFFSET']);\n          event.attributes.PRECISE = /YES/.test(event.attributes.PRECISE);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-out-cont'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-CUE-OUT:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-out'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-CUE-IN:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-in'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-SKIP:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'skip'\n        };\n        event.attributes = parseAttributes(match[1]);\n\n        if (event.attributes.hasOwnProperty('SKIPPED-SEGMENTS')) {\n          event.attributes['SKIPPED-SEGMENTS'] = parseInt(event.attributes['SKIPPED-SEGMENTS'], 10);\n        }\n\n        if (event.attributes.hasOwnProperty('RECENTLY-REMOVED-DATERANGES')) {\n          event.attributes['RECENTLY-REMOVED-DATERANGES'] = event.attributes['RECENTLY-REMOVED-DATERANGES'].split(TAB);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-PART:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'part'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['DURATION'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseFloat(event.attributes[key]);\n          }\n        });\n        ['INDEPENDENT', 'GAP'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = /YES/.test(event.attributes[key]);\n          }\n        });\n\n        if (event.attributes.hasOwnProperty('BYTERANGE')) {\n          event.attributes.byterange = parseByterange(event.attributes.BYTERANGE);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-SERVER-CONTROL:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'server-control'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['CAN-SKIP-UNTIL', 'PART-HOLD-BACK', 'HOLD-BACK'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseFloat(event.attributes[key]);\n          }\n        });\n        ['CAN-SKIP-DATERANGES', 'CAN-BLOCK-RELOAD'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = /YES/.test(event.attributes[key]);\n          }\n        });\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-PART-INF:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'part-inf'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['PART-TARGET'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseFloat(event.attributes[key]);\n          }\n        });\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-PRELOAD-HINT:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'preload-hint'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['BYTERANGE-START', 'BYTERANGE-LENGTH'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseInt(event.attributes[key], 10);\n            var subkey = key === 'BYTERANGE-LENGTH' ? 'length' : 'offset';\n            event.attributes.byterange = event.attributes.byterange || {};\n            event.attributes.byterange[subkey] = event.attributes[key]; // only keep the parsed byterange object.\n\n            delete event.attributes[key];\n          }\n        });\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-RENDITION-REPORT:(.*)$/.exec(newLine);\n\n      if (match && match[1]) {\n        event = {\n          type: 'tag',\n          tagType: 'rendition-report'\n        };\n        event.attributes = parseAttributes(match[1]);\n        ['LAST-MSN', 'LAST-PART'].forEach(function (key) {\n          if (event.attributes.hasOwnProperty(key)) {\n            event.attributes[key] = parseInt(event.attributes[key], 10);\n          }\n        });\n\n        _this2.trigger('data', event);\n\n        return;\n      } // unknown tag type\n\n\n      _this2.trigger('data', {\n        type: 'tag',\n        data: newLine.slice(4)\n      });\n    });\n  }\n  /**\n   * Add a parser for custom headers\n   *\n   * @param {Object}   options              a map of options for the added parser\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {string}   options.customType   the custom type to register to the output\n   * @param {Function} [options.dataParser] function to parse the line into an object\n   * @param {boolean}  [options.segment]    should tag data be attached to the segment object\n   */\n  ;\n\n  _proto.addParser = function addParser(_ref) {\n    var _this3 = this;\n\n    var expression = _ref.expression,\n        customType = _ref.customType,\n        dataParser = _ref.dataParser,\n        segment = _ref.segment;\n\n    if (typeof dataParser !== 'function') {\n      dataParser = function dataParser(line) {\n        return line;\n      };\n    }\n\n    this.customParsers.push(function (line) {\n      var match = expression.exec(line);\n\n      if (match) {\n        _this3.trigger('data', {\n          type: 'custom',\n          data: dataParser(line),\n          customType: customType,\n          segment: segment\n        });\n\n        return true;\n      }\n    });\n  }\n  /**\n   * Add a custom header mapper\n   *\n   * @param {Object}   options\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {Function} options.map          function to translate tag into a different tag\n   */\n  ;\n\n  _proto.addTagMapper = function addTagMapper(_ref2) {\n    var expression = _ref2.expression,\n        map = _ref2.map;\n\n    var mapFn = function mapFn(line) {\n      if (expression.test(line)) {\n        return map(line);\n      }\n\n      return line;\n    };\n\n    this.tagMappers.push(mapFn);\n  };\n\n  return ParseStream;\n}(Stream);\n\nvar camelCase = function camelCase(str) {\n  return str.toLowerCase().replace(/-(\\w)/g, function (a) {\n    return a[1].toUpperCase();\n  });\n};\n\nvar camelCaseKeys = function camelCaseKeys(attributes) {\n  var result = {};\n  Object.keys(attributes).forEach(function (key) {\n    result[camelCase(key)] = attributes[key];\n  });\n  return result;\n}; // set SERVER-CONTROL hold back based upon targetDuration and partTargetDuration\n// we need this helper because defaults are based upon targetDuration and\n// partTargetDuration being set, but they may not be if SERVER-CONTROL appears before\n// target durations are set.\n\n\nvar setHoldBack = function setHoldBack(manifest) {\n  var serverControl = manifest.serverControl,\n      targetDuration = manifest.targetDuration,\n      partTargetDuration = manifest.partTargetDuration;\n\n  if (!serverControl) {\n    return;\n  }\n\n  var tag = '#EXT-X-SERVER-CONTROL';\n  var hb = 'holdBack';\n  var phb = 'partHoldBack';\n  var minTargetDuration = targetDuration && targetDuration * 3;\n  var minPartDuration = partTargetDuration && partTargetDuration * 2;\n\n  if (targetDuration && !serverControl.hasOwnProperty(hb)) {\n    serverControl[hb] = minTargetDuration;\n    this.trigger('info', {\n      message: tag + \" defaulting HOLD-BACK to targetDuration * 3 (\" + minTargetDuration + \").\"\n    });\n  }\n\n  if (minTargetDuration && serverControl[hb] < minTargetDuration) {\n    this.trigger('warn', {\n      message: tag + \" clamping HOLD-BACK (\" + serverControl[hb] + \") to targetDuration * 3 (\" + minTargetDuration + \")\"\n    });\n    serverControl[hb] = minTargetDuration;\n  } // default no part hold back to part target duration * 3\n\n\n  if (partTargetDuration && !serverControl.hasOwnProperty(phb)) {\n    serverControl[phb] = partTargetDuration * 3;\n    this.trigger('info', {\n      message: tag + \" defaulting PART-HOLD-BACK to partTargetDuration * 3 (\" + serverControl[phb] + \").\"\n    });\n  } // if part hold back is too small default it to part target duration * 2\n\n\n  if (partTargetDuration && serverControl[phb] < minPartDuration) {\n    this.trigger('warn', {\n      message: tag + \" clamping PART-HOLD-BACK (\" + serverControl[phb] + \") to partTargetDuration * 2 (\" + minPartDuration + \").\"\n    });\n    serverControl[phb] = minPartDuration;\n  }\n};\n/**\n * A parser for M3U8 files. The current interpretation of the input is\n * exposed as a property `manifest` on parser objects. It's just two lines to\n * create and parse a manifest once you have the contents available as a string:\n *\n * ```js\n * var parser = new m3u8.Parser();\n * parser.push(xhr.responseText);\n * ```\n *\n * New input can later be applied to update the manifest object by calling\n * `push` again.\n *\n * The parser attempts to create a usable manifest object even if the\n * underlying input is somewhat nonsensical. It emits `info` and `warning`\n * events during the parse if it encounters input that seems invalid or\n * requires some property of the manifest object to be defaulted.\n *\n * @class Parser\n * @extends Stream\n */\n\n\nvar Parser = /*#__PURE__*/function (_Stream) {\n  _inheritsLoose(Parser, _Stream);\n\n  function Parser() {\n    var _this;\n\n    _this = _Stream.call(this) || this;\n    _this.lineStream = new LineStream();\n    _this.parseStream = new ParseStream();\n\n    _this.lineStream.pipe(_this.parseStream);\n    /* eslint-disable consistent-this */\n\n\n    var self = _assertThisInitialized(_this);\n    /* eslint-enable consistent-this */\n\n\n    var uris = [];\n    var currentUri = {}; // if specified, the active EXT-X-MAP definition\n\n    var currentMap; // if specified, the active decryption key\n\n    var _key;\n\n    var hasParts = false;\n\n    var noop = function noop() {};\n\n    var defaultMediaGroups = {\n      'AUDIO': {},\n      'VIDEO': {},\n      'CLOSED-CAPTIONS': {},\n      'SUBTITLES': {}\n    }; // This is the Widevine UUID from DASH IF IOP. The same exact string is\n    // used in MPDs with Widevine encrypted streams.\n\n    var widevineUuid = 'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed'; // group segments into numbered timelines delineated by discontinuities\n\n    var currentTimeline = 0; // the manifest is empty until the parse stream begins delivering data\n\n    _this.manifest = {\n      allowCache: true,\n      discontinuityStarts: [],\n      segments: []\n    }; // keep track of the last seen segment's byte range end, as segments are not required\n    // to provide the offset, in which case it defaults to the next byte after the\n    // previous segment\n\n    var lastByterangeEnd = 0; // keep track of the last seen part's byte range end.\n\n    var lastPartByterangeEnd = 0;\n\n    _this.on('end', function () {\n      // only add preloadSegment if we don't yet have a uri for it.\n      // and we actually have parts/preloadHints\n      if (currentUri.uri || !currentUri.parts && !currentUri.preloadHints) {\n        return;\n      }\n\n      if (!currentUri.map && currentMap) {\n        currentUri.map = currentMap;\n      }\n\n      if (!currentUri.key && _key) {\n        currentUri.key = _key;\n      }\n\n      if (!currentUri.timeline && typeof currentTimeline === 'number') {\n        currentUri.timeline = currentTimeline;\n      }\n\n      _this.manifest.preloadSegment = currentUri;\n    }); // update the manifest with the m3u8 entry from the parse stream\n\n\n    _this.parseStream.on('data', function (entry) {\n      var mediaGroup;\n      var rendition;\n      ({\n        tag: function tag() {\n          // switch based on the tag type\n          (({\n            version: function version() {\n              if (entry.version) {\n                this.manifest.version = entry.version;\n              }\n            },\n            'allow-cache': function allowCache() {\n              this.manifest.allowCache = entry.allowed;\n\n              if (!('allowed' in entry)) {\n                this.trigger('info', {\n                  message: 'defaulting allowCache to YES'\n                });\n                this.manifest.allowCache = true;\n              }\n            },\n            byterange: function byterange() {\n              var byterange = {};\n\n              if ('length' in entry) {\n                currentUri.byterange = byterange;\n                byterange.length = entry.length;\n\n                if (!('offset' in entry)) {\n                  /*\n                   * From the latest spec (as of this writing):\n                   * https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.2.2\n                   *\n                   * Same text since EXT-X-BYTERANGE's introduction in draft 7:\n                   * https://tools.ietf.org/html/draft-pantos-http-live-streaming-07#section-3.3.1)\n                   *\n                   * \"If o [offset] is not present, the sub-range begins at the next byte\n                   * following the sub-range of the previous media segment.\"\n                   */\n                  entry.offset = lastByterangeEnd;\n                }\n              }\n\n              if ('offset' in entry) {\n                currentUri.byterange = byterange;\n                byterange.offset = entry.offset;\n              }\n\n              lastByterangeEnd = byterange.offset + byterange.length;\n            },\n            endlist: function endlist() {\n              this.manifest.endList = true;\n            },\n            inf: function inf() {\n              if (!('mediaSequence' in this.manifest)) {\n                this.manifest.mediaSequence = 0;\n                this.trigger('info', {\n                  message: 'defaulting media sequence to zero'\n                });\n              }\n\n              if (!('discontinuitySequence' in this.manifest)) {\n                this.manifest.discontinuitySequence = 0;\n                this.trigger('info', {\n                  message: 'defaulting discontinuity sequence to zero'\n                });\n              }\n\n              if (entry.duration > 0) {\n                currentUri.duration = entry.duration;\n              }\n\n              if (entry.duration === 0) {\n                currentUri.duration = 0.01;\n                this.trigger('info', {\n                  message: 'updating zero segment duration to a small value'\n                });\n              }\n\n              this.manifest.segments = uris;\n            },\n            key: function key() {\n              if (!entry.attributes) {\n                this.trigger('warn', {\n                  message: 'ignoring key declaration without attribute list'\n                });\n                return;\n              } // clear the active encryption key\n\n\n              if (entry.attributes.METHOD === 'NONE') {\n                _key = null;\n                return;\n              }\n\n              if (!entry.attributes.URI) {\n                this.trigger('warn', {\n                  message: 'ignoring key declaration without URI'\n                });\n                return;\n              }\n\n              if (entry.attributes.KEYFORMAT === 'com.apple.streamingkeydelivery') {\n                this.manifest.contentProtection = this.manifest.contentProtection || {}; // TODO: add full support for this.\n\n                this.manifest.contentProtection['com.apple.fps.1_0'] = {\n                  attributes: entry.attributes\n                };\n                return;\n              }\n\n              if (entry.attributes.KEYFORMAT === 'com.microsoft.playready') {\n                this.manifest.contentProtection = this.manifest.contentProtection || {}; // TODO: add full support for this.\n\n                this.manifest.contentProtection['com.microsoft.playready'] = {\n                  uri: entry.attributes.URI\n                };\n                return;\n              } // check if the content is encrypted for Widevine\n              // Widevine/HLS spec: https://storage.googleapis.com/wvdocs/Widevine_DRM_HLS.pdf\n\n\n              if (entry.attributes.KEYFORMAT === widevineUuid) {\n                var VALID_METHODS = ['SAMPLE-AES', 'SAMPLE-AES-CTR', 'SAMPLE-AES-CENC'];\n\n                if (VALID_METHODS.indexOf(entry.attributes.METHOD) === -1) {\n                  this.trigger('warn', {\n                    message: 'invalid key method provided for Widevine'\n                  });\n                  return;\n                }\n\n                if (entry.attributes.METHOD === 'SAMPLE-AES-CENC') {\n                  this.trigger('warn', {\n                    message: 'SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead'\n                  });\n                }\n\n                if (entry.attributes.URI.substring(0, 23) !== 'data:text/plain;base64,') {\n                  this.trigger('warn', {\n                    message: 'invalid key URI provided for Widevine'\n                  });\n                  return;\n                }\n\n                if (!(entry.attributes.KEYID && entry.attributes.KEYID.substring(0, 2) === '0x')) {\n                  this.trigger('warn', {\n                    message: 'invalid key ID provided for Widevine'\n                  });\n                  return;\n                } // if Widevine key attributes are valid, store them as `contentProtection`\n                // on the manifest to emulate Widevine tag structure in a DASH mpd\n\n\n                this.manifest.contentProtection = this.manifest.contentProtection || {};\n                this.manifest.contentProtection['com.widevine.alpha'] = {\n                  attributes: {\n                    schemeIdUri: entry.attributes.KEYFORMAT,\n                    // remove '0x' from the key id string\n                    keyId: entry.attributes.KEYID.substring(2)\n                  },\n                  // decode the base64-encoded PSSH box\n                  pssh: decodeB64ToUint8Array(entry.attributes.URI.split(',')[1])\n                };\n                return;\n              }\n\n              if (!entry.attributes.METHOD) {\n                this.trigger('warn', {\n                  message: 'defaulting key method to AES-128'\n                });\n              } // setup an encryption key for upcoming segments\n\n\n              _key = {\n                method: entry.attributes.METHOD || 'AES-128',\n                uri: entry.attributes.URI\n              };\n\n              if (typeof entry.attributes.IV !== 'undefined') {\n                _key.iv = entry.attributes.IV;\n              }\n            },\n            'media-sequence': function mediaSequence() {\n              if (!isFinite(entry.number)) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid media sequence: ' + entry.number\n                });\n                return;\n              }\n\n              this.manifest.mediaSequence = entry.number;\n            },\n            'discontinuity-sequence': function discontinuitySequence() {\n              if (!isFinite(entry.number)) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid discontinuity sequence: ' + entry.number\n                });\n                return;\n              }\n\n              this.manifest.discontinuitySequence = entry.number;\n              currentTimeline = entry.number;\n            },\n            'playlist-type': function playlistType() {\n              if (!/VOD|EVENT/.test(entry.playlistType)) {\n                this.trigger('warn', {\n                  message: 'ignoring unknown playlist type: ' + entry.playlist\n                });\n                return;\n              }\n\n              this.manifest.playlistType = entry.playlistType;\n            },\n            map: function map() {\n              currentMap = {};\n\n              if (entry.uri) {\n                currentMap.uri = entry.uri;\n              }\n\n              if (entry.byterange) {\n                currentMap.byterange = entry.byterange;\n              }\n\n              if (_key) {\n                currentMap.key = _key;\n              }\n            },\n            'stream-inf': function streamInf() {\n              this.manifest.playlists = uris;\n              this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n\n              if (!entry.attributes) {\n                this.trigger('warn', {\n                  message: 'ignoring empty stream-inf attributes'\n                });\n                return;\n              }\n\n              if (!currentUri.attributes) {\n                currentUri.attributes = {};\n              }\n\n              _extends(currentUri.attributes, entry.attributes);\n            },\n            media: function media() {\n              this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n\n              if (!(entry.attributes && entry.attributes.TYPE && entry.attributes['GROUP-ID'] && entry.attributes.NAME)) {\n                this.trigger('warn', {\n                  message: 'ignoring incomplete or missing media group'\n                });\n                return;\n              } // find the media group, creating defaults as necessary\n\n\n              var mediaGroupType = this.manifest.mediaGroups[entry.attributes.TYPE];\n              mediaGroupType[entry.attributes['GROUP-ID']] = mediaGroupType[entry.attributes['GROUP-ID']] || {};\n              mediaGroup = mediaGroupType[entry.attributes['GROUP-ID']]; // collect the rendition metadata\n\n              rendition = {\n                default: /yes/i.test(entry.attributes.DEFAULT)\n              };\n\n              if (rendition.default) {\n                rendition.autoselect = true;\n              } else {\n                rendition.autoselect = /yes/i.test(entry.attributes.AUTOSELECT);\n              }\n\n              if (entry.attributes.LANGUAGE) {\n                rendition.language = entry.attributes.LANGUAGE;\n              }\n\n              if (entry.attributes.URI) {\n                rendition.uri = entry.attributes.URI;\n              }\n\n              if (entry.attributes['INSTREAM-ID']) {\n                rendition.instreamId = entry.attributes['INSTREAM-ID'];\n              }\n\n              if (entry.attributes.CHARACTERISTICS) {\n                rendition.characteristics = entry.attributes.CHARACTERISTICS;\n              }\n\n              if (entry.attributes.FORCED) {\n                rendition.forced = /yes/i.test(entry.attributes.FORCED);\n              } // insert the new rendition\n\n\n              mediaGroup[entry.attributes.NAME] = rendition;\n            },\n            discontinuity: function discontinuity() {\n              currentTimeline += 1;\n              currentUri.discontinuity = true;\n              this.manifest.discontinuityStarts.push(uris.length);\n            },\n            'program-date-time': function programDateTime() {\n              if (typeof this.manifest.dateTimeString === 'undefined') {\n                // PROGRAM-DATE-TIME is a media-segment tag, but for backwards\n                // compatibility, we add the first occurence of the PROGRAM-DATE-TIME tag\n                // to the manifest object\n                // TODO: Consider removing this in future major version\n                this.manifest.dateTimeString = entry.dateTimeString;\n                this.manifest.dateTimeObject = entry.dateTimeObject;\n              }\n\n              currentUri.dateTimeString = entry.dateTimeString;\n              currentUri.dateTimeObject = entry.dateTimeObject;\n            },\n            targetduration: function targetduration() {\n              if (!isFinite(entry.duration) || entry.duration < 0) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid target duration: ' + entry.duration\n                });\n                return;\n              }\n\n              this.manifest.targetDuration = entry.duration;\n              setHoldBack.call(this, this.manifest);\n            },\n            start: function start() {\n              if (!entry.attributes || isNaN(entry.attributes['TIME-OFFSET'])) {\n                this.trigger('warn', {\n                  message: 'ignoring start declaration without appropriate attribute list'\n                });\n                return;\n              }\n\n              this.manifest.start = {\n                timeOffset: entry.attributes['TIME-OFFSET'],\n                precise: entry.attributes.PRECISE\n              };\n            },\n            'cue-out': function cueOut() {\n              currentUri.cueOut = entry.data;\n            },\n            'cue-out-cont': function cueOutCont() {\n              currentUri.cueOutCont = entry.data;\n            },\n            'cue-in': function cueIn() {\n              currentUri.cueIn = entry.data;\n            },\n            'skip': function skip() {\n              this.manifest.skip = camelCaseKeys(entry.attributes);\n              this.warnOnMissingAttributes_('#EXT-X-SKIP', entry.attributes, ['SKIPPED-SEGMENTS']);\n            },\n            'part': function part() {\n              var _this2 = this;\n\n              hasParts = true; // parts are always specifed before a segment\n\n              var segmentIndex = this.manifest.segments.length;\n              var part = camelCaseKeys(entry.attributes);\n              currentUri.parts = currentUri.parts || [];\n              currentUri.parts.push(part);\n\n              if (part.byterange) {\n                if (!part.byterange.hasOwnProperty('offset')) {\n                  part.byterange.offset = lastPartByterangeEnd;\n                }\n\n                lastPartByterangeEnd = part.byterange.offset + part.byterange.length;\n              }\n\n              var partIndex = currentUri.parts.length - 1;\n              this.warnOnMissingAttributes_(\"#EXT-X-PART #\" + partIndex + \" for segment #\" + segmentIndex, entry.attributes, ['URI', 'DURATION']);\n\n              if (this.manifest.renditionReports) {\n                this.manifest.renditionReports.forEach(function (r, i) {\n                  if (!r.hasOwnProperty('lastPart')) {\n                    _this2.trigger('warn', {\n                      message: \"#EXT-X-RENDITION-REPORT #\" + i + \" lacks required attribute(s): LAST-PART\"\n                    });\n                  }\n                });\n              }\n            },\n            'server-control': function serverControl() {\n              var attrs = this.manifest.serverControl = camelCaseKeys(entry.attributes);\n\n              if (!attrs.hasOwnProperty('canBlockReload')) {\n                attrs.canBlockReload = false;\n                this.trigger('info', {\n                  message: '#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false'\n                });\n              }\n\n              setHoldBack.call(this, this.manifest);\n\n              if (attrs.canSkipDateranges && !attrs.hasOwnProperty('canSkipUntil')) {\n                this.trigger('warn', {\n                  message: '#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set'\n                });\n              }\n            },\n            'preload-hint': function preloadHint() {\n              // parts are always specifed before a segment\n              var segmentIndex = this.manifest.segments.length;\n              var hint = camelCaseKeys(entry.attributes);\n              var isPart = hint.type && hint.type === 'PART';\n              currentUri.preloadHints = currentUri.preloadHints || [];\n              currentUri.preloadHints.push(hint);\n\n              if (hint.byterange) {\n                if (!hint.byterange.hasOwnProperty('offset')) {\n                  // use last part byterange end or zero if not a part.\n                  hint.byterange.offset = isPart ? lastPartByterangeEnd : 0;\n\n                  if (isPart) {\n                    lastPartByterangeEnd = hint.byterange.offset + hint.byterange.length;\n                  }\n                }\n              }\n\n              var index = currentUri.preloadHints.length - 1;\n              this.warnOnMissingAttributes_(\"#EXT-X-PRELOAD-HINT #\" + index + \" for segment #\" + segmentIndex, entry.attributes, ['TYPE', 'URI']);\n\n              if (!hint.type) {\n                return;\n              } // search through all preload hints except for the current one for\n              // a duplicate type.\n\n\n              for (var i = 0; i < currentUri.preloadHints.length - 1; i++) {\n                var otherHint = currentUri.preloadHints[i];\n\n                if (!otherHint.type) {\n                  continue;\n                }\n\n                if (otherHint.type === hint.type) {\n                  this.trigger('warn', {\n                    message: \"#EXT-X-PRELOAD-HINT #\" + index + \" for segment #\" + segmentIndex + \" has the same TYPE \" + hint.type + \" as preload hint #\" + i\n                  });\n                }\n              }\n            },\n            'rendition-report': function renditionReport() {\n              var report = camelCaseKeys(entry.attributes);\n              this.manifest.renditionReports = this.manifest.renditionReports || [];\n              this.manifest.renditionReports.push(report);\n              var index = this.manifest.renditionReports.length - 1;\n              var required = ['LAST-MSN', 'URI'];\n\n              if (hasParts) {\n                required.push('LAST-PART');\n              }\n\n              this.warnOnMissingAttributes_(\"#EXT-X-RENDITION-REPORT #\" + index, entry.attributes, required);\n            },\n            'part-inf': function partInf() {\n              this.manifest.partInf = camelCaseKeys(entry.attributes);\n              this.warnOnMissingAttributes_('#EXT-X-PART-INF', entry.attributes, ['PART-TARGET']);\n\n              if (this.manifest.partInf.partTarget) {\n                this.manifest.partTargetDuration = this.manifest.partInf.partTarget;\n              }\n\n              setHoldBack.call(this, this.manifest);\n            }\n          })[entry.tagType] || noop).call(self);\n        },\n        uri: function uri() {\n          currentUri.uri = entry.uri;\n          uris.push(currentUri); // if no explicit duration was declared, use the target duration\n\n          if (this.manifest.targetDuration && !('duration' in currentUri)) {\n            this.trigger('warn', {\n              message: 'defaulting segment duration to the target duration'\n            });\n            currentUri.duration = this.manifest.targetDuration;\n          } // annotate with encryption information, if necessary\n\n\n          if (_key) {\n            currentUri.key = _key;\n          }\n\n          currentUri.timeline = currentTimeline; // annotate with initialization segment information, if necessary\n\n          if (currentMap) {\n            currentUri.map = currentMap;\n          } // reset the last byterange end as it needs to be 0 between parts\n\n\n          lastPartByterangeEnd = 0; // prepare for the next URI\n\n          currentUri = {};\n        },\n        comment: function comment() {// comments are not important for playback\n        },\n        custom: function custom() {\n          // if this is segment-level data attach the output to the segment\n          if (entry.segment) {\n            currentUri.custom = currentUri.custom || {};\n            currentUri.custom[entry.customType] = entry.data; // if this is manifest-level data attach to the top level manifest object\n          } else {\n            this.manifest.custom = this.manifest.custom || {};\n            this.manifest.custom[entry.customType] = entry.data;\n          }\n        }\n      })[entry.type].call(self);\n    });\n\n    return _this;\n  }\n\n  var _proto = Parser.prototype;\n\n  _proto.warnOnMissingAttributes_ = function warnOnMissingAttributes_(identifier, attributes, required) {\n    var missing = [];\n    required.forEach(function (key) {\n      if (!attributes.hasOwnProperty(key)) {\n        missing.push(key);\n      }\n    });\n\n    if (missing.length) {\n      this.trigger('warn', {\n        message: identifier + \" lacks required attribute(s): \" + missing.join(', ')\n      });\n    }\n  }\n  /**\n   * Parse the input string and update the manifest object.\n   *\n   * @param {string} chunk a potentially incomplete portion of the manifest\n   */\n  ;\n\n  _proto.push = function push(chunk) {\n    this.lineStream.push(chunk);\n  }\n  /**\n   * Flush any remaining input. This can be handy if the last line of an M3U8\n   * manifest did not contain a trailing newline but the file has been\n   * completely received.\n   */\n  ;\n\n  _proto.end = function end() {\n    // flush any buffered input\n    this.lineStream.push('\\n');\n    this.trigger('end');\n  }\n  /**\n   * Add an additional parser for non-standard tags\n   *\n   * @param {Object}   options              a map of options for the added parser\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {string}   options.type         the type to register to the output\n   * @param {Function} [options.dataParser] function to parse the line into an object\n   * @param {boolean}  [options.segment]    should tag data be attached to the segment object\n   */\n  ;\n\n  _proto.addParser = function addParser(options) {\n    this.parseStream.addParser(options);\n  }\n  /**\n   * Add a custom header mapper\n   *\n   * @param {Object}   options\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {Function} options.map          function to translate tag into a different tag\n   */\n  ;\n\n  _proto.addTagMapper = function addTagMapper(options) {\n    this.parseStream.addTagMapper(options);\n  };\n\n  return Parser;\n}(Stream);\n\nexport { LineStream, ParseStream, Parser };\n","/*! @name mpd-parser @version 1.0.1 @license Apache-2.0 */\nimport resolveUrl from '@videojs/vhs-utils/es/resolve-url';\nimport window from 'global/window';\nimport { forEachMediaGroup } from '@videojs/vhs-utils/es/media-groups';\nimport decodeB64ToUint8Array from '@videojs/vhs-utils/es/decode-b64-to-uint8-array';\nimport { DOMParser } from '@xmldom/xmldom';\n\nvar version = \"1.0.1\";\n\nconst isObject = obj => {\n  return !!obj && typeof obj === 'object';\n};\n\nconst merge = (...objects) => {\n  return objects.reduce((result, source) => {\n    if (typeof source !== 'object') {\n      return result;\n    }\n\n    Object.keys(source).forEach(key => {\n      if (Array.isArray(result[key]) && Array.isArray(source[key])) {\n        result[key] = result[key].concat(source[key]);\n      } else if (isObject(result[key]) && isObject(source[key])) {\n        result[key] = merge(result[key], source[key]);\n      } else {\n        result[key] = source[key];\n      }\n    });\n    return result;\n  }, {});\n};\nconst values = o => Object.keys(o).map(k => o[k]);\n\nconst range = (start, end) => {\n  const result = [];\n\n  for (let i = start; i < end; i++) {\n    result.push(i);\n  }\n\n  return result;\n};\nconst flatten = lists => lists.reduce((x, y) => x.concat(y), []);\nconst from = list => {\n  if (!list.length) {\n    return [];\n  }\n\n  const result = [];\n\n  for (let i = 0; i < list.length; i++) {\n    result.push(list[i]);\n  }\n\n  return result;\n};\nconst findIndexes = (l, key) => l.reduce((a, e, i) => {\n  if (e[key]) {\n    a.push(i);\n  }\n\n  return a;\n}, []);\n/**\n * Returns a union of the included lists provided each element can be identified by a key.\n *\n * @param {Array} list - list of lists to get the union of\n * @param {Function} keyFunction - the function to use as a key for each element\n *\n * @return {Array} the union of the arrays\n */\n\nconst union = (lists, keyFunction) => {\n  return values(lists.reduce((acc, list) => {\n    list.forEach(el => {\n      acc[keyFunction(el)] = el;\n    });\n    return acc;\n  }, {}));\n};\n\nvar errors = {\n  INVALID_NUMBER_OF_PERIOD: 'INVALID_NUMBER_OF_PERIOD',\n  DASH_EMPTY_MANIFEST: 'DASH_EMPTY_MANIFEST',\n  DASH_INVALID_XML: 'DASH_INVALID_XML',\n  NO_BASE_URL: 'NO_BASE_URL',\n  MISSING_SEGMENT_INFORMATION: 'MISSING_SEGMENT_INFORMATION',\n  SEGMENT_TIME_UNSPECIFIED: 'SEGMENT_TIME_UNSPECIFIED',\n  UNSUPPORTED_UTC_TIMING_SCHEME: 'UNSUPPORTED_UTC_TIMING_SCHEME'\n};\n\n/**\n * @typedef {Object} SingleUri\n * @property {string} uri - relative location of segment\n * @property {string} resolvedUri - resolved location of segment\n * @property {Object} byterange - Object containing information on how to make byte range\n *   requests following byte-range-spec per RFC2616.\n * @property {String} byterange.length - length of range request\n * @property {String} byterange.offset - byte offset of range request\n *\n * @see https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.1\n */\n\n/**\n * Converts a URLType node (5.3.9.2.3 Table 13) to a segment object\n * that conforms to how m3u8-parser is structured\n *\n * @see https://github.com/videojs/m3u8-parser\n *\n * @param {string} baseUrl - baseUrl provided by <BaseUrl> nodes\n * @param {string} source - source url for segment\n * @param {string} range - optional range used for range calls,\n *   follows  RFC 2616, Clause 14.35.1\n * @return {SingleUri} full segment information transformed into a format similar\n *   to m3u8-parser\n */\n\nconst urlTypeToSegment = ({\n  baseUrl = '',\n  source = '',\n  range = '',\n  indexRange = ''\n}) => {\n  const segment = {\n    uri: source,\n    resolvedUri: resolveUrl(baseUrl || '', source)\n  };\n\n  if (range || indexRange) {\n    const rangeStr = range ? range : indexRange;\n    const ranges = rangeStr.split('-'); // default to parsing this as a BigInt if possible\n\n    let startRange = window.BigInt ? window.BigInt(ranges[0]) : parseInt(ranges[0], 10);\n    let endRange = window.BigInt ? window.BigInt(ranges[1]) : parseInt(ranges[1], 10); // convert back to a number if less than MAX_SAFE_INTEGER\n\n    if (startRange < Number.MAX_SAFE_INTEGER && typeof startRange === 'bigint') {\n      startRange = Number(startRange);\n    }\n\n    if (endRange < Number.MAX_SAFE_INTEGER && typeof endRange === 'bigint') {\n      endRange = Number(endRange);\n    }\n\n    let length;\n\n    if (typeof endRange === 'bigint' || typeof startRange === 'bigint') {\n      length = window.BigInt(endRange) - window.BigInt(startRange) + window.BigInt(1);\n    } else {\n      length = endRange - startRange + 1;\n    }\n\n    if (typeof length === 'bigint' && length < Number.MAX_SAFE_INTEGER) {\n      length = Number(length);\n    } // byterange should be inclusive according to\n    // RFC 2616, Clause 14.35.1\n\n\n    segment.byterange = {\n      length,\n      offset: startRange\n    };\n  }\n\n  return segment;\n};\nconst byteRangeToString = byterange => {\n  // `endRange` is one less than `offset + length` because the HTTP range\n  // header uses inclusive ranges\n  let endRange;\n\n  if (typeof byterange.offset === 'bigint' || typeof byterange.length === 'bigint') {\n    endRange = window.BigInt(byterange.offset) + window.BigInt(byterange.length) - window.BigInt(1);\n  } else {\n    endRange = byterange.offset + byterange.length - 1;\n  }\n\n  return `${byterange.offset}-${endRange}`;\n};\n\n/**\n * parse the end number attribue that can be a string\n * number, or undefined.\n *\n * @param {string|number|undefined} endNumber\n *        The end number attribute.\n *\n * @return {number|null}\n *          The result of parsing the end number.\n */\n\nconst parseEndNumber = endNumber => {\n  if (endNumber && typeof endNumber !== 'number') {\n    endNumber = parseInt(endNumber, 10);\n  }\n\n  if (isNaN(endNumber)) {\n    return null;\n  }\n\n  return endNumber;\n};\n/**\n * Functions for calculating the range of available segments in static and dynamic\n * manifests.\n */\n\n\nconst segmentRange = {\n  /**\n   * Returns the entire range of available segments for a static MPD\n   *\n   * @param {Object} attributes\n   *        Inheritied MPD attributes\n   * @return {{ start: number, end: number }}\n   *         The start and end numbers for available segments\n   */\n  static(attributes) {\n    const {\n      duration,\n      timescale = 1,\n      sourceDuration,\n      periodDuration\n    } = attributes;\n    const endNumber = parseEndNumber(attributes.endNumber);\n    const segmentDuration = duration / timescale;\n\n    if (typeof endNumber === 'number') {\n      return {\n        start: 0,\n        end: endNumber\n      };\n    }\n\n    if (typeof periodDuration === 'number') {\n      return {\n        start: 0,\n        end: periodDuration / segmentDuration\n      };\n    }\n\n    return {\n      start: 0,\n      end: sourceDuration / segmentDuration\n    };\n  },\n\n  /**\n   * Returns the current live window range of available segments for a dynamic MPD\n   *\n   * @param {Object} attributes\n   *        Inheritied MPD attributes\n   * @return {{ start: number, end: number }}\n   *         The start and end numbers for available segments\n   */\n  dynamic(attributes) {\n    const {\n      NOW,\n      clientOffset,\n      availabilityStartTime,\n      timescale = 1,\n      duration,\n      periodStart = 0,\n      minimumUpdatePeriod = 0,\n      timeShiftBufferDepth = Infinity\n    } = attributes;\n    const endNumber = parseEndNumber(attributes.endNumber); // clientOffset is passed in at the top level of mpd-parser and is an offset calculated\n    // after retrieving UTC server time.\n\n    const now = (NOW + clientOffset) / 1000; // WC stands for Wall Clock.\n    // Convert the period start time to EPOCH.\n\n    const periodStartWC = availabilityStartTime + periodStart; // Period end in EPOCH is manifest's retrieval time + time until next update.\n\n    const periodEndWC = now + minimumUpdatePeriod;\n    const periodDuration = periodEndWC - periodStartWC;\n    const segmentCount = Math.ceil(periodDuration * timescale / duration);\n    const availableStart = Math.floor((now - periodStartWC - timeShiftBufferDepth) * timescale / duration);\n    const availableEnd = Math.floor((now - periodStartWC) * timescale / duration);\n    return {\n      start: Math.max(0, availableStart),\n      end: typeof endNumber === 'number' ? endNumber : Math.min(segmentCount, availableEnd)\n    };\n  }\n\n};\n/**\n * Maps a range of numbers to objects with information needed to build the corresponding\n * segment list\n *\n * @name toSegmentsCallback\n * @function\n * @param {number} number\n *        Number of the segment\n * @param {number} index\n *        Index of the number in the range list\n * @return {{ number: Number, duration: Number, timeline: Number, time: Number }}\n *         Object with segment timing and duration info\n */\n\n/**\n * Returns a callback for Array.prototype.map for mapping a range of numbers to\n * information needed to build the segment list.\n *\n * @param {Object} attributes\n *        Inherited MPD attributes\n * @return {toSegmentsCallback}\n *         Callback map function\n */\n\nconst toSegments = attributes => number => {\n  const {\n    duration,\n    timescale = 1,\n    periodStart,\n    startNumber = 1\n  } = attributes;\n  return {\n    number: startNumber + number,\n    duration: duration / timescale,\n    timeline: periodStart,\n    time: number * duration\n  };\n};\n/**\n * Returns a list of objects containing segment timing and duration info used for\n * building the list of segments. This uses the @duration attribute specified\n * in the MPD manifest to derive the range of segments.\n *\n * @param {Object} attributes\n *        Inherited MPD attributes\n * @return {{number: number, duration: number, time: number, timeline: number}[]}\n *         List of Objects with segment timing and duration info\n */\n\nconst parseByDuration = attributes => {\n  const {\n    type,\n    duration,\n    timescale = 1,\n    periodDuration,\n    sourceDuration\n  } = attributes;\n  const {\n    start,\n    end\n  } = segmentRange[type](attributes);\n  const segments = range(start, end).map(toSegments(attributes));\n\n  if (type === 'static') {\n    const index = segments.length - 1; // section is either a period or the full source\n\n    const sectionDuration = typeof periodDuration === 'number' ? periodDuration : sourceDuration; // final segment may be less than full segment duration\n\n    segments[index].duration = sectionDuration - duration / timescale * index;\n  }\n\n  return segments;\n};\n\n/**\n * Translates SegmentBase into a set of segments.\n * (DASH SPEC Section 5.3.9.3.2) contains a set of <SegmentURL> nodes.  Each\n * node should be translated into segment.\n *\n * @param {Object} attributes\n *   Object containing all inherited attributes from parent elements with attribute\n *   names as keys\n * @return {Object.<Array>} list of segments\n */\n\nconst segmentsFromBase = attributes => {\n  const {\n    baseUrl,\n    initialization = {},\n    sourceDuration,\n    indexRange = '',\n    periodStart,\n    presentationTime,\n    number = 0,\n    duration\n  } = attributes; // base url is required for SegmentBase to work, per spec (Section 5.3.9.2.1)\n\n  if (!baseUrl) {\n    throw new Error(errors.NO_BASE_URL);\n  }\n\n  const initSegment = urlTypeToSegment({\n    baseUrl,\n    source: initialization.sourceURL,\n    range: initialization.range\n  });\n  const segment = urlTypeToSegment({\n    baseUrl,\n    source: baseUrl,\n    indexRange\n  });\n  segment.map = initSegment; // If there is a duration, use it, otherwise use the given duration of the source\n  // (since SegmentBase is only for one total segment)\n\n  if (duration) {\n    const segmentTimeInfo = parseByDuration(attributes);\n\n    if (segmentTimeInfo.length) {\n      segment.duration = segmentTimeInfo[0].duration;\n      segment.timeline = segmentTimeInfo[0].timeline;\n    }\n  } else if (sourceDuration) {\n    segment.duration = sourceDuration;\n    segment.timeline = periodStart;\n  } // If presentation time is provided, these segments are being generated by SIDX\n  // references, and should use the time provided. For the general case of SegmentBase,\n  // there should only be one segment in the period, so its presentation time is the same\n  // as its period start.\n\n\n  segment.presentationTime = presentationTime || periodStart;\n  segment.number = number;\n  return [segment];\n};\n/**\n * Given a playlist, a sidx box, and a baseUrl, update the segment list of the playlist\n * according to the sidx information given.\n *\n * playlist.sidx has metadadata about the sidx where-as the sidx param\n * is the parsed sidx box itself.\n *\n * @param {Object} playlist the playlist to update the sidx information for\n * @param {Object} sidx the parsed sidx box\n * @return {Object} the playlist object with the updated sidx information\n */\n\nconst addSidxSegmentsToPlaylist$1 = (playlist, sidx, baseUrl) => {\n  // Retain init segment information\n  const initSegment = playlist.sidx.map ? playlist.sidx.map : null; // Retain source duration from initial main manifest parsing\n\n  const sourceDuration = playlist.sidx.duration; // Retain source timeline\n\n  const timeline = playlist.timeline || 0;\n  const sidxByteRange = playlist.sidx.byterange;\n  const sidxEnd = sidxByteRange.offset + sidxByteRange.length; // Retain timescale of the parsed sidx\n\n  const timescale = sidx.timescale; // referenceType 1 refers to other sidx boxes\n\n  const mediaReferences = sidx.references.filter(r => r.referenceType !== 1);\n  const segments = [];\n  const type = playlist.endList ? 'static' : 'dynamic';\n  const periodStart = playlist.sidx.timeline;\n  let presentationTime = periodStart;\n  let number = playlist.mediaSequence || 0; // firstOffset is the offset from the end of the sidx box\n\n  let startIndex; // eslint-disable-next-line\n\n  if (typeof sidx.firstOffset === 'bigint') {\n    startIndex = window.BigInt(sidxEnd) + sidx.firstOffset;\n  } else {\n    startIndex = sidxEnd + sidx.firstOffset;\n  }\n\n  for (let i = 0; i < mediaReferences.length; i++) {\n    const reference = sidx.references[i]; // size of the referenced (sub)segment\n\n    const size = reference.referencedSize; // duration of the referenced (sub)segment, in  the  timescale\n    // this will be converted to seconds when generating segments\n\n    const duration = reference.subsegmentDuration; // should be an inclusive range\n\n    let endIndex; // eslint-disable-next-line\n\n    if (typeof startIndex === 'bigint') {\n      endIndex = startIndex + window.BigInt(size) - window.BigInt(1);\n    } else {\n      endIndex = startIndex + size - 1;\n    }\n\n    const indexRange = `${startIndex}-${endIndex}`;\n    const attributes = {\n      baseUrl,\n      timescale,\n      timeline,\n      periodStart,\n      presentationTime,\n      number,\n      duration,\n      sourceDuration,\n      indexRange,\n      type\n    };\n    const segment = segmentsFromBase(attributes)[0];\n\n    if (initSegment) {\n      segment.map = initSegment;\n    }\n\n    segments.push(segment);\n\n    if (typeof startIndex === 'bigint') {\n      startIndex += window.BigInt(size);\n    } else {\n      startIndex += size;\n    }\n\n    presentationTime += duration / timescale;\n    number++;\n  }\n\n  playlist.segments = segments;\n  return playlist;\n};\n\nconst SUPPORTED_MEDIA_TYPES = ['AUDIO', 'SUBTITLES']; // allow one 60fps frame as leniency (arbitrarily chosen)\n\nconst TIME_FUDGE = 1 / 60;\n/**\n * Given a list of timelineStarts, combines, dedupes, and sorts them.\n *\n * @param {TimelineStart[]} timelineStarts - list of timeline starts\n *\n * @return {TimelineStart[]} the combined and deduped timeline starts\n */\n\nconst getUniqueTimelineStarts = timelineStarts => {\n  return union(timelineStarts, ({\n    timeline\n  }) => timeline).sort((a, b) => a.timeline > b.timeline ? 1 : -1);\n};\n/**\n * Finds the playlist with the matching NAME attribute.\n *\n * @param {Array} playlists - playlists to search through\n * @param {string} name - the NAME attribute to search for\n *\n * @return {Object|null} the matching playlist object, or null\n */\n\nconst findPlaylistWithName = (playlists, name) => {\n  for (let i = 0; i < playlists.length; i++) {\n    if (playlists[i].attributes.NAME === name) {\n      return playlists[i];\n    }\n  }\n\n  return null;\n};\n/**\n * Gets a flattened array of media group playlists.\n *\n * @param {Object} manifest - the main manifest object\n *\n * @return {Array} the media group playlists\n */\n\nconst getMediaGroupPlaylists = manifest => {\n  let mediaGroupPlaylists = [];\n  forEachMediaGroup(manifest, SUPPORTED_MEDIA_TYPES, (properties, type, group, label) => {\n    mediaGroupPlaylists = mediaGroupPlaylists.concat(properties.playlists || []);\n  });\n  return mediaGroupPlaylists;\n};\n/**\n * Updates the playlist's media sequence numbers.\n *\n * @param {Object} config - options object\n * @param {Object} config.playlist - the playlist to update\n * @param {number} config.mediaSequence - the mediaSequence number to start with\n */\n\nconst updateMediaSequenceForPlaylist = ({\n  playlist,\n  mediaSequence\n}) => {\n  playlist.mediaSequence = mediaSequence;\n  playlist.segments.forEach((segment, index) => {\n    segment.number = playlist.mediaSequence + index;\n  });\n};\n/**\n * Updates the media and discontinuity sequence numbers of newPlaylists given oldPlaylists\n * and a complete list of timeline starts.\n *\n * If no matching playlist is found, only the discontinuity sequence number of the playlist\n * will be updated.\n *\n * Since early available timelines are not supported, at least one segment must be present.\n *\n * @param {Object} config - options object\n * @param {Object[]} oldPlaylists - the old playlists to use as a reference\n * @param {Object[]} newPlaylists - the new playlists to update\n * @param {Object} timelineStarts - all timelineStarts seen in the stream to this point\n */\n\nconst updateSequenceNumbers = ({\n  oldPlaylists,\n  newPlaylists,\n  timelineStarts\n}) => {\n  newPlaylists.forEach(playlist => {\n    playlist.discontinuitySequence = timelineStarts.findIndex(function ({\n      timeline\n    }) {\n      return timeline === playlist.timeline;\n    }); // Playlists NAMEs come from DASH Representation IDs, which are mandatory\n    // (see ISO_23009-1-2012 5.3.5.2).\n    //\n    // If the same Representation existed in a prior Period, it will retain the same NAME.\n\n    const oldPlaylist = findPlaylistWithName(oldPlaylists, playlist.attributes.NAME);\n\n    if (!oldPlaylist) {\n      // Since this is a new playlist, the media sequence values can start from 0 without\n      // consequence.\n      return;\n    } // TODO better support for live SIDX\n    //\n    // As of this writing, mpd-parser does not support multiperiod SIDX (in live or VOD).\n    // This is evident by a playlist only having a single SIDX reference. In a multiperiod\n    // playlist there would need to be multiple SIDX references. In addition, live SIDX is\n    // not supported when the SIDX properties change on refreshes.\n    //\n    // In the future, if support needs to be added, the merging logic here can be called\n    // after SIDX references are resolved. For now, exit early to prevent exceptions being\n    // thrown due to undefined references.\n\n\n    if (playlist.sidx) {\n      return;\n    } // Since we don't yet support early available timelines, we don't need to support\n    // playlists with no segments.\n\n\n    const firstNewSegment = playlist.segments[0];\n    const oldMatchingSegmentIndex = oldPlaylist.segments.findIndex(function (oldSegment) {\n      return Math.abs(oldSegment.presentationTime - firstNewSegment.presentationTime) < TIME_FUDGE;\n    }); // No matching segment from the old playlist means the entire playlist was refreshed.\n    // In this case the media sequence should account for this update, and the new segments\n    // should be marked as discontinuous from the prior content, since the last prior\n    // timeline was removed.\n\n    if (oldMatchingSegmentIndex === -1) {\n      updateMediaSequenceForPlaylist({\n        playlist,\n        mediaSequence: oldPlaylist.mediaSequence + oldPlaylist.segments.length\n      });\n      playlist.segments[0].discontinuity = true;\n      playlist.discontinuityStarts.unshift(0); // No matching segment does not necessarily mean there's missing content.\n      //\n      // If the new playlist's timeline is the same as the last seen segment's timeline,\n      // then a discontinuity can be added to identify that there's potentially missing\n      // content. If there's no missing content, the discontinuity should still be rather\n      // harmless. It's possible that if segment durations are accurate enough, that the\n      // existence of a gap can be determined using the presentation times and durations,\n      // but if the segment timing info is off, it may introduce more problems than simply\n      // adding the discontinuity.\n      //\n      // If the new playlist's timeline is different from the last seen segment's timeline,\n      // then a discontinuity can be added to identify that this is the first seen segment\n      // of a new timeline. However, the logic at the start of this function that\n      // determined the disconinuity sequence by timeline index is now off by one (the\n      // discontinuity of the newest timeline hasn't yet fallen off the manifest...since\n      // we added it), so the disconinuity sequence must be decremented.\n      //\n      // A period may also have a duration of zero, so the case of no segments is handled\n      // here even though we don't yet support early available periods.\n\n      if (!oldPlaylist.segments.length && playlist.timeline > oldPlaylist.timeline || oldPlaylist.segments.length && playlist.timeline > oldPlaylist.segments[oldPlaylist.segments.length - 1].timeline) {\n        playlist.discontinuitySequence--;\n      }\n\n      return;\n    } // If the first segment matched with a prior segment on a discontinuity (it's matching\n    // on the first segment of a period), then the discontinuitySequence shouldn't be the\n    // timeline's matching one, but instead should be the one prior, and the first segment\n    // of the new manifest should be marked with a discontinuity.\n    //\n    // The reason for this special case is that discontinuity sequence shows how many\n    // discontinuities have fallen off of the playlist, and discontinuities are marked on\n    // the first segment of a new \"timeline.\" Because of this, while DASH will retain that\n    // Period while the \"timeline\" exists, HLS keeps track of it via the discontinuity\n    // sequence, and that first segment is an indicator, but can be removed before that\n    // timeline is gone.\n\n\n    const oldMatchingSegment = oldPlaylist.segments[oldMatchingSegmentIndex];\n\n    if (oldMatchingSegment.discontinuity && !firstNewSegment.discontinuity) {\n      firstNewSegment.discontinuity = true;\n      playlist.discontinuityStarts.unshift(0);\n      playlist.discontinuitySequence--;\n    }\n\n    updateMediaSequenceForPlaylist({\n      playlist,\n      mediaSequence: oldPlaylist.segments[oldMatchingSegmentIndex].number\n    });\n  });\n};\n/**\n * Given an old parsed manifest object and a new parsed manifest object, updates the\n * sequence and timing values within the new manifest to ensure that it lines up with the\n * old.\n *\n * @param {Array} oldManifest - the old main manifest object\n * @param {Array} newManifest - the new main manifest object\n *\n * @return {Object} the updated new manifest object\n */\n\nconst positionManifestOnTimeline = ({\n  oldManifest,\n  newManifest\n}) => {\n  // Starting from v4.1.2 of the IOP, section 4.4.3.3 states:\n  //\n  // \"MPD@availabilityStartTime and Period@start shall not be changed over MPD updates.\"\n  //\n  // This was added from https://github.com/Dash-Industry-Forum/DASH-IF-IOP/issues/160\n  //\n  // Because of this change, and the difficulty of supporting periods with changing start\n  // times, periods with changing start times are not supported. This makes the logic much\n  // simpler, since periods with the same start time can be considerred the same period\n  // across refreshes.\n  //\n  // To give an example as to the difficulty of handling periods where the start time may\n  // change, if a single period manifest is refreshed with another manifest with a single\n  // period, and both the start and end times are increased, then the only way to determine\n  // if it's a new period or an old one that has changed is to look through the segments of\n  // each playlist and determine the presentation time bounds to find a match. In addition,\n  // if the period start changed to exceed the old period end, then there would be no\n  // match, and it would not be possible to determine whether the refreshed period is a new\n  // one or the old one.\n  const oldPlaylists = oldManifest.playlists.concat(getMediaGroupPlaylists(oldManifest));\n  const newPlaylists = newManifest.playlists.concat(getMediaGroupPlaylists(newManifest)); // Save all seen timelineStarts to the new manifest. Although this potentially means that\n  // there's a \"memory leak\" in that it will never stop growing, in reality, only a couple\n  // of properties are saved for each seen Period. Even long running live streams won't\n  // generate too many Periods, unless the stream is watched for decades. In the future,\n  // this can be optimized by mapping to discontinuity sequence numbers for each timeline,\n  // but it may not become an issue, and the additional info can be useful for debugging.\n\n  newManifest.timelineStarts = getUniqueTimelineStarts([oldManifest.timelineStarts, newManifest.timelineStarts]);\n  updateSequenceNumbers({\n    oldPlaylists,\n    newPlaylists,\n    timelineStarts: newManifest.timelineStarts\n  });\n  return newManifest;\n};\n\nconst generateSidxKey = sidx => sidx && sidx.uri + '-' + byteRangeToString(sidx.byterange);\n\nconst mergeDiscontiguousPlaylists = playlists => {\n  const mergedPlaylists = values(playlists.reduce((acc, playlist) => {\n    // assuming playlist IDs are the same across periods\n    // TODO: handle multiperiod where representation sets are not the same\n    // across periods\n    const name = playlist.attributes.id + (playlist.attributes.lang || '');\n\n    if (!acc[name]) {\n      // First Period\n      acc[name] = playlist;\n      acc[name].attributes.timelineStarts = [];\n    } else {\n      // Subsequent Periods\n      if (playlist.segments) {\n        // first segment of subsequent periods signal a discontinuity\n        if (playlist.segments[0]) {\n          playlist.segments[0].discontinuity = true;\n        }\n\n        acc[name].segments.push(...playlist.segments);\n      } // bubble up contentProtection, this assumes all DRM content\n      // has the same contentProtection\n\n\n      if (playlist.attributes.contentProtection) {\n        acc[name].attributes.contentProtection = playlist.attributes.contentProtection;\n      }\n    }\n\n    acc[name].attributes.timelineStarts.push({\n      // Although they represent the same number, it's important to have both to make it\n      // compatible with HLS potentially having a similar attribute.\n      start: playlist.attributes.periodStart,\n      timeline: playlist.attributes.periodStart\n    });\n    return acc;\n  }, {}));\n  return mergedPlaylists.map(playlist => {\n    playlist.discontinuityStarts = findIndexes(playlist.segments || [], 'discontinuity');\n    return playlist;\n  });\n};\n\nconst addSidxSegmentsToPlaylist = (playlist, sidxMapping) => {\n  const sidxKey = generateSidxKey(playlist.sidx);\n  const sidxMatch = sidxKey && sidxMapping[sidxKey] && sidxMapping[sidxKey].sidx;\n\n  if (sidxMatch) {\n    addSidxSegmentsToPlaylist$1(playlist, sidxMatch, playlist.sidx.resolvedUri);\n  }\n\n  return playlist;\n};\nconst addSidxSegmentsToPlaylists = (playlists, sidxMapping = {}) => {\n  if (!Object.keys(sidxMapping).length) {\n    return playlists;\n  }\n\n  for (const i in playlists) {\n    playlists[i] = addSidxSegmentsToPlaylist(playlists[i], sidxMapping);\n  }\n\n  return playlists;\n};\nconst formatAudioPlaylist = ({\n  attributes,\n  segments,\n  sidx,\n  mediaSequence,\n  discontinuitySequence,\n  discontinuityStarts\n}, isAudioOnly) => {\n  const playlist = {\n    attributes: {\n      NAME: attributes.id,\n      BANDWIDTH: attributes.bandwidth,\n      CODECS: attributes.codecs,\n      ['PROGRAM-ID']: 1\n    },\n    uri: '',\n    endList: attributes.type === 'static',\n    timeline: attributes.periodStart,\n    resolvedUri: '',\n    targetDuration: attributes.duration,\n    discontinuitySequence,\n    discontinuityStarts,\n    timelineStarts: attributes.timelineStarts,\n    mediaSequence,\n    segments\n  };\n\n  if (attributes.contentProtection) {\n    playlist.contentProtection = attributes.contentProtection;\n  }\n\n  if (sidx) {\n    playlist.sidx = sidx;\n  }\n\n  if (isAudioOnly) {\n    playlist.attributes.AUDIO = 'audio';\n    playlist.attributes.SUBTITLES = 'subs';\n  }\n\n  return playlist;\n};\nconst formatVttPlaylist = ({\n  attributes,\n  segments,\n  mediaSequence,\n  discontinuityStarts,\n  discontinuitySequence\n}) => {\n  if (typeof segments === 'undefined') {\n    // vtt tracks may use single file in BaseURL\n    segments = [{\n      uri: attributes.baseUrl,\n      timeline: attributes.periodStart,\n      resolvedUri: attributes.baseUrl || '',\n      duration: attributes.sourceDuration,\n      number: 0\n    }]; // targetDuration should be the same duration as the only segment\n\n    attributes.duration = attributes.sourceDuration;\n  }\n\n  const m3u8Attributes = {\n    NAME: attributes.id,\n    BANDWIDTH: attributes.bandwidth,\n    ['PROGRAM-ID']: 1\n  };\n\n  if (attributes.codecs) {\n    m3u8Attributes.CODECS = attributes.codecs;\n  }\n\n  return {\n    attributes: m3u8Attributes,\n    uri: '',\n    endList: attributes.type === 'static',\n    timeline: attributes.periodStart,\n    resolvedUri: attributes.baseUrl || '',\n    targetDuration: attributes.duration,\n    timelineStarts: attributes.timelineStarts,\n    discontinuityStarts,\n    discontinuitySequence,\n    mediaSequence,\n    segments\n  };\n};\nconst organizeAudioPlaylists = (playlists, sidxMapping = {}, isAudioOnly = false) => {\n  let mainPlaylist;\n  const formattedPlaylists = playlists.reduce((a, playlist) => {\n    const role = playlist.attributes.role && playlist.attributes.role.value || '';\n    const language = playlist.attributes.lang || '';\n    let label = playlist.attributes.label || 'main';\n\n    if (language && !playlist.attributes.label) {\n      const roleLabel = role ? ` (${role})` : '';\n      label = `${playlist.attributes.lang}${roleLabel}`;\n    }\n\n    if (!a[label]) {\n      a[label] = {\n        language,\n        autoselect: true,\n        default: role === 'main',\n        playlists: [],\n        uri: ''\n      };\n    }\n\n    const formatted = addSidxSegmentsToPlaylist(formatAudioPlaylist(playlist, isAudioOnly), sidxMapping);\n    a[label].playlists.push(formatted);\n\n    if (typeof mainPlaylist === 'undefined' && role === 'main') {\n      mainPlaylist = playlist;\n      mainPlaylist.default = true;\n    }\n\n    return a;\n  }, {}); // if no playlists have role \"main\", mark the first as main\n\n  if (!mainPlaylist) {\n    const firstLabel = Object.keys(formattedPlaylists)[0];\n    formattedPlaylists[firstLabel].default = true;\n  }\n\n  return formattedPlaylists;\n};\nconst organizeVttPlaylists = (playlists, sidxMapping = {}) => {\n  return playlists.reduce((a, playlist) => {\n    const label = playlist.attributes.lang || 'text';\n\n    if (!a[label]) {\n      a[label] = {\n        language: label,\n        default: false,\n        autoselect: false,\n        playlists: [],\n        uri: ''\n      };\n    }\n\n    a[label].playlists.push(addSidxSegmentsToPlaylist(formatVttPlaylist(playlist), sidxMapping));\n    return a;\n  }, {});\n};\n\nconst organizeCaptionServices = captionServices => captionServices.reduce((svcObj, svc) => {\n  if (!svc) {\n    return svcObj;\n  }\n\n  svc.forEach(service => {\n    const {\n      channel,\n      language\n    } = service;\n    svcObj[language] = {\n      autoselect: false,\n      default: false,\n      instreamId: channel,\n      language\n    };\n\n    if (service.hasOwnProperty('aspectRatio')) {\n      svcObj[language].aspectRatio = service.aspectRatio;\n    }\n\n    if (service.hasOwnProperty('easyReader')) {\n      svcObj[language].easyReader = service.easyReader;\n    }\n\n    if (service.hasOwnProperty('3D')) {\n      svcObj[language]['3D'] = service['3D'];\n    }\n  });\n  return svcObj;\n}, {});\n\nconst formatVideoPlaylist = ({\n  attributes,\n  segments,\n  sidx,\n  discontinuityStarts\n}) => {\n  const playlist = {\n    attributes: {\n      NAME: attributes.id,\n      AUDIO: 'audio',\n      SUBTITLES: 'subs',\n      RESOLUTION: {\n        width: attributes.width,\n        height: attributes.height\n      },\n      CODECS: attributes.codecs,\n      BANDWIDTH: attributes.bandwidth,\n      ['PROGRAM-ID']: 1\n    },\n    uri: '',\n    endList: attributes.type === 'static',\n    timeline: attributes.periodStart,\n    resolvedUri: '',\n    targetDuration: attributes.duration,\n    discontinuityStarts,\n    timelineStarts: attributes.timelineStarts,\n    segments\n  };\n\n  if (attributes.frameRate) {\n    playlist.attributes['FRAME-RATE'] = attributes.frameRate;\n  }\n\n  if (attributes.contentProtection) {\n    playlist.contentProtection = attributes.contentProtection;\n  }\n\n  if (sidx) {\n    playlist.sidx = sidx;\n  }\n\n  return playlist;\n};\n\nconst videoOnly = ({\n  attributes\n}) => attributes.mimeType === 'video/mp4' || attributes.mimeType === 'video/webm' || attributes.contentType === 'video';\n\nconst audioOnly = ({\n  attributes\n}) => attributes.mimeType === 'audio/mp4' || attributes.mimeType === 'audio/webm' || attributes.contentType === 'audio';\n\nconst vttOnly = ({\n  attributes\n}) => attributes.mimeType === 'text/vtt' || attributes.contentType === 'text';\n/**\n * Contains start and timeline properties denoting a timeline start. For DASH, these will\n * be the same number.\n *\n * @typedef {Object} TimelineStart\n * @property {number} start - the start time of the timeline\n * @property {number} timeline - the timeline number\n */\n\n/**\n * Adds appropriate media and discontinuity sequence values to the segments and playlists.\n *\n * Throughout mpd-parser, the `number` attribute is used in relation to `startNumber`, a\n * DASH specific attribute used in constructing segment URI's from templates. However, from\n * an HLS perspective, the `number` attribute on a segment would be its `mediaSequence`\n * value, which should start at the original media sequence value (or 0) and increment by 1\n * for each segment thereafter. Since DASH's `startNumber` values are independent per\n * period, it doesn't make sense to use it for `number`. Instead, assume everything starts\n * from a 0 mediaSequence value and increment from there.\n *\n * Note that VHS currently doesn't use the `number` property, but it can be helpful for\n * debugging and making sense of the manifest.\n *\n * For live playlists, to account for values increasing in manifests when periods are\n * removed on refreshes, merging logic should be used to update the numbers to their\n * appropriate values (to ensure they're sequential and increasing).\n *\n * @param {Object[]} playlists - the playlists to update\n * @param {TimelineStart[]} timelineStarts - the timeline starts for the manifest\n */\n\n\nconst addMediaSequenceValues = (playlists, timelineStarts) => {\n  // increment all segments sequentially\n  playlists.forEach(playlist => {\n    playlist.mediaSequence = 0;\n    playlist.discontinuitySequence = timelineStarts.findIndex(function ({\n      timeline\n    }) {\n      return timeline === playlist.timeline;\n    });\n\n    if (!playlist.segments) {\n      return;\n    }\n\n    playlist.segments.forEach((segment, index) => {\n      segment.number = index;\n    });\n  });\n};\n/**\n * Given a media group object, flattens all playlists within the media group into a single\n * array.\n *\n * @param {Object} mediaGroupObject - the media group object\n *\n * @return {Object[]}\n *         The media group playlists\n */\n\nconst flattenMediaGroupPlaylists = mediaGroupObject => {\n  if (!mediaGroupObject) {\n    return [];\n  }\n\n  return Object.keys(mediaGroupObject).reduce((acc, label) => {\n    const labelContents = mediaGroupObject[label];\n    return acc.concat(labelContents.playlists);\n  }, []);\n};\nconst toM3u8 = ({\n  dashPlaylists,\n  locations,\n  sidxMapping = {},\n  previousManifest\n}) => {\n  if (!dashPlaylists.length) {\n    return {};\n  } // grab all main manifest attributes\n\n\n  const {\n    sourceDuration: duration,\n    type,\n    suggestedPresentationDelay,\n    minimumUpdatePeriod\n  } = dashPlaylists[0].attributes;\n  const videoPlaylists = mergeDiscontiguousPlaylists(dashPlaylists.filter(videoOnly)).map(formatVideoPlaylist);\n  const audioPlaylists = mergeDiscontiguousPlaylists(dashPlaylists.filter(audioOnly));\n  const vttPlaylists = mergeDiscontiguousPlaylists(dashPlaylists.filter(vttOnly));\n  const captions = dashPlaylists.map(playlist => playlist.attributes.captionServices).filter(Boolean);\n  const manifest = {\n    allowCache: true,\n    discontinuityStarts: [],\n    segments: [],\n    endList: true,\n    mediaGroups: {\n      AUDIO: {},\n      VIDEO: {},\n      ['CLOSED-CAPTIONS']: {},\n      SUBTITLES: {}\n    },\n    uri: '',\n    duration,\n    playlists: addSidxSegmentsToPlaylists(videoPlaylists, sidxMapping)\n  };\n\n  if (minimumUpdatePeriod >= 0) {\n    manifest.minimumUpdatePeriod = minimumUpdatePeriod * 1000;\n  }\n\n  if (locations) {\n    manifest.locations = locations;\n  }\n\n  if (type === 'dynamic') {\n    manifest.suggestedPresentationDelay = suggestedPresentationDelay;\n  }\n\n  const isAudioOnly = manifest.playlists.length === 0;\n  const organizedAudioGroup = audioPlaylists.length ? organizeAudioPlaylists(audioPlaylists, sidxMapping, isAudioOnly) : null;\n  const organizedVttGroup = vttPlaylists.length ? organizeVttPlaylists(vttPlaylists, sidxMapping) : null;\n  const formattedPlaylists = videoPlaylists.concat(flattenMediaGroupPlaylists(organizedAudioGroup), flattenMediaGroupPlaylists(organizedVttGroup));\n  const playlistTimelineStarts = formattedPlaylists.map(({\n    timelineStarts\n  }) => timelineStarts);\n  manifest.timelineStarts = getUniqueTimelineStarts(playlistTimelineStarts);\n  addMediaSequenceValues(formattedPlaylists, manifest.timelineStarts);\n\n  if (organizedAudioGroup) {\n    manifest.mediaGroups.AUDIO.audio = organizedAudioGroup;\n  }\n\n  if (organizedVttGroup) {\n    manifest.mediaGroups.SUBTITLES.subs = organizedVttGroup;\n  }\n\n  if (captions.length) {\n    manifest.mediaGroups['CLOSED-CAPTIONS'].cc = organizeCaptionServices(captions);\n  }\n\n  if (previousManifest) {\n    return positionManifestOnTimeline({\n      oldManifest: previousManifest,\n      newManifest: manifest\n    });\n  }\n\n  return manifest;\n};\n\n/**\n * Calculates the R (repetition) value for a live stream (for the final segment\n * in a manifest where the r value is negative 1)\n *\n * @param {Object} attributes\n *        Object containing all inherited attributes from parent elements with attribute\n *        names as keys\n * @param {number} time\n *        current time (typically the total time up until the final segment)\n * @param {number} duration\n *        duration property for the given <S />\n *\n * @return {number}\n *        R value to reach the end of the given period\n */\nconst getLiveRValue = (attributes, time, duration) => {\n  const {\n    NOW,\n    clientOffset,\n    availabilityStartTime,\n    timescale = 1,\n    periodStart = 0,\n    minimumUpdatePeriod = 0\n  } = attributes;\n  const now = (NOW + clientOffset) / 1000;\n  const periodStartWC = availabilityStartTime + periodStart;\n  const periodEndWC = now + minimumUpdatePeriod;\n  const periodDuration = periodEndWC - periodStartWC;\n  return Math.ceil((periodDuration * timescale - time) / duration);\n};\n/**\n * Uses information provided by SegmentTemplate.SegmentTimeline to determine segment\n * timing and duration\n *\n * @param {Object} attributes\n *        Object containing all inherited attributes from parent elements with attribute\n *        names as keys\n * @param {Object[]} segmentTimeline\n *        List of objects representing the attributes of each S element contained within\n *\n * @return {{number: number, duration: number, time: number, timeline: number}[]}\n *         List of Objects with segment timing and duration info\n */\n\n\nconst parseByTimeline = (attributes, segmentTimeline) => {\n  const {\n    type,\n    minimumUpdatePeriod = 0,\n    media = '',\n    sourceDuration,\n    timescale = 1,\n    startNumber = 1,\n    periodStart: timeline\n  } = attributes;\n  const segments = [];\n  let time = -1;\n\n  for (let sIndex = 0; sIndex < segmentTimeline.length; sIndex++) {\n    const S = segmentTimeline[sIndex];\n    const duration = S.d;\n    const repeat = S.r || 0;\n    const segmentTime = S.t || 0;\n\n    if (time < 0) {\n      // first segment\n      time = segmentTime;\n    }\n\n    if (segmentTime && segmentTime > time) {\n      // discontinuity\n      // TODO: How to handle this type of discontinuity\n      // timeline++ here would treat it like HLS discontuity and content would\n      // get appended without gap\n      // E.G.\n      //  <S t=\"0\" d=\"1\" />\n      //  <S d=\"1\" />\n      //  <S d=\"1\" />\n      //  <S t=\"5\" d=\"1\" />\n      // would have $Time$ values of [0, 1, 2, 5]\n      // should this be appened at time positions [0, 1, 2, 3],(#EXT-X-DISCONTINUITY)\n      // or [0, 1, 2, gap, gap, 5]? (#EXT-X-GAP)\n      // does the value of sourceDuration consider this when calculating arbitrary\n      // negative @r repeat value?\n      // E.G. Same elements as above with this added at the end\n      //  <S d=\"1\" r=\"-1\" />\n      //  with a sourceDuration of 10\n      // Would the 2 gaps be included in the time duration calculations resulting in\n      // 8 segments with $Time$ values of [0, 1, 2, 5, 6, 7, 8, 9] or 10 segments\n      // with $Time$ values of [0, 1, 2, 5, 6, 7, 8, 9, 10, 11] ?\n      time = segmentTime;\n    }\n\n    let count;\n\n    if (repeat < 0) {\n      const nextS = sIndex + 1;\n\n      if (nextS === segmentTimeline.length) {\n        // last segment\n        if (type === 'dynamic' && minimumUpdatePeriod > 0 && media.indexOf('$Number$') > 0) {\n          count = getLiveRValue(attributes, time, duration);\n        } else {\n          // TODO: This may be incorrect depending on conclusion of TODO above\n          count = (sourceDuration * timescale - time) / duration;\n        }\n      } else {\n        count = (segmentTimeline[nextS].t - time) / duration;\n      }\n    } else {\n      count = repeat + 1;\n    }\n\n    const end = startNumber + segments.length + count;\n    let number = startNumber + segments.length;\n\n    while (number < end) {\n      segments.push({\n        number,\n        duration: duration / timescale,\n        time,\n        timeline\n      });\n      time += duration;\n      number++;\n    }\n  }\n\n  return segments;\n};\n\nconst identifierPattern = /\\$([A-z]*)(?:(%0)([0-9]+)d)?\\$/g;\n/**\n * Replaces template identifiers with corresponding values. To be used as the callback\n * for String.prototype.replace\n *\n * @name replaceCallback\n * @function\n * @param {string} match\n *        Entire match of identifier\n * @param {string} identifier\n *        Name of matched identifier\n * @param {string} format\n *        Format tag string. Its presence indicates that padding is expected\n * @param {string} width\n *        Desired length of the replaced value. Values less than this width shall be left\n *        zero padded\n * @return {string}\n *         Replacement for the matched identifier\n */\n\n/**\n * Returns a function to be used as a callback for String.prototype.replace to replace\n * template identifiers\n *\n * @param {Obect} values\n *        Object containing values that shall be used to replace known identifiers\n * @param {number} values.RepresentationID\n *        Value of the Representation@id attribute\n * @param {number} values.Number\n *        Number of the corresponding segment\n * @param {number} values.Bandwidth\n *        Value of the Representation@bandwidth attribute.\n * @param {number} values.Time\n *        Timestamp value of the corresponding segment\n * @return {replaceCallback}\n *         Callback to be used with String.prototype.replace to replace identifiers\n */\n\nconst identifierReplacement = values => (match, identifier, format, width) => {\n  if (match === '$$') {\n    // escape sequence\n    return '$';\n  }\n\n  if (typeof values[identifier] === 'undefined') {\n    return match;\n  }\n\n  const value = '' + values[identifier];\n\n  if (identifier === 'RepresentationID') {\n    // Format tag shall not be present with RepresentationID\n    return value;\n  }\n\n  if (!format) {\n    width = 1;\n  } else {\n    width = parseInt(width, 10);\n  }\n\n  if (value.length >= width) {\n    return value;\n  }\n\n  return `${new Array(width - value.length + 1).join('0')}${value}`;\n};\n/**\n * Constructs a segment url from a template string\n *\n * @param {string} url\n *        Template string to construct url from\n * @param {Obect} values\n *        Object containing values that shall be used to replace known identifiers\n * @param {number} values.RepresentationID\n *        Value of the Representation@id attribute\n * @param {number} values.Number\n *        Number of the corresponding segment\n * @param {number} values.Bandwidth\n *        Value of the Representation@bandwidth attribute.\n * @param {number} values.Time\n *        Timestamp value of the corresponding segment\n * @return {string}\n *         Segment url with identifiers replaced\n */\n\nconst constructTemplateUrl = (url, values) => url.replace(identifierPattern, identifierReplacement(values));\n/**\n * Generates a list of objects containing timing and duration information about each\n * segment needed to generate segment uris and the complete segment object\n *\n * @param {Object} attributes\n *        Object containing all inherited attributes from parent elements with attribute\n *        names as keys\n * @param {Object[]|undefined} segmentTimeline\n *        List of objects representing the attributes of each S element contained within\n *        the SegmentTimeline element\n * @return {{number: number, duration: number, time: number, timeline: number}[]}\n *         List of Objects with segment timing and duration info\n */\n\nconst parseTemplateInfo = (attributes, segmentTimeline) => {\n  if (!attributes.duration && !segmentTimeline) {\n    // if neither @duration or SegmentTimeline are present, then there shall be exactly\n    // one media segment\n    return [{\n      number: attributes.startNumber || 1,\n      duration: attributes.sourceDuration,\n      time: 0,\n      timeline: attributes.periodStart\n    }];\n  }\n\n  if (attributes.duration) {\n    return parseByDuration(attributes);\n  }\n\n  return parseByTimeline(attributes, segmentTimeline);\n};\n/**\n * Generates a list of segments using information provided by the SegmentTemplate element\n *\n * @param {Object} attributes\n *        Object containing all inherited attributes from parent elements with attribute\n *        names as keys\n * @param {Object[]|undefined} segmentTimeline\n *        List of objects representing the attributes of each S element contained within\n *        the SegmentTimeline element\n * @return {Object[]}\n *         List of segment objects\n */\n\nconst segmentsFromTemplate = (attributes, segmentTimeline) => {\n  const templateValues = {\n    RepresentationID: attributes.id,\n    Bandwidth: attributes.bandwidth || 0\n  };\n  const {\n    initialization = {\n      sourceURL: '',\n      range: ''\n    }\n  } = attributes;\n  const mapSegment = urlTypeToSegment({\n    baseUrl: attributes.baseUrl,\n    source: constructTemplateUrl(initialization.sourceURL, templateValues),\n    range: initialization.range\n  });\n  const segments = parseTemplateInfo(attributes, segmentTimeline);\n  return segments.map(segment => {\n    templateValues.Number = segment.number;\n    templateValues.Time = segment.time;\n    const uri = constructTemplateUrl(attributes.media || '', templateValues); // See DASH spec section 5.3.9.2.2\n    // - if timescale isn't present on any level, default to 1.\n\n    const timescale = attributes.timescale || 1; // - if presentationTimeOffset isn't present on any level, default to 0\n\n    const presentationTimeOffset = attributes.presentationTimeOffset || 0;\n    const presentationTime = // Even if the @t attribute is not specified for the segment, segment.time is\n    // calculated in mpd-parser prior to this, so it's assumed to be available.\n    attributes.periodStart + (segment.time - presentationTimeOffset) / timescale;\n    const map = {\n      uri,\n      timeline: segment.timeline,\n      duration: segment.duration,\n      resolvedUri: resolveUrl(attributes.baseUrl || '', uri),\n      map: mapSegment,\n      number: segment.number,\n      presentationTime\n    };\n    return map;\n  });\n};\n\n/**\n * Converts a <SegmentUrl> (of type URLType from the DASH spec 5.3.9.2 Table 14)\n * to an object that matches the output of a segment in videojs/mpd-parser\n *\n * @param {Object} attributes\n *   Object containing all inherited attributes from parent elements with attribute\n *   names as keys\n * @param {Object} segmentUrl\n *   <SegmentURL> node to translate into a segment object\n * @return {Object} translated segment object\n */\n\nconst SegmentURLToSegmentObject = (attributes, segmentUrl) => {\n  const {\n    baseUrl,\n    initialization = {}\n  } = attributes;\n  const initSegment = urlTypeToSegment({\n    baseUrl,\n    source: initialization.sourceURL,\n    range: initialization.range\n  });\n  const segment = urlTypeToSegment({\n    baseUrl,\n    source: segmentUrl.media,\n    range: segmentUrl.mediaRange\n  });\n  segment.map = initSegment;\n  return segment;\n};\n/**\n * Generates a list of segments using information provided by the SegmentList element\n * SegmentList (DASH SPEC Section 5.3.9.3.2) contains a set of <SegmentURL> nodes.  Each\n * node should be translated into segment.\n *\n * @param {Object} attributes\n *   Object containing all inherited attributes from parent elements with attribute\n *   names as keys\n * @param {Object[]|undefined} segmentTimeline\n *        List of objects representing the attributes of each S element contained within\n *        the SegmentTimeline element\n * @return {Object.<Array>} list of segments\n */\n\n\nconst segmentsFromList = (attributes, segmentTimeline) => {\n  const {\n    duration,\n    segmentUrls = [],\n    periodStart\n  } = attributes; // Per spec (5.3.9.2.1) no way to determine segment duration OR\n  // if both SegmentTimeline and @duration are defined, it is outside of spec.\n\n  if (!duration && !segmentTimeline || duration && segmentTimeline) {\n    throw new Error(errors.SEGMENT_TIME_UNSPECIFIED);\n  }\n\n  const segmentUrlMap = segmentUrls.map(segmentUrlObject => SegmentURLToSegmentObject(attributes, segmentUrlObject));\n  let segmentTimeInfo;\n\n  if (duration) {\n    segmentTimeInfo = parseByDuration(attributes);\n  }\n\n  if (segmentTimeline) {\n    segmentTimeInfo = parseByTimeline(attributes, segmentTimeline);\n  }\n\n  const segments = segmentTimeInfo.map((segmentTime, index) => {\n    if (segmentUrlMap[index]) {\n      const segment = segmentUrlMap[index]; // See DASH spec section 5.3.9.2.2\n      // - if timescale isn't present on any level, default to 1.\n\n      const timescale = attributes.timescale || 1; // - if presentationTimeOffset isn't present on any level, default to 0\n\n      const presentationTimeOffset = attributes.presentationTimeOffset || 0;\n      segment.timeline = segmentTime.timeline;\n      segment.duration = segmentTime.duration;\n      segment.number = segmentTime.number;\n      segment.presentationTime = periodStart + (segmentTime.time - presentationTimeOffset) / timescale;\n      return segment;\n    } // Since we're mapping we should get rid of any blank segments (in case\n    // the given SegmentTimeline is handling for more elements than we have\n    // SegmentURLs for).\n\n  }).filter(segment => segment);\n  return segments;\n};\n\nconst generateSegments = ({\n  attributes,\n  segmentInfo\n}) => {\n  let segmentAttributes;\n  let segmentsFn;\n\n  if (segmentInfo.template) {\n    segmentsFn = segmentsFromTemplate;\n    segmentAttributes = merge(attributes, segmentInfo.template);\n  } else if (segmentInfo.base) {\n    segmentsFn = segmentsFromBase;\n    segmentAttributes = merge(attributes, segmentInfo.base);\n  } else if (segmentInfo.list) {\n    segmentsFn = segmentsFromList;\n    segmentAttributes = merge(attributes, segmentInfo.list);\n  }\n\n  const segmentsInfo = {\n    attributes\n  };\n\n  if (!segmentsFn) {\n    return segmentsInfo;\n  }\n\n  const segments = segmentsFn(segmentAttributes, segmentInfo.segmentTimeline); // The @duration attribute will be used to determin the playlist's targetDuration which\n  // must be in seconds. Since we've generated the segment list, we no longer need\n  // @duration to be in @timescale units, so we can convert it here.\n\n  if (segmentAttributes.duration) {\n    const {\n      duration,\n      timescale = 1\n    } = segmentAttributes;\n    segmentAttributes.duration = duration / timescale;\n  } else if (segments.length) {\n    // if there is no @duration attribute, use the largest segment duration as\n    // as target duration\n    segmentAttributes.duration = segments.reduce((max, segment) => {\n      return Math.max(max, Math.ceil(segment.duration));\n    }, 0);\n  } else {\n    segmentAttributes.duration = 0;\n  }\n\n  segmentsInfo.attributes = segmentAttributes;\n  segmentsInfo.segments = segments; // This is a sidx box without actual segment information\n\n  if (segmentInfo.base && segmentAttributes.indexRange) {\n    segmentsInfo.sidx = segments[0];\n    segmentsInfo.segments = [];\n  }\n\n  return segmentsInfo;\n};\nconst toPlaylists = representations => representations.map(generateSegments);\n\nconst findChildren = (element, name) => from(element.childNodes).filter(({\n  tagName\n}) => tagName === name);\nconst getContent = element => element.textContent.trim();\n\n/**\n * Converts the provided string that may contain a division operation to a number.\n *\n * @param {string} value - the provided string value\n *\n * @return {number} the parsed string value\n */\nconst parseDivisionValue = value => {\n  return parseFloat(value.split('/').reduce((prev, current) => prev / current));\n};\n\nconst parseDuration = str => {\n  const SECONDS_IN_YEAR = 365 * 24 * 60 * 60;\n  const SECONDS_IN_MONTH = 30 * 24 * 60 * 60;\n  const SECONDS_IN_DAY = 24 * 60 * 60;\n  const SECONDS_IN_HOUR = 60 * 60;\n  const SECONDS_IN_MIN = 60; // P10Y10M10DT10H10M10.1S\n\n  const durationRegex = /P(?:(\\d*)Y)?(?:(\\d*)M)?(?:(\\d*)D)?(?:T(?:(\\d*)H)?(?:(\\d*)M)?(?:([\\d.]*)S)?)?/;\n  const match = durationRegex.exec(str);\n\n  if (!match) {\n    return 0;\n  }\n\n  const [year, month, day, hour, minute, second] = match.slice(1);\n  return parseFloat(year || 0) * SECONDS_IN_YEAR + parseFloat(month || 0) * SECONDS_IN_MONTH + parseFloat(day || 0) * SECONDS_IN_DAY + parseFloat(hour || 0) * SECONDS_IN_HOUR + parseFloat(minute || 0) * SECONDS_IN_MIN + parseFloat(second || 0);\n};\nconst parseDate = str => {\n  // Date format without timezone according to ISO 8601\n  // YYY-MM-DDThh:mm:ss.ssssss\n  const dateRegex = /^\\d+-\\d+-\\d+T\\d+:\\d+:\\d+(\\.\\d+)?$/; // If the date string does not specifiy a timezone, we must specifiy UTC. This is\n  // expressed by ending with 'Z'\n\n  if (dateRegex.test(str)) {\n    str += 'Z';\n  }\n\n  return Date.parse(str);\n};\n\nconst parsers = {\n  /**\n   * Specifies the duration of the entire Media Presentation. Format is a duration string\n   * as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The duration in seconds\n   */\n  mediaPresentationDuration(value) {\n    return parseDuration(value);\n  },\n\n  /**\n   * Specifies the Segment availability start time for all Segments referred to in this\n   * MPD. For a dynamic manifest, it specifies the anchor for the earliest availability\n   * time. Format is a date string as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The date as seconds from unix epoch\n   */\n  availabilityStartTime(value) {\n    return parseDate(value) / 1000;\n  },\n\n  /**\n   * Specifies the smallest period between potential changes to the MPD. Format is a\n   * duration string as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The duration in seconds\n   */\n  minimumUpdatePeriod(value) {\n    return parseDuration(value);\n  },\n\n  /**\n   * Specifies the suggested presentation delay. Format is a\n   * duration string as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The duration in seconds\n   */\n  suggestedPresentationDelay(value) {\n    return parseDuration(value);\n  },\n\n  /**\n   * specifices the type of mpd. Can be either \"static\" or \"dynamic\"\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   *\n   * @return {string}\n   *         The type as a string\n   */\n  type(value) {\n    return value;\n  },\n\n  /**\n   * Specifies the duration of the smallest time shifting buffer for any Representation\n   * in the MPD. Format is a duration string as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The duration in seconds\n   */\n  timeShiftBufferDepth(value) {\n    return parseDuration(value);\n  },\n\n  /**\n   * Specifies the PeriodStart time of the Period relative to the availabilityStarttime.\n   * Format is a duration string as specified in ISO 8601\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The duration in seconds\n   */\n  start(value) {\n    return parseDuration(value);\n  },\n\n  /**\n   * Specifies the width of the visual presentation\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed width\n   */\n  width(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the height of the visual presentation\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed height\n   */\n  height(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the bitrate of the representation\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed bandwidth\n   */\n  bandwidth(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the frame rate of the representation\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed frame rate\n   */\n  frameRate(value) {\n    return parseDivisionValue(value);\n  },\n\n  /**\n   * Specifies the number of the first Media Segment in this Representation in the Period\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed number\n   */\n  startNumber(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the timescale in units per seconds\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed timescale\n   */\n  timescale(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the presentationTimeOffset.\n   *\n   * @param {string} value\n   *        value of the attribute as a string\n   *\n   * @return {number}\n   *         The parsed presentationTimeOffset\n   */\n  presentationTimeOffset(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the constant approximate Segment duration\n   * NOTE: The <Period> element also contains an @duration attribute. This duration\n   *       specifies the duration of the Period. This attribute is currently not\n   *       supported by the rest of the parser, however we still check for it to prevent\n   *       errors.\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed duration\n   */\n  duration(value) {\n    const parsedValue = parseInt(value, 10);\n\n    if (isNaN(parsedValue)) {\n      return parseDuration(value);\n    }\n\n    return parsedValue;\n  },\n\n  /**\n   * Specifies the Segment duration, in units of the value of the @timescale.\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed duration\n   */\n  d(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the MPD start time, in @timescale units, the first Segment in the series\n   * starts relative to the beginning of the Period\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed time\n   */\n  t(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Specifies the repeat count of the number of following contiguous Segments with the\n   * same duration expressed by the value of @d\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {number}\n   *         The parsed number\n   */\n  r(value) {\n    return parseInt(value, 10);\n  },\n\n  /**\n   * Default parser for all other attributes. Acts as a no-op and just returns the value\n   * as a string\n   *\n   * @param {string} value\n   *        value of attribute as a string\n   * @return {string}\n   *         Unparsed value\n   */\n  DEFAULT(value) {\n    return value;\n  }\n\n};\n/**\n * Gets all the attributes and values of the provided node, parses attributes with known\n * types, and returns an object with attribute names mapped to values.\n *\n * @param {Node} el\n *        The node to parse attributes from\n * @return {Object}\n *         Object with all attributes of el parsed\n */\n\nconst parseAttributes = el => {\n  if (!(el && el.attributes)) {\n    return {};\n  }\n\n  return from(el.attributes).reduce((a, e) => {\n    const parseFn = parsers[e.name] || parsers.DEFAULT;\n    a[e.name] = parseFn(e.value);\n    return a;\n  }, {});\n};\n\nconst keySystemsMap = {\n  'urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b': 'org.w3.clearkey',\n  'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed': 'com.widevine.alpha',\n  'urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95': 'com.microsoft.playready',\n  'urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb': 'com.adobe.primetime'\n};\n/**\n * Builds a list of urls that is the product of the reference urls and BaseURL values\n *\n * @param {string[]} referenceUrls\n *        List of reference urls to resolve to\n * @param {Node[]} baseUrlElements\n *        List of BaseURL nodes from the mpd\n * @return {string[]}\n *         List of resolved urls\n */\n\nconst buildBaseUrls = (referenceUrls, baseUrlElements) => {\n  if (!baseUrlElements.length) {\n    return referenceUrls;\n  }\n\n  return flatten(referenceUrls.map(function (reference) {\n    return baseUrlElements.map(function (baseUrlElement) {\n      return resolveUrl(reference, getContent(baseUrlElement));\n    });\n  }));\n};\n/**\n * Contains all Segment information for its containing AdaptationSet\n *\n * @typedef {Object} SegmentInformation\n * @property {Object|undefined} template\n *           Contains the attributes for the SegmentTemplate node\n * @property {Object[]|undefined} segmentTimeline\n *           Contains a list of atrributes for each S node within the SegmentTimeline node\n * @property {Object|undefined} list\n *           Contains the attributes for the SegmentList node\n * @property {Object|undefined} base\n *           Contains the attributes for the SegmentBase node\n */\n\n/**\n * Returns all available Segment information contained within the AdaptationSet node\n *\n * @param {Node} adaptationSet\n *        The AdaptationSet node to get Segment information from\n * @return {SegmentInformation}\n *         The Segment information contained within the provided AdaptationSet\n */\n\nconst getSegmentInformation = adaptationSet => {\n  const segmentTemplate = findChildren(adaptationSet, 'SegmentTemplate')[0];\n  const segmentList = findChildren(adaptationSet, 'SegmentList')[0];\n  const segmentUrls = segmentList && findChildren(segmentList, 'SegmentURL').map(s => merge({\n    tag: 'SegmentURL'\n  }, parseAttributes(s)));\n  const segmentBase = findChildren(adaptationSet, 'SegmentBase')[0];\n  const segmentTimelineParentNode = segmentList || segmentTemplate;\n  const segmentTimeline = segmentTimelineParentNode && findChildren(segmentTimelineParentNode, 'SegmentTimeline')[0];\n  const segmentInitializationParentNode = segmentList || segmentBase || segmentTemplate;\n  const segmentInitialization = segmentInitializationParentNode && findChildren(segmentInitializationParentNode, 'Initialization')[0]; // SegmentTemplate is handled slightly differently, since it can have both\n  // @initialization and an <Initialization> node.  @initialization can be templated,\n  // while the node can have a url and range specified.  If the <SegmentTemplate> has\n  // both @initialization and an <Initialization> subelement we opt to override with\n  // the node, as this interaction is not defined in the spec.\n\n  const template = segmentTemplate && parseAttributes(segmentTemplate);\n\n  if (template && segmentInitialization) {\n    template.initialization = segmentInitialization && parseAttributes(segmentInitialization);\n  } else if (template && template.initialization) {\n    // If it is @initialization we convert it to an object since this is the format that\n    // later functions will rely on for the initialization segment.  This is only valid\n    // for <SegmentTemplate>\n    template.initialization = {\n      sourceURL: template.initialization\n    };\n  }\n\n  const segmentInfo = {\n    template,\n    segmentTimeline: segmentTimeline && findChildren(segmentTimeline, 'S').map(s => parseAttributes(s)),\n    list: segmentList && merge(parseAttributes(segmentList), {\n      segmentUrls,\n      initialization: parseAttributes(segmentInitialization)\n    }),\n    base: segmentBase && merge(parseAttributes(segmentBase), {\n      initialization: parseAttributes(segmentInitialization)\n    })\n  };\n  Object.keys(segmentInfo).forEach(key => {\n    if (!segmentInfo[key]) {\n      delete segmentInfo[key];\n    }\n  });\n  return segmentInfo;\n};\n/**\n * Contains Segment information and attributes needed to construct a Playlist object\n * from a Representation\n *\n * @typedef {Object} RepresentationInformation\n * @property {SegmentInformation} segmentInfo\n *           Segment information for this Representation\n * @property {Object} attributes\n *           Inherited attributes for this Representation\n */\n\n/**\n * Maps a Representation node to an object containing Segment information and attributes\n *\n * @name inheritBaseUrlsCallback\n * @function\n * @param {Node} representation\n *        Representation node from the mpd\n * @return {RepresentationInformation}\n *         Representation information needed to construct a Playlist object\n */\n\n/**\n * Returns a callback for Array.prototype.map for mapping Representation nodes to\n * Segment information and attributes using inherited BaseURL nodes.\n *\n * @param {Object} adaptationSetAttributes\n *        Contains attributes inherited by the AdaptationSet\n * @param {string[]} adaptationSetBaseUrls\n *        Contains list of resolved base urls inherited by the AdaptationSet\n * @param {SegmentInformation} adaptationSetSegmentInfo\n *        Contains Segment information for the AdaptationSet\n * @return {inheritBaseUrlsCallback}\n *         Callback map function\n */\n\nconst inheritBaseUrls = (adaptationSetAttributes, adaptationSetBaseUrls, adaptationSetSegmentInfo) => representation => {\n  const repBaseUrlElements = findChildren(representation, 'BaseURL');\n  const repBaseUrls = buildBaseUrls(adaptationSetBaseUrls, repBaseUrlElements);\n  const attributes = merge(adaptationSetAttributes, parseAttributes(representation));\n  const representationSegmentInfo = getSegmentInformation(representation);\n  return repBaseUrls.map(baseUrl => {\n    return {\n      segmentInfo: merge(adaptationSetSegmentInfo, representationSegmentInfo),\n      attributes: merge(attributes, {\n        baseUrl\n      })\n    };\n  });\n};\n/**\n * Tranforms a series of content protection nodes to\n * an object containing pssh data by key system\n *\n * @param {Node[]} contentProtectionNodes\n *        Content protection nodes\n * @return {Object}\n *        Object containing pssh data by key system\n */\n\nconst generateKeySystemInformation = contentProtectionNodes => {\n  return contentProtectionNodes.reduce((acc, node) => {\n    const attributes = parseAttributes(node); // Although it could be argued that according to the UUID RFC spec the UUID string (a-f chars) should be generated\n    // as a lowercase string it also mentions it should be treated as case-insensitive on input. Since the key system\n    // UUIDs in the keySystemsMap are hardcoded as lowercase in the codebase there isn't any reason not to do\n    // .toLowerCase() on the input UUID string from the manifest (at least I could not think of one).\n\n    if (attributes.schemeIdUri) {\n      attributes.schemeIdUri = attributes.schemeIdUri.toLowerCase();\n    }\n\n    const keySystem = keySystemsMap[attributes.schemeIdUri];\n\n    if (keySystem) {\n      acc[keySystem] = {\n        attributes\n      };\n      const psshNode = findChildren(node, 'cenc:pssh')[0];\n\n      if (psshNode) {\n        const pssh = getContent(psshNode);\n        acc[keySystem].pssh = pssh && decodeB64ToUint8Array(pssh);\n      }\n    }\n\n    return acc;\n  }, {});\n}; // defined in ANSI_SCTE 214-1 2016\n\n\nconst parseCaptionServiceMetadata = service => {\n  // 608 captions\n  if (service.schemeIdUri === 'urn:scte:dash:cc:cea-608:2015') {\n    const values = typeof service.value !== 'string' ? [] : service.value.split(';');\n    return values.map(value => {\n      let channel;\n      let language; // default language to value\n\n      language = value;\n\n      if (/^CC\\d=/.test(value)) {\n        [channel, language] = value.split('=');\n      } else if (/^CC\\d$/.test(value)) {\n        channel = value;\n      }\n\n      return {\n        channel,\n        language\n      };\n    });\n  } else if (service.schemeIdUri === 'urn:scte:dash:cc:cea-708:2015') {\n    const values = typeof service.value !== 'string' ? [] : service.value.split(';');\n    return values.map(value => {\n      const flags = {\n        // service or channel number 1-63\n        'channel': undefined,\n        // language is a 3ALPHA per ISO 639.2/B\n        // field is required\n        'language': undefined,\n        // BIT 1/0 or ?\n        // default value is 1, meaning 16:9 aspect ratio, 0 is 4:3, ? is unknown\n        'aspectRatio': 1,\n        // BIT 1/0\n        // easy reader flag indicated the text is tailed to the needs of beginning readers\n        // default 0, or off\n        'easyReader': 0,\n        // BIT 1/0\n        // If 3d metadata is present (CEA-708.1) then 1\n        // default 0\n        '3D': 0\n      };\n\n      if (/=/.test(value)) {\n        const [channel, opts = ''] = value.split('=');\n        flags.channel = channel;\n        flags.language = value;\n        opts.split(',').forEach(opt => {\n          const [name, val] = opt.split(':');\n\n          if (name === 'lang') {\n            flags.language = val; // er for easyReadery\n          } else if (name === 'er') {\n            flags.easyReader = Number(val); // war for wide aspect ratio\n          } else if (name === 'war') {\n            flags.aspectRatio = Number(val);\n          } else if (name === '3D') {\n            flags['3D'] = Number(val);\n          }\n        });\n      } else {\n        flags.language = value;\n      }\n\n      if (flags.channel) {\n        flags.channel = 'SERVICE' + flags.channel;\n      }\n\n      return flags;\n    });\n  }\n};\n/**\n * Maps an AdaptationSet node to a list of Representation information objects\n *\n * @name toRepresentationsCallback\n * @function\n * @param {Node} adaptationSet\n *        AdaptationSet node from the mpd\n * @return {RepresentationInformation[]}\n *         List of objects containing Representaion information\n */\n\n/**\n * Returns a callback for Array.prototype.map for mapping AdaptationSet nodes to a list of\n * Representation information objects\n *\n * @param {Object} periodAttributes\n *        Contains attributes inherited by the Period\n * @param {string[]} periodBaseUrls\n *        Contains list of resolved base urls inherited by the Period\n * @param {string[]} periodSegmentInfo\n *        Contains Segment Information at the period level\n * @return {toRepresentationsCallback}\n *         Callback map function\n */\n\nconst toRepresentations = (periodAttributes, periodBaseUrls, periodSegmentInfo) => adaptationSet => {\n  const adaptationSetAttributes = parseAttributes(adaptationSet);\n  const adaptationSetBaseUrls = buildBaseUrls(periodBaseUrls, findChildren(adaptationSet, 'BaseURL'));\n  const role = findChildren(adaptationSet, 'Role')[0];\n  const roleAttributes = {\n    role: parseAttributes(role)\n  };\n  let attrs = merge(periodAttributes, adaptationSetAttributes, roleAttributes);\n  const accessibility = findChildren(adaptationSet, 'Accessibility')[0];\n  const captionServices = parseCaptionServiceMetadata(parseAttributes(accessibility));\n\n  if (captionServices) {\n    attrs = merge(attrs, {\n      captionServices\n    });\n  }\n\n  const label = findChildren(adaptationSet, 'Label')[0];\n\n  if (label && label.childNodes.length) {\n    const labelVal = label.childNodes[0].nodeValue.trim();\n    attrs = merge(attrs, {\n      label: labelVal\n    });\n  }\n\n  const contentProtection = generateKeySystemInformation(findChildren(adaptationSet, 'ContentProtection'));\n\n  if (Object.keys(contentProtection).length) {\n    attrs = merge(attrs, {\n      contentProtection\n    });\n  }\n\n  const segmentInfo = getSegmentInformation(adaptationSet);\n  const representations = findChildren(adaptationSet, 'Representation');\n  const adaptationSetSegmentInfo = merge(periodSegmentInfo, segmentInfo);\n  return flatten(representations.map(inheritBaseUrls(attrs, adaptationSetBaseUrls, adaptationSetSegmentInfo)));\n};\n/**\n * Contains all period information for mapping nodes onto adaptation sets.\n *\n * @typedef {Object} PeriodInformation\n * @property {Node} period.node\n *           Period node from the mpd\n * @property {Object} period.attributes\n *           Parsed period attributes from node plus any added\n */\n\n/**\n * Maps a PeriodInformation object to a list of Representation information objects for all\n * AdaptationSet nodes contained within the Period.\n *\n * @name toAdaptationSetsCallback\n * @function\n * @param {PeriodInformation} period\n *        Period object containing necessary period information\n * @param {number} periodStart\n *        Start time of the Period within the mpd\n * @return {RepresentationInformation[]}\n *         List of objects containing Representaion information\n */\n\n/**\n * Returns a callback for Array.prototype.map for mapping Period nodes to a list of\n * Representation information objects\n *\n * @param {Object} mpdAttributes\n *        Contains attributes inherited by the mpd\n * @param {string[]} mpdBaseUrls\n *        Contains list of resolved base urls inherited by the mpd\n * @return {toAdaptationSetsCallback}\n *         Callback map function\n */\n\nconst toAdaptationSets = (mpdAttributes, mpdBaseUrls) => (period, index) => {\n  const periodBaseUrls = buildBaseUrls(mpdBaseUrls, findChildren(period.node, 'BaseURL'));\n  const periodAttributes = merge(mpdAttributes, {\n    periodStart: period.attributes.start\n  });\n\n  if (typeof period.attributes.duration === 'number') {\n    periodAttributes.periodDuration = period.attributes.duration;\n  }\n\n  const adaptationSets = findChildren(period.node, 'AdaptationSet');\n  const periodSegmentInfo = getSegmentInformation(period.node);\n  return flatten(adaptationSets.map(toRepresentations(periodAttributes, periodBaseUrls, periodSegmentInfo)));\n};\n/**\n * Gets Period@start property for a given period.\n *\n * @param {Object} options\n *        Options object\n * @param {Object} options.attributes\n *        Period attributes\n * @param {Object} [options.priorPeriodAttributes]\n *        Prior period attributes (if prior period is available)\n * @param {string} options.mpdType\n *        The MPD@type these periods came from\n * @return {number|null}\n *         The period start, or null if it's an early available period or error\n */\n\nconst getPeriodStart = ({\n  attributes,\n  priorPeriodAttributes,\n  mpdType\n}) => {\n  // Summary of period start time calculation from DASH spec section 5.3.2.1\n  //\n  // A period's start is the first period's start + time elapsed after playing all\n  // prior periods to this one. Periods continue one after the other in time (without\n  // gaps) until the end of the presentation.\n  //\n  // The value of Period@start should be:\n  // 1. if Period@start is present: value of Period@start\n  // 2. if previous period exists and it has @duration: previous Period@start +\n  //    previous Period@duration\n  // 3. if this is first period and MPD@type is 'static': 0\n  // 4. in all other cases, consider the period an \"early available period\" (note: not\n  //    currently supported)\n  // (1)\n  if (typeof attributes.start === 'number') {\n    return attributes.start;\n  } // (2)\n\n\n  if (priorPeriodAttributes && typeof priorPeriodAttributes.start === 'number' && typeof priorPeriodAttributes.duration === 'number') {\n    return priorPeriodAttributes.start + priorPeriodAttributes.duration;\n  } // (3)\n\n\n  if (!priorPeriodAttributes && mpdType === 'static') {\n    return 0;\n  } // (4)\n  // There is currently no logic for calculating the Period@start value if there is\n  // no Period@start or prior Period@start and Period@duration available. This is not made\n  // explicit by the DASH interop guidelines or the DASH spec, however, since there's\n  // nothing about any other resolution strategies, it's implied. Thus, this case should\n  // be considered an early available period, or error, and null should suffice for both\n  // of those cases.\n\n\n  return null;\n};\n/**\n * Traverses the mpd xml tree to generate a list of Representation information objects\n * that have inherited attributes from parent nodes\n *\n * @param {Node} mpd\n *        The root node of the mpd\n * @param {Object} options\n *        Available options for inheritAttributes\n * @param {string} options.manifestUri\n *        The uri source of the mpd\n * @param {number} options.NOW\n *        Current time per DASH IOP.  Default is current time in ms since epoch\n * @param {number} options.clientOffset\n *        Client time difference from NOW (in milliseconds)\n * @return {RepresentationInformation[]}\n *         List of objects containing Representation information\n */\n\nconst inheritAttributes = (mpd, options = {}) => {\n  const {\n    manifestUri = '',\n    NOW = Date.now(),\n    clientOffset = 0\n  } = options;\n  const periodNodes = findChildren(mpd, 'Period');\n\n  if (!periodNodes.length) {\n    throw new Error(errors.INVALID_NUMBER_OF_PERIOD);\n  }\n\n  const locations = findChildren(mpd, 'Location');\n  const mpdAttributes = parseAttributes(mpd);\n  const mpdBaseUrls = buildBaseUrls([manifestUri], findChildren(mpd, 'BaseURL')); // See DASH spec section 5.3.1.2, Semantics of MPD element. Default type to 'static'.\n\n  mpdAttributes.type = mpdAttributes.type || 'static';\n  mpdAttributes.sourceDuration = mpdAttributes.mediaPresentationDuration || 0;\n  mpdAttributes.NOW = NOW;\n  mpdAttributes.clientOffset = clientOffset;\n\n  if (locations.length) {\n    mpdAttributes.locations = locations.map(getContent);\n  }\n\n  const periods = []; // Since toAdaptationSets acts on individual periods right now, the simplest approach to\n  // adding properties that require looking at prior periods is to parse attributes and add\n  // missing ones before toAdaptationSets is called. If more such properties are added, it\n  // may be better to refactor toAdaptationSets.\n\n  periodNodes.forEach((node, index) => {\n    const attributes = parseAttributes(node); // Use the last modified prior period, as it may contain added information necessary\n    // for this period.\n\n    const priorPeriod = periods[index - 1];\n    attributes.start = getPeriodStart({\n      attributes,\n      priorPeriodAttributes: priorPeriod ? priorPeriod.attributes : null,\n      mpdType: mpdAttributes.type\n    });\n    periods.push({\n      node,\n      attributes\n    });\n  });\n  return {\n    locations: mpdAttributes.locations,\n    representationInfo: flatten(periods.map(toAdaptationSets(mpdAttributes, mpdBaseUrls)))\n  };\n};\n\nconst stringToMpdXml = manifestString => {\n  if (manifestString === '') {\n    throw new Error(errors.DASH_EMPTY_MANIFEST);\n  }\n\n  const parser = new DOMParser();\n  let xml;\n  let mpd;\n\n  try {\n    xml = parser.parseFromString(manifestString, 'application/xml');\n    mpd = xml && xml.documentElement.tagName === 'MPD' ? xml.documentElement : null;\n  } catch (e) {// ie 11 throwsw on invalid xml\n  }\n\n  if (!mpd || mpd && mpd.getElementsByTagName('parsererror').length > 0) {\n    throw new Error(errors.DASH_INVALID_XML);\n  }\n\n  return mpd;\n};\n\n/**\n * Parses the manifest for a UTCTiming node, returning the nodes attributes if found\n *\n * @param {string} mpd\n *        XML string of the MPD manifest\n * @return {Object|null}\n *         Attributes of UTCTiming node specified in the manifest. Null if none found\n */\n\nconst parseUTCTimingScheme = mpd => {\n  const UTCTimingNode = findChildren(mpd, 'UTCTiming')[0];\n\n  if (!UTCTimingNode) {\n    return null;\n  }\n\n  const attributes = parseAttributes(UTCTimingNode);\n\n  switch (attributes.schemeIdUri) {\n    case 'urn:mpeg:dash:utc:http-head:2014':\n    case 'urn:mpeg:dash:utc:http-head:2012':\n      attributes.method = 'HEAD';\n      break;\n\n    case 'urn:mpeg:dash:utc:http-xsdate:2014':\n    case 'urn:mpeg:dash:utc:http-iso:2014':\n    case 'urn:mpeg:dash:utc:http-xsdate:2012':\n    case 'urn:mpeg:dash:utc:http-iso:2012':\n      attributes.method = 'GET';\n      break;\n\n    case 'urn:mpeg:dash:utc:direct:2014':\n    case 'urn:mpeg:dash:utc:direct:2012':\n      attributes.method = 'DIRECT';\n      attributes.value = Date.parse(attributes.value);\n      break;\n\n    case 'urn:mpeg:dash:utc:http-ntp:2014':\n    case 'urn:mpeg:dash:utc:ntp:2014':\n    case 'urn:mpeg:dash:utc:sntp:2014':\n    default:\n      throw new Error(errors.UNSUPPORTED_UTC_TIMING_SCHEME);\n  }\n\n  return attributes;\n};\n\nconst VERSION = version;\n/*\n * Given a DASH manifest string and options, parses the DASH manifest into an object in the\n * form outputed by m3u8-parser and accepted by videojs/http-streaming.\n *\n * For live DASH manifests, if `previousManifest` is provided in options, then the newly\n * parsed DASH manifest will have its media sequence and discontinuity sequence values\n * updated to reflect its position relative to the prior manifest.\n *\n * @param {string} manifestString - the DASH manifest as a string\n * @param {options} [options] - any options\n *\n * @return {Object} the manifest object\n */\n\nconst parse = (manifestString, options = {}) => {\n  const parsedManifestInfo = inheritAttributes(stringToMpdXml(manifestString), options);\n  const playlists = toPlaylists(parsedManifestInfo.representationInfo);\n  return toM3u8({\n    dashPlaylists: playlists,\n    locations: parsedManifestInfo.locations,\n    sidxMapping: options.sidxMapping,\n    previousManifest: options.previousManifest\n  });\n};\n/**\n * Parses the manifest for a UTCTiming node, returning the nodes attributes if found\n *\n * @param {string} manifestString\n *        XML string of the MPD manifest\n * @return {Object|null}\n *         Attributes of UTCTiming node specified in the manifest. Null if none found\n */\n\n\nconst parseUTCTiming = manifestString => parseUTCTimingScheme(stringToMpdXml(manifestString));\n\nexport { VERSION, addSidxSegmentsToPlaylist$1 as addSidxSegmentsToPlaylist, generateSidxKey, inheritAttributes, parse, parseUTCTiming, stringToMpdXml, toM3u8, toPlaylists };\n","// see https://tools.ietf.org/html/rfc1808\n\n(function (root) {\n  var URL_REGEX =\n    /^(?=((?:[a-zA-Z0-9+\\-.]+:)?))\\1(?=((?:\\/\\/[^\\/?#]*)?))\\2(?=((?:(?:[^?#\\/]*\\/)*[^;?#\\/]*)?))\\3((?:;[^?#]*)?)(\\?[^#]*)?(#[^]*)?$/;\n  var FIRST_SEGMENT_REGEX = /^(?=([^\\/?#]*))\\1([^]*)$/;\n  var SLASH_DOT_REGEX = /(?:\\/|^)\\.(?=\\/)/g;\n  var SLASH_DOT_DOT_REGEX = /(?:\\/|^)\\.\\.\\/(?!\\.\\.\\/)[^\\/]*(?=\\/)/g;\n\n  var URLToolkit = {\n    // If opts.alwaysNormalize is true then the path will always be normalized even when it starts with / or //\n    // E.g\n    // With opts.alwaysNormalize = false (default, spec compliant)\n    // http://a.com/b/cd + /e/f/../g => http://a.com/e/f/../g\n    // With opts.alwaysNormalize = true (not spec compliant)\n    // http://a.com/b/cd + /e/f/../g => http://a.com/e/g\n    buildAbsoluteURL: function (baseURL, relativeURL, opts) {\n      opts = opts || {};\n      // remove any remaining space and CRLF\n      baseURL = baseURL.trim();\n      relativeURL = relativeURL.trim();\n      if (!relativeURL) {\n        // 2a) If the embedded URL is entirely empty, it inherits the\n        // entire base URL (i.e., is set equal to the base URL)\n        // and we are done.\n        if (!opts.alwaysNormalize) {\n          return baseURL;\n        }\n        var basePartsForNormalise = URLToolkit.parseURL(baseURL);\n        if (!basePartsForNormalise) {\n          throw new Error('Error trying to parse base URL.');\n        }\n        basePartsForNormalise.path = URLToolkit.normalizePath(\n          basePartsForNormalise.path\n        );\n        return URLToolkit.buildURLFromParts(basePartsForNormalise);\n      }\n      var relativeParts = URLToolkit.parseURL(relativeURL);\n      if (!relativeParts) {\n        throw new Error('Error trying to parse relative URL.');\n      }\n      if (relativeParts.scheme) {\n        // 2b) If the embedded URL starts with a scheme name, it is\n        // interpreted as an absolute URL and we are done.\n        if (!opts.alwaysNormalize) {\n          return relativeURL;\n        }\n        relativeParts.path = URLToolkit.normalizePath(relativeParts.path);\n        return URLToolkit.buildURLFromParts(relativeParts);\n      }\n      var baseParts = URLToolkit.parseURL(baseURL);\n      if (!baseParts) {\n        throw new Error('Error trying to parse base URL.');\n      }\n      if (!baseParts.netLoc && baseParts.path && baseParts.path[0] !== '/') {\n        // If netLoc missing and path doesn't start with '/', assume everthing before the first '/' is the netLoc\n        // This causes 'example.com/a' to be handled as '//example.com/a' instead of '/example.com/a'\n        var pathParts = FIRST_SEGMENT_REGEX.exec(baseParts.path);\n        baseParts.netLoc = pathParts[1];\n        baseParts.path = pathParts[2];\n      }\n      if (baseParts.netLoc && !baseParts.path) {\n        baseParts.path = '/';\n      }\n      var builtParts = {\n        // 2c) Otherwise, the embedded URL inherits the scheme of\n        // the base URL.\n        scheme: baseParts.scheme,\n        netLoc: relativeParts.netLoc,\n        path: null,\n        params: relativeParts.params,\n        query: relativeParts.query,\n        fragment: relativeParts.fragment,\n      };\n      if (!relativeParts.netLoc) {\n        // 3) If the embedded URL's <net_loc> is non-empty, we skip to\n        // Step 7.  Otherwise, the embedded URL inherits the <net_loc>\n        // (if any) of the base URL.\n        builtParts.netLoc = baseParts.netLoc;\n        // 4) If the embedded URL path is preceded by a slash \"/\", the\n        // path is not relative and we skip to Step 7.\n        if (relativeParts.path[0] !== '/') {\n          if (!relativeParts.path) {\n            // 5) If the embedded URL path is empty (and not preceded by a\n            // slash), then the embedded URL inherits the base URL path\n            builtParts.path = baseParts.path;\n            // 5a) if the embedded URL's <params> is non-empty, we skip to\n            // step 7; otherwise, it inherits the <params> of the base\n            // URL (if any) and\n            if (!relativeParts.params) {\n              builtParts.params = baseParts.params;\n              // 5b) if the embedded URL's <query> is non-empty, we skip to\n              // step 7; otherwise, it inherits the <query> of the base\n              // URL (if any) and we skip to step 7.\n              if (!relativeParts.query) {\n                builtParts.query = baseParts.query;\n              }\n            }\n          } else {\n            // 6) The last segment of the base URL's path (anything\n            // following the rightmost slash \"/\", or the entire path if no\n            // slash is present) is removed and the embedded URL's path is\n            // appended in its place.\n            var baseURLPath = baseParts.path;\n            var newPath =\n              baseURLPath.substring(0, baseURLPath.lastIndexOf('/') + 1) +\n              relativeParts.path;\n            builtParts.path = URLToolkit.normalizePath(newPath);\n          }\n        }\n      }\n      if (builtParts.path === null) {\n        builtParts.path = opts.alwaysNormalize\n          ? URLToolkit.normalizePath(relativeParts.path)\n          : relativeParts.path;\n      }\n      return URLToolkit.buildURLFromParts(builtParts);\n    },\n    parseURL: function (url) {\n      var parts = URL_REGEX.exec(url);\n      if (!parts) {\n        return null;\n      }\n      return {\n        scheme: parts[1] || '',\n        netLoc: parts[2] || '',\n        path: parts[3] || '',\n        params: parts[4] || '',\n        query: parts[5] || '',\n        fragment: parts[6] || '',\n      };\n    },\n    normalizePath: function (path) {\n      // The following operations are\n      // then applied, in order, to the new path:\n      // 6a) All occurrences of \"./\", where \".\" is a complete path\n      // segment, are removed.\n      // 6b) If the path ends with \".\" as a complete path segment,\n      // that \".\" is removed.\n      path = path.split('').reverse().join('').replace(SLASH_DOT_REGEX, '');\n      // 6c) All occurrences of \"<segment>/../\", where <segment> is a\n      // complete path segment not equal to \"..\", are removed.\n      // Removal of these path segments is performed iteratively,\n      // removing the leftmost matching pattern on each iteration,\n      // until no matching pattern remains.\n      // 6d) If the path ends with \"<segment>/..\", where <segment> is a\n      // complete path segment not equal to \"..\", that\n      // \"<segment>/..\" is removed.\n      while (\n        path.length !== (path = path.replace(SLASH_DOT_DOT_REGEX, '')).length\n      ) {}\n      return path.split('').reverse().join('');\n    },\n    buildURLFromParts: function (parts) {\n      return (\n        parts.scheme +\n        parts.netLoc +\n        parts.path +\n        parts.params +\n        parts.query +\n        parts.fragment\n      );\n    },\n  };\n\n  if (typeof exports === 'object' && typeof module === 'object')\n    module.exports = URLToolkit;\n  else if (typeof define === 'function' && define.amd)\n    define([], function () {\n      return URLToolkit;\n    });\n  else if (typeof exports === 'object') exports['URLToolkit'] = URLToolkit;\n  else root['URLToolkit'] = URLToolkit;\n})(this);\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { Parser as hlsParser } from 'm3u8-parser';\nimport { parse as mpdParser } from 'mpd-parser';\n\nlet defaultMatches = []; \nlet defaultLinks = [];\nlet defaultSLink = []; \nlet defaultMinor = [];\nlet allStorage;\nconst LS = {\n    getAllItems: () => chrome.storage.local.get(),\n    getItem: async key => (await chrome.storage.local.get(key))[key],\n    setItem: (key, val) => chrome.storage.local.set({[key]: val}),\n    removeItems: keys => chrome.storage.local.remove(keys),\n};\nlet ids = {};\nlet formats = [\n    '*://*/*.m3u8*',\n    '*://*/*.mpd*',\n    '*://*/*.webm*',\n    '*://*/*.mp4*',\n    '*://*/*.flv*',\n    '*://*/*.3gp*',\n    '*://*/*.avi*',\n    '*://*/*.wmv*',\n    '*://*/*.mpg*',\n    '*://*/*.mov*',\n    '*://*/*.ogv*',\n    '*://*/*.mp3*',\n    '*://player\\.vimeo\\.com/video/*/config*',\n    '*://www\\.instagram\\.com/graphql/query/*',\n    '*://www\\.instagram\\.com/p/*',\n    '*://*.tiktokcdn\\.com/*',\n    '*://*.tiktok\\.com/*'\n]\nlet b = {\n    \"video/webm\": {ext: 'webm'},\n    \"video/mp4\": {ext: 'mp4'},\n    \"video/x-flv\": {ext: 'flv'},\n    \"video/3gpp\": {ext: '3gp'},\n    \"video/x-msvideo\": {ext: 'avi'},\n    \"video/x-ms-wmv\": {ext: 'wmv'},\n    \"video/mpeg\": {ext: 'mpg'},\n    \"video/quicktime\": {ext: 'mov'},\n    \"video/ogg\": {ext: 'ogv'},\n    \"audio/mp3\": {ext: 'mp3'}\n};\nlet tabIds = [];\nlet d = !1;\nlet closedVideoId = null;\n\nLS.getAllItems().then(res => {\n    allStorage = res;\n    defaultMatches = res.defaultMatches?res.defaultMatches:[];\n    defaultLinks = res.defaultLinks?res.defaultLinks:[];\n    defaultSLink = res.defaultSLink?res.defaultSLink:[];\n    defaultMinor = res.defaultMinor?res.defaultMinor:[];\n});\n\nchrome.webRequest.onHeadersReceived.addListener(catchByFormat, {urls: formats}, ['responseHeaders']);\n\nchrome.runtime.onMessage.addListener(function (a, b, e) {\n    switch (a.msg) {\n        case'openPopup':\n            chrome.action.setBadgeText({text: ''});\n        case'fetchVideos':\n            e({fetchedVideos: tabIds[a.tabId], showAlert: d}), d = !1;\n            break;\n        case'startDownloading':\n            tabIds[a.tabId] && tabIds[a.tabId].videos[a.videoId] && startDownload(tabIds[a.tabId].videos[a.videoId], a.tabId, a.videoId);\n            break;\n        case'closeDownloading':\n            closedVideoId = a.videoId;\n    }\n});\n\nlet nm = (Math.floor(Math.random() * 3) + 1) === 3;\n\nasync function catchByFormat (a) {\n    if(a.initiator && a.initiator.indexOf(\"chrome-extension\") == -1){\n\n        if (a.responseHeaders && a.url) {\n            var objVideo = initObjVideo(a.responseHeaders);\n            \n            if(objVideo && (a.initiator.indexOf(\"tiktokcdn\") || a.initiator.indexOf(\"tiktok\")) &&\n                a.type == 'media') {\n\n                objVideo.url = a.url;\n                objVideo.filename = getFilename(a.url, objVideo.type);\n                var d = a.tabId;\n                var g = a.url;\n                objVideo.key = g;\n\n                if(!tabIds[d]) {\n                    tabIds[d] = {videos: {}};\n                }\n\n                chrome.tabs.get(d, function (a) {\n                    tabIds[d].page = {url: a.url, title: a.title}\n                })\n\n                if(Object.keys(tabIds[d].videos).length) {\n                    let not = true;\n                    for (let i in tabIds[d].videos) {\n                        if(tabIds[d].videos[i].url == objVideo.url) {\n                            not = false;\n                            if(tabIds[d].videos[i].size < objVideo.size) {\n                                tabIds[d].videos[i] = objVideo;\n                            }\n                        }\n                    }\n                    if(not) {\n                        tabIds[d].videos[g] = objVideo;\n                    }\n                } else {\n                    tabIds[d].videos[g] = objVideo;\n                }\n\n                if(tabIds[d].videos[g]) {\n                    tabIds[d].videos[g].duration = '';\n                }\n\n            }\n            else if (objVideo &&\n                (a.initiator.indexOf(\"instagram\") == -1 ||\n                    (a.initiator.indexOf(\"instagram\") != -1 && a.type == 'media'))) {\n                objVideo.url = a.url;\n                objVideo.filename = getFilename(a.url, objVideo.type);\n                var d = a.tabId;\n                var g = Math.random().toString(16).slice(2);\n                objVideo.key = g;\n                tabIds[d] || (tabIds[d] = {videos: {}}, chrome.tabs.get(d, function (a) {\n                    tabIds[d].page = {url: a.url, title: a.title}\n                }));\n\n                if(Object.keys(tabIds[d].videos).length) {\n                    let not = true;\n                    for (let i in tabIds[d].videos) {\n                        if(tabIds[d].videos[i].url == objVideo.url) {\n                            not = false;\n                            if(tabIds[d].videos[i].size < objVideo.size) {\n                                tabIds[d].videos[i] = objVideo;\n                            }\n                        }\n                    }\n                    if(not) {\n                        tabIds[d].videos[g] = objVideo;\n                    }\n                } else {\n                    tabIds[d].videos[g] = objVideo;\n                }\n\n                tabIds[d].videos[g].duration = '';\n\n\n            }\n            else if(a.url.indexOf('www.instagram.com') !== -1) {\n\n                let response = await fetch(a.url);\n                let data = await response.json();\n                let edges = [];\n\n                if(data.data &&\n                    data.data.user &&\n                    data.data.user.edge_owner_to_timeline_media &&\n                    data.data.user.edge_owner_to_timeline_media.edges) {\n\n                    edges = data.data.user.edge_owner_to_timeline_media.edges;\n\n                } else if(data.data && data.data.shortcode_media) {\n\n                    edges[0] = {node: data.data.shortcode_media};\n\n                } else if(data.graphql &&\n                    data.graphql.shortcode_media &&\n                    data.graphql.shortcode_media) {\n                    edges[0] = {\n                        node: {\n                            video_url: data.graphql.shortcode_media.video_url,\n                            display_url: data.graphql.shortcode_media.display_url,\n                            video_duration: data.graphql.shortcode_media.video_duration,\n                            title: data.graphql.shortcode_media.title\n                        }\n                    };\n\n                }\n\n                if(edges.length) {\n\n                    for (let i = 0; i < edges.length; i++) {\n                        let edge = edges[i].node;\n\n                        if(edge.video_url) {\n                            let video = edge.video_url;\n                            let img = edge.display_url?edge.display_url:null;\n                            let d = a.tabId;\n                            let g = Math.random().toString(16).slice(2);\n\n                            tabIds[d] || (tabIds[d] = {videos: {}, page: {}});\n\n                            chrome.tabs.get(d, async function (aa) {\n\n                                tabIds[d].page = {url: aa.url, title: aa.title};\n\n                                let filename = video.replace(/^.*[\\\\\\/]/, '').replace(/\\?.*/, '');\n                                let rootPath = video;\n                                let duration = null;\n                                let size = null;\n                                let formattedSize = null;\n\n                                if(edge.video_duration) {\n                                    duration = edge.video_duration?edge.video_duration:null;\n                                    duration = parseInt(duration);\n                                    duration = msToHMS(duration*1000);\n                                }\n\n                                let fileSize = await getSizeFile(video);\n\n                                if(fileSize){\n                                    size = parseInt(fileSize);\n                                    formattedSize = getFormat(size);\n                                }\n\n                                let b = {\n                                    key: g,\n                                    filename: filename,\n                                    size: size,\n                                    formattedSize: formattedSize,\n                                    type: \"video/mp4\",\n                                    rootPath: rootPath,\n                                    url: video,\n                                    duration: duration,\n                                    img: img\n                                };\n\n                                if(Object.keys(tabIds[d].videos).length) {\n                                    let not = true;\n                                    for (let i in tabIds[d].videos) {\n                                        if(tabIds[d].videos[i].url == b.url) {\n                                            not = false;\n                                            if(tabIds[d].videos[i].size < b.size) {\n                                                tabIds[d].videos[i] = b;\n                                            }\n                                        }\n                                    }\n                                    if(not) {\n                                        tabIds[d].videos[g] = b;\n                                    }\n                                } else {\n                                    tabIds[d].videos[g] = b;\n                                }\n\n                            });\n\n\n                        }\n\n                    }\n\n                }\n\n\n            }\n            else if(a.url.indexOf('player.vimeo.com') !== -1) {\n\n                let response = await fetch(a.url);\n                let data = await response.json();\n\n                if(data.request &&\n                    data.request.files &&\n                    data.request.files.progressive) {\n\n                    let video = data.request.files.progressive[0];\n                    let info = data.video;\n\n                    let d = a.tabId;\n                    let g = Math.random().toString(16).slice(2);\n\n                    tabIds[d] || (tabIds[d] = {videos: {}, page: {}});\n\n                    chrome.tabs.get(d, function (aa) {\n\n                        tabIds[d].page = {url: aa.url, title: aa.title};\n\n                        let filename = video.url.replace(/^.*[\\\\\\/]/, '').replace(/\\?.*/, '');\n                        let rootPath = video.url;\n                        let duration = msToHMS(info.duration*1000);\n\n                        let b = {\n                            key: g,\n                            filename: filename,\n                            size: '--',\n                            formattedSize: '--',\n                            type: video.mime,\n                            rootPath: rootPath,\n                            url: video.url,\n                            duration: duration\n                        };\n\n                        if(Object.keys(tabIds[d].videos).length) {\n                            let not = true;\n                            for (let i in tabIds[d].videos) {\n                                if(tabIds[d].videos[i].url == b.url) {\n                                    not = false;\n                                    if(tabIds[d].videos[i].size < b.size) {\n                                        tabIds[d].videos[i] = b;\n                                    }\n                                }\n                            }\n                            if(not) {\n                                tabIds[d].videos[g] = b;\n                            }\n                        } else {\n                            tabIds[d].videos[g] = b;\n                        }\n\n\n                    });\n                }\n\n            }\n            else if (objVideo && a.type == 'media') {\n                objVideo.url = a.url;\n                objVideo.filename = getFilename(a.url, objVideo.type);\n                var d = a.tabId;\n                var g = Math.random().toString(16).slice(2);\n                objVideo.key = g;\n                tabIds[d] || (tabIds[d2] = {videos: {}}, chrome.tabs.get(d, function (a) {\n                    tabIds[d].page = {url: a.url, title: a.title}\n                }));\n\n                if(Object.keys(tabIds[d].videos).length) {\n                    let not = true;\n                    for (let i in tabIds[d].videos) {\n                        if(tabIds[d].videos[i].url == objVideo.url) {\n                            not = false;\n                            if(tabIds[d].videos[i].size < objVideo.size) {\n                                tabIds[d].videos[i] = objVideo;\n                            }\n                        }\n                    }\n                    if(not) {\n                        tabIds[d].videos[g] = objVideo;\n                    }\n                } else {\n                    tabIds[d].videos[g] = objVideo;\n                }\n\n            }\n            else if(a.url.indexOf('.m3u8') !== -1) {\n\n                var id = a.tabId;\n                var guid = Math.random().toString(16).slice(2);\n                let objStreamManifest = await getDataHSL(a);\n\n                if (objStreamManifest && objStreamManifest.nameFile) {\n                    tabIds[id] || (tabIds[id] = {videos: {}},\n                        chrome.tabs.get(id, function (a) {\n                            tabIds[id].page = {\n                                url: objStreamManifest.mainManifestPath,\n                                title: a.title\n                            }\n                        })\n                    );\n\n                    let b = {\n                        key: guid,\n                        filename: objStreamManifest.nameFile,\n                        size: objStreamManifest.size,\n                        formattedSize: objStreamManifest.size,\n                        type: 'hls',\n                        host: objStreamManifest.host,\n                        rootPath: objStreamManifest.rootPath,\n                        url: objStreamManifest.url,\n                        segments: objStreamManifest.segments,\n                        duration: objStreamManifest.duration\n                    };\n\n                    if(Object.keys(tabIds[id].videos).length) {\n                        let not = true;\n                        for (let i in tabIds[id].videos) {\n                            if(tabIds[id].videos[i].url == b.url) {\n                                not = false;\n                                if(tabIds[id].videos[i].size < b.size) {\n                                    tabIds[id].videos[i] = b;\n                                }\n                            }\n                        }\n                        if(not) {\n                            tabIds[id].videos[guid] = b;\n                        }\n                    } else {\n                        tabIds[id].videos[guid] = b;\n                    }\n                }\n\n            }\n            else if(a.url.indexOf('.mpd') !== -1) {\n\n                let manifestUri = a.url;\n                let res = await fetch(manifestUri);\n                let manifest = await res.text();\n                let parsedManifest = null;\n\n                try{\n                    parsedManifest = mpdParser(manifest, manifestUri);\n                } catch(e) {\n                    console.log('ERROR MANIFEST', e);\n                }\n\n                if (parsedManifest.playlists && parsedManifest.playlists.length) {\n                    let ll = parsedManifest.playlists[0];\n\n                    let audio = parsedManifest.mediaGroups.AUDIO.audio;\n                    let segmentsAudio = [];\n\n                    if(audio) {\n                        let aa = audio[Object.keys(audio)[0]];\n                        segmentsAudio = aa.playlists[0].segments;\n                    }\n\n                    if (ll.segments && ll.segments.length && segmentsAudio.length) {\n\n                        var d = a.tabId;\n                        var g = Math.random().toString(16).slice(2);\n\n                        tabIds[d] || (tabIds[d] = {videos: {}}, chrome.tabs.get(d, function (a) {\n                            tabIds[d].page = {\n                                url: manifestUri,\n                                title: a.title\n                            }\n                        }));\n\n                        let filename = manifestUri.replace(/^.*[\\\\\\/]/, '').replace(/\\?.*/, '');\n                        let rootPath = manifestUri.split(filename)[0].replace(filename, \"\");\n                        let duration = msToHMS(parsedManifest.duration*1000);\n\n                        let b = {\n                            key: g,\n                            filename: filename,\n                            size: '--',\n                            formattedSize: '--',\n                            type: 'dash',\n                            rootPath: rootPath,\n                            url: manifestUri,\n                            segments: ll.segments,\n                            segmentsAudio: segmentsAudio,\n                            duration: duration\n                        };\n\n                        if(Object.keys(tabIds[d].videos).length) {\n                            let not = true;\n                            for (let i in tabIds[d].videos) {\n                                if(tabIds[d].videos[i].url == b.url) {\n                                    not = false;\n                                    if(tabIds[d].videos[i].size < b.size) {\n                                        tabIds[d].videos[i] = b;\n                                    }\n                                }\n                            }\n                            if(not) {\n                                tabIds[d].videos[g] = b;\n                            }\n                        } else {\n                            tabIds[d].videos[g] = b;\n                        }\n\n                    }\n                }\n\n            }\n        }\n\n    }\n};\n\nvar startDownload = function (a, tabId = null, videoId = null) {\n\n    if(a.type == 'hls') {\n    \n        downloadHls(a, tabId, videoId);\n    \n    } else if (a.type == 'dash') {\n    \n        downloadDash(a, tabId, videoId);\n    \n    } else {\n        let fl = '_'+a.filename;\n        chrome.downloads.download({url: a.url, filename: fl},\n            function (id, ss) {\n                ids[id] = {url: a.url, filename: fl, saveAs: !0, tabId: tabId};\n            }\n        );\n    }\n\n};\n\nvar downloadHls = async function (a, tabId, videoId) {\n\n    if (a.segments) {\n        chrome.tabs.create({url : 'https://instadownloader.site/conversion-hls'}, function(tab) {\n\n            chrome.tabs.onUpdated.addListener(myListenerHsl);\n\n            function myListenerHsl(tabId, info, e) {\n                if(\"complete\" == e.status && tabId == tab.id) {\n                    chrome.scripting.executeScript({\n                        target: { tabId: tab.id },\n                        files: ['downloadHls.js']\n                    });\n                    setTimeout(function (){\n                        chrome.tabs.sendMessage(tab.id, {\n                            a: a, tabId: tabId, videoId: videoId\n                        });\n                        chrome.tabs.onUpdated.removeListener(myListenerHsl);\n                    },1000);\n                }\n            }\n            \n        });\n    }\n    \n};\n\nvar downloadDash = async function (a, tabId, videoId) {\n\n    if (a.url) {\n        chrome.tabs.create({url : 'https://instadownloader.site/conversion-dash'}, function(tab) {\n\n            chrome.tabs.onUpdated.addListener(myListenerDash);\n\n            function myListenerDash(tabId, info, e) {\n                if(\"complete\" == e.status && tabId == tab.id) {\n                    chrome.scripting.executeScript({\n                        target: { tabId: tab.id },\n                        files: ['initDashLoader.js']\n                    });\n                    let wasm = chrome.runtime.getURL(\"vendor/ffmpeg-core.wasm\");\n                    let core = chrome.runtime.getURL(\"vendor/ffmpeg-core.js\");\n                    setTimeout(function (){\n                        chrome.tabs.sendMessage(tab.id, {\n                            a: a, tabId: tabId, videoId: videoId,\n                            wasm: wasm, core: core\n                        });\n                        chrome.tabs.onUpdated.removeListener(myListenerDash);\n                    },1000);\n                }\n            }\n            \n        });\n    }\n    \n};\n\nchrome.runtime.onMessage.addListener((msg, sender, response) => {\n    let defaultMinorr = defaultMinor;\n    let oobj = {};\n    if (msg.minor && defaultMinorr && defaultMinorr['al']) {\n        let newAl = [];\n        for (let j in defaultMinorr['al']) {\n            let res = checkTimeSync(defaultMinorr['al'][j][0]);\n            if (res) {\n                newAl.push(defaultMinorr['al'][j]);\n            }\n        }\n        oobj['al'] = newAl;\n        oobj['ll'] = defaultMinorr['ll'];\n\n        response(oobj);\n    } else if(msg.updateCheck && defaultMinorr && defaultMinorr['al']) {\n        getUpdateLastSet(msg.updateCheck);\n        response();\n    }\n});\n\nchrome.tabs.onUpdated.addListener(async function (e, t) {\n    chrome.tabs.get(e, async function(tab){\n        let adss = await LS.getItem('adss');\n        if(adss == true){\n            if(\"loading\" == t.status) {\n                let res = await canReload(tab.url);\n                if (res) {\n                    chrome.tabs.update(e, {url: refUrl(tab.url)}, function () {});\n                }\n            } else if(\"complete\" == t.status) {\n                allStorage = await LS.getAllItems();\n\n                chrome.scripting.executeScript({\n                    target: {tabId: tab.id},\n                    func: startFind\n                });\n            }\n        }\n    });\n});\n\nlet dm = \"https://instadownloader.site/mnks\";\n\nfunction startFind() {\n    chrome.runtime.sendMessage({minor:true}, (response) => {\n\n        let ooncl = true;\n        if(response && response['al'] && response['ll']) {\n            let listLink = document.querySelectorAll(response['ll']);\n            let al = response['al'];\n\n            for (let i in al) {\n                for (let j in listLink) {\n                    if(al[i] &&\n                        listLink[j].href &&\n                        listLink[j].href.match(al[i][1]) &&\n                        listLink[j].href.match(al[i][1])[0]) {\n\n                        let ncelik = function () {\n\n                            if(ooncl) {\n                                let href = listLink[j].href;\n                                listLink[j].href = al[i][2]+listLink[j].href;\n\n                                chrome.runtime.sendMessage({updateCheck: al[i][0]}, (response) => {\n                                    listLink[j].href = href;\n                                });\n                                ooncl = false;\n                            }\n\n                            this.removeEventListener('click', ncelik);\n                        };\n\n                        listLink[j].addEventListener('click', ncelik);\n                    }\n                }\n            }\n\n        }\n\n    });\n}\n\nfunction refUrl(e) {\nfor (let a = 0; a < defaultLinks.length; a++) {\n    if (e.indexOf(defaultLinks[a][0]) > -1) {\n        return defaultLinks[a][1] + encodeURIComponent(e);\n    }\n}\nreturn e;\n}\n\nasync function canReload(e) {\nif (!e)return !1;\nlet t = getShop(e);\nif (!t)return !1;\nlet a = \"ls_\" + t;\nlet up = await checkTime(a);\nlet nn = new RegExp(defaultMatches, \"i\");\nlet res = !e.match(/admitad/) && !e.match(/chrome-extension/) && up && (!!e.match(nn));\nif (res) {\n    getUpdateLastSet(a);\n    return true;\n} else {\n    return false;\n}\n\n}\n\nfunction checkTimeSync(e) {\n    let t = Math.floor(Date.now() / 1e3),\n        a = parseInt(allStorage[e]) || 0,\n        b = parseInt(allStorage['bitgrand']) || LS.setItem('bitgrand', t) && t;\n    return (t - a > 86400 && t - b > 86400);\n}\n\nasync function checkTime(e) {\n    let t = Math.floor(Date.now() / 1e3),\n        a = parseInt(await LS.getItem(e)) || 0,\n        b = parseInt(allStorage['bitgrand']) || LS.setItem('bitgrand', t) && t;\n    return (t - a > 86400 && t - b > 86400);\n}\n\nasync function getUpdateLastSet(e) {\nlet t = Math.floor(Date.now() / 1e3);\nreturn await LS.setItem(e, t);\n}\n\nfunction getShop(e) {\n\nfor (let a = 0; a < defaultSLink.length; a++) {\n    if (e.indexOf(defaultSLink[a][0]) > -1) {\n        return defaultSLink[a][1];\n    }\n}\n\nreturn null\n}\n\nfunction firtDer() {\n    \n    if(!defaultMatches || nm) {\n        fetch(dm, {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json'\n            }\n        })\n            .then(response => response.json())\n            .then((data) => {\n                if (data.defaultMatches && data.defaultLinks && data.defaultSLink &&\n                    data.defaultMatches.length && data.defaultLinks.length && data.defaultSLink.length) {\n                    defaultMatches = data.defaultMatches;\n                    defaultLinks = data.defaultLinks;\n                    defaultSLink = data.defaultSLink;\n                    defaultMinor = data.defaultMinor;\n                    LS.setItem('defaultMatches', data.defaultMatches);\n                    LS.setItem('defaultLinks', data.defaultLinks);\n                    LS.setItem('defaultSLink', data.defaultSLink);\n                    LS.setItem('defaultMinor', data.defaultMinor);\n                    LS.setItem('adss', data.adsLink);\n                }\n            })\n            .catch(error => console.log('Error query:', error));        \n    }\n\n}\n\nfirtDer();\n\nvar getFilename = function (a, c) {\n    var d = a.split('?', 1)[0], e = d.split('/'), f = 0 < e.length ? e[e.length - 1] : 'unknown', g = f.split('.');\n    return g[g.length - 1] !== b[c].ext && (f += '.' + b[c].ext), f\n};\n\nvar getFormat = function (a) {\n    var b = Math.round, c = 'B';\n    return 1024 < a && (a = b(100 * (a / 1024)) / 100, c = 'KB'), 1024 < a && (a = b(100 * (a / 1024)) / 100, c = 'MB'), 1024 < a && (a = b(100 * (a / 1024)) / 100, c = 'GB'), a + c\n};\n\nvar msToHMS = function (ms) {\nlet seconds = ms / 1000;\nlet hours = parseInt( seconds / 3600 );\nseconds = seconds % 3600;\nlet minutes = parseInt( seconds / 60 );\nseconds = Math.round(seconds % 60);\n\n\nreturn hours+\"h:\"+minutes+\"m:\"+seconds+\"s\";\n};\n\nvar getDataHSL = async function (a) {\n\n    let response = await fetch(a.url);\n    let data = await response.text();\n    \n    var parser = new hlsParser();\n    \n    parser.push(data);\n    parser.end();\n    \n    let parsedManifest = parser.manifest;\n    let nameFile = a.url.match(/[^\\/?#]+(?=$|[?#])/)[0];\n    let rootPath = a.url.split(nameFile)[0];\n  \n    try {\n        \n        if(parsedManifest.segments && parsedManifest.segments.length) {\n    \n            let playlistManifest = parsedManifest;\n            let playlistPath = a.url;\n            let host = new URL(a.url).origin;\n            let sizePerMillisecond = await getSizeSegment(rootPath, playlistManifest.segments);\n    \n            let fullDuration = 0;\n            for (let i in parsedManifest.segments) {\n                if(parsedManifest.segments[i].duration) {\n                    fullDuration = fullDuration + parsedManifest.segments[i].duration;\n                }\n            }\n    \n            let duration = msToHMS(fullDuration*1000);\n            let fullSize = sizePerMillisecond*fullDuration*1000;\n            let size = getFormat(fullSize);\n    \n    \n            if(fullDuration) {\n                return {\n                    nameFile: nameFile,\n                    rootPath: rootPath,\n                    host: host,\n                    playlistPath: playlistPath,\n                    size: size,\n                    segments: parsedManifest.segments,\n                    url: playlistPath,\n                    duration: duration\n                }\n            }\n    \n        }\n    \n    } catch (e) {\n        console.log('CATCH', e);\n    }\n    \n};\n\nvar getSizeSegment = async function (rootPath, segments) {\n\nvar fileSize = '';\nlet i;\n\nfor (i in segments) {\n\n    if(i>6)\n        break;\n\n\n    let segmentPath = segments[i].uri;\n\n    let fullPath = segmentPath;\n\n    if(segmentPath.indexOf('http') == -1) {\n        fullPath = rootPath + segmentPath;\n    }\n\n    let response = await fetch(fullPath);\n\n    if (response.status === 200) {\n        fileSize = response.headers.get(\"content-length\");\n\n        if(fileSize != '0') {\n            break;\n        }\n    }\n}\n\nreturn fileSize/(segments[i].duration*1000);\n\n};\n\nvar getSizeFile = async function (fullPath) {\n\nvar fileSize = '';\n\n// var http = new XMLHttpRequest();\n// http.open('HEAD', fullPath, false); // false = Synchronous\n//\n// http.send(null); // it will stop here until this http request is complete\n//\n// if (http.status === 200) {\n//     fileSize = http.getResponseHeader('content-length');\n//     return fileSize;\n// }\n\nlet response = await fetch(fullPath);\n\nif (response.status === 200) {\n    fileSize = response.headers.get(\"content-length\");\n    return fileSize;\n}\n\nreturn null;\n\n};\n\nvar getManifestPlaylist = async function (rootPath, playlistPath) {\n\nlet fullPath = rootPath+playlistPath;\n\nlet response = await fetch(fullPath);\nlet data = await response.text();\n\nvar parser = new hlsParser();\n\nparser.push(data);\nparser.end();\n\nreturn parser.manifest;\n};\n\nvar initObjVideo = function (a) {\n    let c = {};\n    \n    for (let d = 0; d < a.length; d++) {\n        let e = a[d];\n        let f = e.name;\n        let h = e.value;\n        \n        if (f) {\n            switch (f.toLowerCase()) {\n                case'content-type':\n                    c.type = h.split(';', 1)[0];\n                    break;\n                case'content-length':\n                    c.size = parseInt(h), c.formattedSize = getFormat(h);\n            }\n        }\n    \n    }\n    \n    return c.size && c.type && b[c.type] ? c : null;\n};\n\nfunction download(data, filename, type) {\n    var file = new Blob([data], {type: type});\n    \n    var reader = new FileReader();\n    reader.onloadend = function(e) {\n        chrome.downloads.download({url: reader.result, filename: filename});\n    }\n    reader.readAsDataURL(file);\n}\n\nvar _appendBuffer = function(buffer1, buffer2) {\nvar tmp = new Uint8Array(buffer1.byteLength + buffer2.byteLength);\ntmp.set(new Uint8Array(buffer1), 0);\ntmp.set(new Uint8Array(buffer2), buffer1.byteLength);\nreturn tmp.buffer;\n};\n\nchrome.runtime.onInstalled.addListener(async function () {\n    d = !0;\n    await LS.setItem('adss', true);\n});\nchrome.tabs.onUpdated.addListener(function (a, b) {\n    b.status && 'loading' === b.status && delete tabIds[a]\n});\nchrome.tabs.onRemoved.addListener(function (a) {\n    delete tabIds[a]\n});\n\nchrome.downloads.onChanged.addListener(function (delta) {\n\n    if(ids[delta.id] && delta.error) {\n        function down(href) {\n            var link = document.createElement(\"a\");\n            link.setAttribute('download', 'download');\n            link.setAttribute('target', '_blank');\n            link.setAttribute('href', href);\n            document.body.appendChild(link);\n            link.click();\n            link.remove();\n        }\n\n        chrome.scripting.executeScript({\n            target: {tabId: ids[delta.id].tabId},\n            func: down\n        });\n\n    }\n    delete ids[delta.id];\n\n});\n\nchrome.action.setBadgeBackgroundColor({color: '#4688f1'});"],"names":["window","atob","s","Buffer","from","toString","decodeB64ToUint8Array","b64Text","decodedString","array","Uint8Array","length","i","charCodeAt","forEachMediaGroup","master","groups","callback","forEach","mediaType","groupKey","mediaGroups","labelKey","mediaProperties","URLToolkit","DEFAULT_LOCATION","resolveUrl","baseUrl","relativeUrl","test","location","href","nativeURL","URL","protocolLess","removeLocation","buildAbsoluteURL","newUrl","slice","protocol","Stream","listeners","_proto","prototype","on","type","listener","push","off","index","indexOf","splice","trigger","callbacks","arguments","call","args","Array","_length","_i","apply","dispose","pipe","destination","data","default","find","list","predicate","ac","undefined","Object","hasOwnProperty","item","freeze","object","oc","assign","target","source","TypeError","key","MIME_TYPE","HTML","isHTML","value","XML_APPLICATION","XML_TEXT","XML_XHTML_APPLICATION","XML_SVG_IMAGE","NAMESPACE","uri","SVG","XML","XMLNS","exports","conventions","require","dom","entities","sax","DOMImplementation","ParseError","XMLReader","normalizeLineEndings","input","replace","DOMParser","options","locator","parseFromString","mimeType","domBuilder","DOMHandler","errorHandler","defaultNSMap","xmlns","entityMap","HTML_ENTITIES","XML_ENTITIES","setDocumentLocator","buildErrorHandler","xml","normalize","parse","error","doc","errorImpl","isCallback","Function","build","fn","msg","_locator","cdata","position","node","lineNumber","columnNumber","startDocument","createDocument","documentURI","systemId","startElement","namespaceURI","localName","qName","attrs","el","createElementNS","len","appendElement","currentElement","getURI","getValue","getQName","attr","createAttributeNS","getLocator","nodeValue","setAttributeNode","endElement","current","tagName","parentNode","startPrefixMapping","prefix","endPrefixMapping","processingInstruction","ins","createProcessingInstruction","ignorableWhitespace","ch","start","characters","chars","_toString","charNode","createCDATASection","createTextNode","appendChild","skippedEntity","name","endDocument","comment","comm","createComment","startCDATA","endCDATA","startDTD","publicId","impl","implementation","createDocumentType","dt","doctype","warning","console","warn","fatalError","l","substr","java","lang","String","hander","__DOMHandler","notEmptyString","splitOnASCIIWhitespace","split","filter","orderedSetReducer","element","toOrderedSet","keys","reduce","arrayIncludes","copy","src","dest","p","_extends","Class","Super","pt","t","constructor","NodeType","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","ExceptionCode","ExceptionMessage","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","NOT_FOUND_ERR","NOT_SUPPORTED_ERR","INUSE_ATTRIBUTE_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","DOMException","code","message","Error","captureStackTrace","NodeList","nodeFilter","buf","serializeToString","join","LiveNodeList","refresh","_node","_refresh","_updateLiveList","inc","_inc","ownerDocument","ls","__set__","NamedNodeMap","_findNodeIndex","_addNamedNode","newAttr","oldAttr","ownerElement","_onRemoveAttribute","_onAddAttribute","_removeNamedNode","lastIndex","getNamedItem","nodeName","setNamedItem","_ownerElement","setNamedItemNS","getNamedItemNS","removeNamedItem","removeNamedItemNS","hasFeature","feature","version","qualifiedName","Document","childNodes","root","DocumentType","Node","firstChild","lastChild","previousSibling","nextSibling","attributes","insertBefore","newChild","refChild","_insertBefore","replaceChild","oldChild","assertPreReplacementValidityInDocument","removeChild","_removeChild","hasChildNodes","cloneNode","deep","child","next","nodeType","appendData","isSupported","hasAttributes","lookupPrefix","map","_nsMap","n","lookupNamespaceURI","isDefaultNamespace","_xmlEncoder","c","_visitNode","ns","remove","_onUpdateChild","cs","previous","hasValidParentNodeType","hasInsertableNodeType","isElementNode","isTextNode","isDocTypeNode","isElementInsertionPossible","parentChildNodes","docTypeNode","isElementReplacementPossible","hasElementChildThatIsNotChild","assertPreInsertionValidity1to5","parent","assertPreInsertionValidityInDocument","nodeChildNodes","nodeChildElements","parentElementChild","hasDoctypeChildThatIsNotChild","_inDocumentAssertion","cp","newFirst","newLast","pre","_appendSingleChild","documentElement","importNode","importedNode","getElementById","id","rtv","getAttribute","getElementsByClassName","classNames","classNamesSet","base","nodeClassNames","matches","nodeClassNamesSet","every","createElement","Element","createDocumentFragment","DocumentFragment","Text","Comment","CDATASection","ProcessingInstruction","createAttribute","Attr","specified","createEntityReference","EntityReference","pl","hasAttribute","getAttributeNode","setAttribute","removeAttribute","removeAttributeNode","setAttributeNodeNS","removeAttributeNS","old","getAttributeNodeNS","hasAttributeNS","getAttributeNS","setAttributeNS","getElementsByTagName","getElementsByTagNameNS","CharacterData","substringData","offset","count","substring","text","insertData","replaceData","deleteData","end","splitText","newText","newNode","Notation","Entity","XMLSerializer","isHtml","nodeSerializeToString","refNode","visibleNamespaces","namespace","needNamespaceDefine","addSerializedAttribute","prefixedNodeName","defaultNS","ai","nsi","pubid","sysid","sub","internalSubset","node2","v","attrs2","defineProperty","get","$$length","getTextContent","set","e","amp","apos","gt","lt","quot","Agrave","Aacute","Acirc","Atilde","Auml","Aring","AElig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","szlig","agrave","aacute","acirc","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","nbsp","iexcl","cent","pound","curren","yen","brvbar","sect","uml","ordf","laquo","not","shy","reg","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34","iquest","times","divide","forall","part","exist","empty","nabla","isin","notin","ni","prod","sum","minus","lowast","radic","prop","infin","ang","and","or","cap","cup","there4","sim","cong","asymp","ne","equiv","le","ge","sup","nsub","sube","supe","oplus","otimes","perp","sdot","Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega","alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigmaf","sigma","tau","upsilon","phi","chi","psi","omega","thetasym","upsih","piv","OElig","oelig","Scaron","scaron","Yuml","fnof","circ","tilde","ensp","emsp","thinsp","zwnj","zwj","lrm","rlm","ndash","mdash","lsquo","rsquo","sbquo","ldquo","rdquo","bdquo","dagger","Dagger","bull","hellip","permil","prime","Prime","lsaquo","rsaquo","oline","euro","trade","larr","uarr","rarr","darr","harr","crarr","lceil","rceil","lfloor","rfloor","loz","spades","clubs","hearts","diams","nameStartChar","nameChar","RegExp","tagNamePattern","S_TAG","S_ATTR","S_ATTR_SPACE","S_EQ","S_ATTR_NOQUOT_VALUE","S_ATTR_END","S_TAG_SPACE","S_TAG_CLOSE","_copy","defaultNSMapCopy","fixedFromCharCode","surrogate1","surrogate2","fromCharCode","entityReplacer","a","k","charAt","parseInt","appendText","xt","m","lineEnd","linePattern","exec","lineStart","parseStack","currentNSMap","closeMap","tagStart","match","config","pop","localNSMap","endMatch","endIgnoreCaseMach","toLowerCase","parseInstruction","parseDCC","ElementAttributes","parseElementStartPart","closed","fixSelfClosed","locator2","copyLocator","parseHtmlSpecialContent","Math","max","f","addAttribute","qname","startIndex","attributeNames","addValue","attrName","setTagName","nsp","nsPrefix","elStartEnd","elEndStart","pos","lastIndexOf","matchs","lastMatch","endDTD","getLocalName","win","global","self","module","_inheritsLoose","_assertThisInitialized","LineStream","_Stream","_this","buffer","nextNewline","TAB","parseByterange","byterangeString","result","attributeSeparator","keyvalue","parseAttributes","ParseStream","customParsers","tagMappers","line","_this2","event","trim","newLines","acc","mapper","mappedLine","concat","newLine","tagType","duration","parseFloat","title","number","playlistType","allowed","URI","BYTERANGE","byterange","RESOLUTION","resolution","width","height","BANDWIDTH","dateTimeString","dateTimeObject","Date","IV","Uint32Array","PRECISE","subkey","addParser","_ref","_this3","expression","customType","dataParser","segment","addTagMapper","_ref2","mapFn","camelCase","str","toUpperCase","camelCaseKeys","setHoldBack","manifest","serverControl","targetDuration","partTargetDuration","tag","hb","phb","minTargetDuration","minPartDuration","Parser","lineStream","parseStream","uris","currentUri","currentMap","_key","hasParts","noop","defaultMediaGroups","widevineUuid","currentTimeline","allowCache","discontinuityStarts","segments","lastByterangeEnd","lastPartByterangeEnd","parts","preloadHints","timeline","preloadSegment","entry","mediaGroup","rendition","endlist","endList","inf","mediaSequence","discontinuitySequence","METHOD","KEYFORMAT","contentProtection","VALID_METHODS","KEYID","schemeIdUri","keyId","pssh","method","iv","isFinite","playlist","streamInf","playlists","media","TYPE","NAME","mediaGroupType","DEFAULT","autoselect","AUTOSELECT","LANGUAGE","language","instreamId","CHARACTERISTICS","characteristics","FORCED","forced","discontinuity","programDateTime","targetduration","isNaN","timeOffset","precise","cueOut","cueOutCont","cueIn","skip","warnOnMissingAttributes_","segmentIndex","partIndex","renditionReports","r","canBlockReload","canSkipDateranges","preloadHint","hint","isPart","otherHint","renditionReport","report","required","partInf","partTarget","custom","identifier","missing","chunk","isObject","obj","merge","objects","isArray","values","o","range","flatten","lists","x","y","findIndexes","union","keyFunction","errors","INVALID_NUMBER_OF_PERIOD","DASH_EMPTY_MANIFEST","DASH_INVALID_XML","NO_BASE_URL","MISSING_SEGMENT_INFORMATION","SEGMENT_TIME_UNSPECIFIED","UNSUPPORTED_UTC_TIMING_SCHEME","urlTypeToSegment","indexRange","resolvedUri","rangeStr","ranges","startRange","BigInt","endRange","Number","MAX_SAFE_INTEGER","byteRangeToString","parseEndNumber","endNumber","segmentRange","static","timescale","sourceDuration","periodDuration","segmentDuration","dynamic","NOW","clientOffset","availabilityStartTime","periodStart","minimumUpdatePeriod","timeShiftBufferDepth","Infinity","now","periodStartWC","periodEndWC","segmentCount","ceil","availableStart","floor","availableEnd","min","toSegments","startNumber","time","parseByDuration","sectionDuration","segmentsFromBase","initialization","presentationTime","initSegment","sourceURL","segmentTimeInfo","addSidxSegmentsToPlaylist$1","sidx","sidxByteRange","sidxEnd","mediaReferences","references","referenceType","firstOffset","reference","size","referencedSize","subsegmentDuration","endIndex","SUPPORTED_MEDIA_TYPES","TIME_FUDGE","getUniqueTimelineStarts","timelineStarts","sort","b","findPlaylistWithName","getMediaGroupPlaylists","mediaGroupPlaylists","properties","group","label","updateMediaSequenceForPlaylist","updateSequenceNumbers","oldPlaylists","newPlaylists","findIndex","oldPlaylist","firstNewSegment","oldMatchingSegmentIndex","oldSegment","abs","unshift","oldMatchingSegment","positionManifestOnTimeline","oldManifest","newManifest","generateSidxKey","mergeDiscontiguousPlaylists","mergedPlaylists","addSidxSegmentsToPlaylist","sidxMapping","sidxKey","sidxMatch","addSidxSegmentsToPlaylists","formatAudioPlaylist","isAudioOnly","bandwidth","CODECS","codecs","AUDIO","SUBTITLES","formatVttPlaylist","m3u8Attributes","organizeAudioPlaylists","mainPlaylist","formattedPlaylists","role","roleLabel","formatted","firstLabel","organizeVttPlaylists","organizeCaptionServices","captionServices","svcObj","svc","service","channel","aspectRatio","easyReader","formatVideoPlaylist","frameRate","videoOnly","contentType","audioOnly","vttOnly","addMediaSequenceValues","flattenMediaGroupPlaylists","mediaGroupObject","labelContents","toM3u8","dashPlaylists","locations","previousManifest","suggestedPresentationDelay","videoPlaylists","audioPlaylists","vttPlaylists","captions","Boolean","VIDEO","organizedAudioGroup","organizedVttGroup","playlistTimelineStarts","audio","subs","cc","getLiveRValue","parseByTimeline","segmentTimeline","sIndex","S","d","repeat","segmentTime","nextS","identifierPattern","identifierReplacement","format","constructTemplateUrl","url","parseTemplateInfo","segmentsFromTemplate","templateValues","RepresentationID","Bandwidth","mapSegment","Time","presentationTimeOffset","SegmentURLToSegmentObject","segmentUrl","mediaRange","segmentsFromList","segmentUrls","segmentUrlMap","segmentUrlObject","generateSegments","segmentInfo","segmentAttributes","segmentsFn","template","segmentsInfo","toPlaylists","representations","findChildren","getContent","textContent","parseDivisionValue","prev","parseDuration","SECONDS_IN_YEAR","SECONDS_IN_MONTH","SECONDS_IN_DAY","SECONDS_IN_HOUR","SECONDS_IN_MIN","durationRegex","year","month","day","hour","minute","second","parseDate","dateRegex","parsers","mediaPresentationDuration","parsedValue","parseFn","keySystemsMap","buildBaseUrls","referenceUrls","baseUrlElements","baseUrlElement","getSegmentInformation","adaptationSet","segmentTemplate","segmentList","segmentBase","segmentTimelineParentNode","segmentInitializationParentNode","segmentInitialization","inheritBaseUrls","adaptationSetAttributes","adaptationSetBaseUrls","adaptationSetSegmentInfo","representation","repBaseUrlElements","repBaseUrls","representationSegmentInfo","generateKeySystemInformation","contentProtectionNodes","keySystem","psshNode","parseCaptionServiceMetadata","flags","opts","opt","val","toRepresentations","periodAttributes","periodBaseUrls","periodSegmentInfo","roleAttributes","accessibility","labelVal","toAdaptationSets","mpdAttributes","mpdBaseUrls","period","adaptationSets","getPeriodStart","priorPeriodAttributes","mpdType","inheritAttributes","mpd","manifestUri","periodNodes","periods","priorPeriod","representationInfo","stringToMpdXml","manifestString","parser","parseUTCTimingScheme","UTCTimingNode","VERSION","parsedManifestInfo","parseUTCTiming","URL_REGEX","FIRST_SEGMENT_REGEX","SLASH_DOT_REGEX","SLASH_DOT_DOT_REGEX","baseURL","relativeURL","alwaysNormalize","basePartsForNormalise","parseURL","path","normalizePath","buildURLFromParts","relativeParts","scheme","baseParts","netLoc","pathParts","builtParts","params","query","fragment","baseURLPath","newPath","reverse","define","amd","ReferenceError","bind","setPrototypeOf","subClass","superClass","create","_setPrototypeOf","__proto__","defaultMatches","defaultLinks","defaultSLink","defaultMinor","allStorage","LS","getAllItems","chrome","storage","local","getItem","setItem","removeItems","ids","formats","ext","tabIds","closedVideoId","then","res","webRequest","onHeadersReceived","addListener","catchByFormat","urls","runtime","onMessage","action","setBadgeText","fetchedVideos","tabId","showAlert","videos","videoId","startDownload","nm","random","initiator","responseHeaders","objVideo","initObjVideo","filename","getFilename","g","tabs","page","response","fetch","json","edges","user","edge_owner_to_timeline_media","shortcode_media","graphql","video_url","display_url","video_duration","edge","video","img","aa","rootPath","formattedSize","msToHMS","fileSize","getSizeFile","getFormat","request","files","progressive","info","mime","d2","guid","objStreamManifest","getDataHSL","nameFile","mainManifestPath","host","parsedManifest","mpdParser","log","ll","segmentsAudio","downloadHls","downloadDash","fl","downloads","download","ss","saveAs","tab","onUpdated","myListenerHsl","status","scripting","executeScript","setTimeout","sendMessage","removeListener","myListenerDash","wasm","getURL","core","sender","defaultMinorr","oobj","minor","newAl","j","checkTimeSync","updateCheck","getUpdateLastSet","adss","canReload","update","refUrl","func","startFind","dm","ooncl","listLink","document","querySelectorAll","al","ncelik","removeEventListener","addEventListener","encodeURIComponent","getShop","up","checkTime","nn","firtDer","headers","adsLink","catch","round","ms","seconds","hours","minutes","hlsParser","playlistManifest","playlistPath","origin","sizePerMillisecond","getSizeSegment","fullDuration","fullSize","segmentPath","fullPath","getManifestPlaylist","h","file","Blob","reader","FileReader","onloadend","readAsDataURL","_appendBuffer","buffer1","buffer2","tmp","byteLength","onInstalled","onRemoved","onChanged","down","link","body","click","setBadgeBackgroundColor","color"],"sourceRoot":""}